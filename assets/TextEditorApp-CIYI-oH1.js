import{u as V,r as n,j as e}from"./index-CgCM4PKA.js";import{T as Z,M as _,H as ee}from"./MarkdownRenderer-BsNxmDvp.js";const te=({isOpen:m,onClose:f,onFileSelect:M,currentPath:C="/Desktop"})=>{const{fileSystem:x}=V(),[u,i]=n.useState(C),[w,c]=n.useState([]),[k,a]=n.useState(null),F=["txt","html","htm","md","markdown","js","jsx","ts","tsx","css","scss","sass","json","xml"],p=t=>{const l=t.split(".").pop()?.toLowerCase();return l?F.includes(l):!1},h=n.useCallback(t=>{const l=(S,y)=>{for(const g of S){if(g.path===y&&g.type==="folder")return g;if(g.children){const j=l(g.children,y);if(j)return j}}return null};return l(x,t)?.children||[]},[x]),d=t=>{if(t==="/"||t==="/Desktop")return null;const l=t.split("/");return l.pop(),l.join("/")||"/"},B=t=>{i(t),a(null)},q=t=>{t.type==="folder"?B(t.path):p(t.name)&&a(t.path)},I=()=>{if(!k)return;const t=(b,S)=>{for(const y of b){if(y.path===S&&y.type==="file")return y;if(y.children){const g=t(y.children,S);if(g)return g}}return null},l=t(x,k);l&&(M(l.path,l.name,l.content||""),f())};if(n.useEffect(()=>{c(h(u))},[u,x,h]),n.useEffect(()=>{i(C)},[C]),!m)return null;const $={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},z={backgroundColor:"#ffffff",borderRadius:"8px",padding:"24px",width:"500px",maxHeight:"600px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)"},K={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",borderBottom:"1px solid #e0e0e0",paddingBottom:"12px"},O={backgroundColor:"#f5f5f5",padding:"8px 12px",borderRadius:"4px",marginBottom:"12px",fontSize:"14px",fontFamily:"monospace",border:"1px solid #ddd"},R={flex:1,overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",maxHeight:"300px"},D={padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",gap:"8px"},T={...D,backgroundColor:"#e3f2fd"},N={display:"flex",gap:"12px",marginTop:"16px",justifyContent:"flex-end"},W={padding:"8px 16px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"14px"},A={...W,backgroundColor:"#0078d4",color:"white"},L={...W,backgroundColor:"#f5f5f5",color:"#333",border:"1px solid #ddd"},H=d(u);return e.jsx("div",{style:$,onClick:f,children:e.jsxs("div",{style:z,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:K,children:[e.jsx("h3",{style:{margin:0},children:"Abrir Arquivo"}),e.jsx("button",{onClick:f,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"√ó"})]}),e.jsxs("div",{style:O,children:["üìÅ ",u]}),e.jsxs("div",{style:R,children:[H&&e.jsxs("div",{style:D,onClick:()=>B(H),children:[e.jsx("span",{children:"üìÅ"}),e.jsx("span",{children:".."})]}),w.map(t=>{const l=k===t.path,b=t.type==="file"?p(t.name):!0,S=l?T:D;return e.jsxs("div",{style:{...S,opacity:b?1:.5,cursor:b?"pointer":"not-allowed"},onClick:()=>b&&q(t),children:[e.jsx("span",{children:t.type==="folder"?"üìÅ":t.name.endsWith(".txt")?"üìÑ":t.name.endsWith(".html")||t.name.endsWith(".htm")?"üåê":t.name.endsWith(".md")?"‚ÑπÔ∏è":t.name.endsWith(".js")||t.name.endsWith(".jsx")?"üìú":t.name.endsWith(".css")?"üé®":t.name.endsWith(".json")?"üîß":"üìÑ"}),e.jsx("span",{children:t.name}),t.type==="file"&&!p(t.name)&&e.jsx("span",{style:{fontSize:"12px",color:"#999",marginLeft:"auto"},children:"(n√£o edit√°vel)"})]},t.id)})]}),e.jsxs("div",{style:N,children:[e.jsx("button",{style:L,onClick:f,children:"Cancelar"}),e.jsx("button",{style:A,onClick:I,disabled:!k,children:"Abrir"})]})]})})},ne=({isOpen:m,onClose:f,onSave:M,currentFileName:C="untitled.txt",currentPath:x="/Desktop"})=>{const{fileSystem:u}=V(),[i,w]=n.useState(x),[c,k]=n.useState([]),[a,F]=n.useState(C),[p,h]=n.useState(""),d=o=>o.trim()?/[<>:"/\\|?*]/.test(o)?'Nome cont√©m caracteres inv√°lidos: < > : " / \\ | ? *':c.find(E=>E.type==="file"&&E.name.toLowerCase()===o.toLowerCase())?"Arquivo j√° existe nesta pasta":"":"Nome do arquivo √© obrigat√≥rio",B=n.useCallback(o=>{const v=(E,U)=>{for(const s of E){if(s.path===U&&s.type==="folder")return s;if(s.children){const r=v(s.children,U);if(r)return r}}return null};return v(u,o)?.children||[]},[u]),q=o=>{if(o==="/"||o==="/Desktop")return null;const v=o.split("/");return v.pop(),v.join("/")||"/"},I=o=>{w(o),h("")},$=o=>{o.type==="folder"&&I(o.path)},z=()=>{const o=d(a);if(o){h(o);return}M(i,a),f()},K=o=>{const v=o.target.value;F(v),p&&h("")},O=o=>o.includes(".")?o:`${o}.txt`;if(n.useEffect(()=>{k(B(i))},[i,u,B]),n.useEffect(()=>{w(x)},[x]),n.useEffect(()=>{F(C)},[C]),!m)return null;const R={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},D={backgroundColor:"#ffffff",borderRadius:"8px",padding:"24px",width:"500px",maxHeight:"600px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)"},T={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",borderBottom:"1px solid #e0e0e0",paddingBottom:"12px"},N={backgroundColor:"#f5f5f5",padding:"8px 12px",borderRadius:"4px",marginBottom:"12px",fontSize:"14px",fontFamily:"monospace",border:"1px solid #ddd"},W={flex:1,overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",maxHeight:"200px",marginBottom:"16px"},A={padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",gap:"8px"},L={marginBottom:"12px"},H={display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"bold"},t={width:"100%",padding:"8px 12px",border:p?"1px solid #dc3545":"1px solid #ddd",borderRadius:"4px",fontSize:"14px"},l={color:"#dc3545",fontSize:"12px",marginTop:"4px"},b={display:"flex",gap:"12px",marginTop:"16px",justifyContent:"flex-end"},S={padding:"8px 16px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"14px"},y={...S,backgroundColor:"#0078d4",color:"white"},g={...S,backgroundColor:"#f5f5f5",color:"#333",border:"1px solid #ddd"},j=q(i),P=c.filter(o=>o.type==="folder");return e.jsx("div",{style:R,onClick:f,children:e.jsxs("div",{style:D,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:T,children:[e.jsx("h3",{style:{margin:0},children:"Salvar Como"}),e.jsx("button",{onClick:f,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"√ó"})]}),e.jsxs("div",{style:N,children:["üìÅ ",i]}),e.jsxs("div",{style:W,children:[j&&e.jsxs("div",{style:A,onClick:()=>I(j),children:[e.jsx("span",{children:"üìÅ"}),e.jsx("span",{children:".."})]}),P.map(o=>e.jsxs("div",{style:A,onClick:()=>$(o),children:[e.jsx("span",{children:"üìÅ"}),e.jsx("span",{children:o.name})]},o.id)),P.length===0&&!j&&e.jsxs("div",{style:{...A,cursor:"default",opacity:.7},children:[e.jsx("span",{children:"üìÇ"}),e.jsx("span",{children:"Nenhuma subpasta encontrada"})]})]}),e.jsxs("div",{style:L,children:[e.jsx("label",{style:H,htmlFor:"fileName",children:"Nome do arquivo:"}),e.jsx("input",{id:"fileName",type:"text",value:a,onChange:K,style:t,placeholder:"Digite o nome do arquivo...",onBlur:()=>{a&&!a.includes(".")&&F(`${a}.txt`)}}),p&&e.jsx("div",{style:l,children:p})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:["Arquivo ser√° salvo como: ",i,"/",O(a)]}),e.jsxs("div",{style:b,children:[e.jsx("button",{style:g,onClick:f,children:"Cancelar"}),e.jsx("button",{style:y,onClick:z,disabled:!a.trim()||!!p,children:"Salvar"})]})]})})},oe=m=>{switch(m.split(".").pop()?.toLowerCase()){case"html":case"htm":return"html";case"md":case"markdown":return"markdown";case"txt":default:return"text"}},le=({filePath:m})=>{const{fileSystem:f,updateFileContent:M,saveFileAs:C}=V(),[x,u]=n.useState("untitled.txt"),[i,w]=n.useState(`Welcome to TextEditor!

Create a new file or open an existing one to start editing.`),[c,k]=n.useState(m||null),[a,F]=n.useState(!1),[p,h]=n.useState(!1),[d,B]=n.useState("light"),[q,I]=n.useState(!1),[$,z]=n.useState(!1),K=n.useRef(null),O=n.useRef(!1);n.useEffect(()=>{if(m&&!O.current){const s=(Y,J)=>{for(const G of Y){if(G.path===J&&G.type==="file")return G;if(G.children){const X=s(G.children,J);if(X)return X}}return null},r=s(f,m);r&&(u(r.name),w(r.content||""),k(m)),O.current=!0}},[m,f]);const R=n.useCallback(()=>{u("untitled.txt"),w(""),h(!1),F(!1)},[]),D=n.useCallback(()=>{c&&p?(M(c,i),h(!1)):c||z(!0)},[c,i,p,M]),T=n.useCallback(()=>{I(!0)},[]),N=n.useCallback(()=>{z(!0)},[]),W=n.useCallback((s,r,Y)=>{u(r),w(Y),k(s),h(!1),F(!1)},[]),A=n.useCallback((s,r)=>{if(C(s,r,i)){const J=`${s}/${r}`;u(r),k(J),h(!1)}},[C,i]),L=n.useCallback(()=>{if(c){const s=c.split("/");return s.pop(),s.join("/")||"/Desktop"}return"/Desktop"},[c]),H=n.useCallback(s=>{const r=s.target.value;w(r),h(!0)},[]),t=n.useCallback(()=>{F(!a)},[a]),l=n.useCallback(()=>{B(s=>s==="light"?"dark":"light")},[]);n.useEffect(()=>{const s=r=>{if(r.ctrlKey||r.metaKey)switch(r.key.toLowerCase()){case"n":r.preventDefault(),R();break;case"o":r.preventDefault(),T();break;case"s":r.preventDefault(),r.shiftKey?N():D();break}};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[R,T,D,N]);const b=oe(x),S={text:"Plain Text",html:"HTML",markdown:"Markdown"}[b],y={height:"100%",width:"100%",display:"flex",flexDirection:"column",backgroundColor:d==="dark"?"#1e1e1e":"#f5f5f5",color:d==="dark"?"#f8f8f2":"#2f3337"},g={display:"flex",alignItems:"center",padding:"8px 16px",backgroundColor:d==="dark"?"#2d2d30":"#ffffff",borderBottom:`1px solid ${d==="dark"?"#404040":"#e0e0e0"}`,gap:"12px",minHeight:"40px"},j={padding:"6px 12px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px"},P={...j,backgroundColor:d==="dark"?"#404040":"#6c757d"},o={fontSize:"14px",color:d==="dark"?"#cccccc":"#666",display:"flex",alignItems:"center",gap:"8px"},v={flex:1,display:"flex",overflow:"hidden"},Q={flex:1,border:"none",outline:"none",padding:"16px",fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, source-code-pro, monospace',fontSize:"14px",lineHeight:"1.5",backgroundColor:d==="dark"?"#1e1e1e":"#ffffff",color:d==="dark"?"#f8f8f2":"#2f3337",resize:"none"},E={flex:1,overflow:"auto",padding:"16px",backgroundColor:d==="dark"?"#1e1e1e":"#ffffff",borderLeft:`1px solid ${d==="dark"?"#404040":"#e0e0e0"}`},U=()=>{if(a)return e.jsx("textarea",{ref:K,style:Q,value:i,onChange:H,placeholder:"Start typing your content here...",spellCheck:!1});switch(b){case"html":return e.jsx("div",{style:E,children:e.jsx(ee,{content:i,theme:d})});case"markdown":return e.jsx("div",{style:E,children:e.jsx(_,{content:i,theme:d})});case"text":default:return e.jsx("div",{style:E,children:e.jsx(Z,{content:i,theme:d})})}};return e.jsxs("div",{style:y,children:[e.jsxs("div",{style:g,children:[e.jsx("button",{style:j,onClick:R,title:"Create new file (Ctrl+N)",children:"üìÑ New"}),e.jsx("button",{style:j,onClick:T,title:"Open file (Ctrl+O)",children:"üìÅ Open"}),e.jsx("button",{style:j,onClick:D,disabled:!p&&!!c,title:"Save file (Ctrl+S)",children:"üíæ Save"}),e.jsx("button",{style:P,onClick:N,title:"Save As (Ctrl+Shift+S)",children:"üíæ Save As"}),e.jsx("div",{style:{width:"1px",height:"24px",backgroundColor:"#ddd",margin:"0 8px"}}),e.jsx("button",{style:P,onClick:t,title:a?"Switch to preview":"Switch to edit mode",children:a?"üëÅÔ∏è Preview":"‚úèÔ∏è Edit"}),e.jsx("button",{style:P,onClick:l,title:"Toggle theme",children:d==="light"?"üåô":"‚òÄÔ∏è"}),e.jsxs("div",{style:o,children:[e.jsxs("span",{children:["üìÑ ",x]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:S}),p&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{style:{color:"#d73a49"},children:"Modified"})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{style:{fontSize:"12px",opacity:.7},children:L()})]})]})]}),e.jsx("div",{style:v,children:U()}),e.jsx(te,{isOpen:q,onClose:()=>I(!1),onFileSelect:W,currentPath:L()}),e.jsx(ne,{isOpen:$,onClose:()=>z(!1),onSave:A,currentFileName:x,currentPath:L()})]})};export{le as TextEditorApp,le as default};
