import{c as vt}from"./store-D0AIDEkW.js";function Ct(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pe={exports:{}},re={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Le;function kt(){if(Le)return re;Le=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,i){var c=null;if(i!==void 0&&(c=""+i),o.key!==void 0&&(c=""+o.key),"key"in o){i={};for(var a in o)a!=="key"&&(i[a]=o[a])}else i=o;return o=i.ref,{$$typeof:n,type:r,key:c,ref:o!==void 0?o:null,props:i}}return re.Fragment=e,re.jsx=t,re.jsxs=t,re}var Ae;function wt(){return Ae||(Ae=1,pe.exports=kt()),pe.exports}var s=wt(),fe={exports:{}},G={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pe;function St(){if(Pe)return G;Pe=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),x=Symbol.iterator;function y(g){return g===null||typeof g!="object"?null:(g=x&&g[x]||g["@@iterator"],typeof g=="function"?g:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,p={};function w(g,I,D){this.props=g,this.context=I,this.refs=p,this.updater=D||f}w.prototype.isReactComponent={},w.prototype.setState=function(g,I){if(typeof g!="object"&&typeof g!="function"&&g!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,g,I,"setState")},w.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")};function k(){}k.prototype=w.prototype;function N(g,I,D){this.props=g,this.context=I,this.refs=p,this.updater=D||f}var b=N.prototype=new k;b.constructor=N,C(b,w.prototype),b.isPureReactComponent=!0;var v=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function T(g,I,D,P,H,q){return D=q.ref,{$$typeof:n,type:g,key:I,ref:D!==void 0?D:null,props:q}}function $(g,I){return T(g.type,I,void 0,void 0,void 0,g.props)}function h(g){return typeof g=="object"&&g!==null&&g.$$typeof===n}function _(g){var I={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,function(D){return I[D]})}var R=/\/+/g;function L(g,I){return typeof g=="object"&&g!==null&&g.key!=null?_(""+g.key):I.toString(36)}function B(){}function F(g){switch(g.status){case"fulfilled":return g.value;case"rejected":throw g.reason;default:switch(typeof g.status=="string"?g.then(B,B):(g.status="pending",g.then(function(I){g.status==="pending"&&(g.status="fulfilled",g.value=I)},function(I){g.status==="pending"&&(g.status="rejected",g.reason=I)})),g.status){case"fulfilled":return g.value;case"rejected":throw g.reason}}throw g}function E(g,I,D,P,H){var q=typeof g;(q==="undefined"||q==="boolean")&&(g=null);var W=!1;if(g===null)W=!0;else switch(q){case"bigint":case"string":case"number":W=!0;break;case"object":switch(g.$$typeof){case n:case e:W=!0;break;case l:return W=g._init,E(W(g._payload),I,D,P,H)}}if(W)return H=H(g),W=P===""?"."+L(g,0):P,v(H)?(D="",W!=null&&(D=W.replace(R,"$&/")+"/"),E(H,I,D,"",function(te){return te})):H!=null&&(h(H)&&(H=$(H,D+(H.key==null||g&&g.key===H.key?"":(""+H.key).replace(R,"$&/")+"/")+W)),I.push(H)),1;W=0;var K=P===""?".":P+":";if(v(g))for(var U=0;U<g.length;U++)P=g[U],q=K+L(P,U),W+=E(P,I,D,q,H);else if(U=y(g),typeof U=="function")for(g=U.call(g),U=0;!(P=g.next()).done;)P=P.value,q=K+L(P,U++),W+=E(P,I,D,q,H);else if(q==="object"){if(typeof g.then=="function")return E(F(g),I,D,P,H);throw I=String(g),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return W}function M(g,I,D){if(g==null)return g;var P=[],H=0;return E(g,P,"","",function(q){return I.call(D,q,H++)}),P}function O(g){if(g._status===-1){var I=g._result;I=I(),I.then(function(D){(g._status===0||g._status===-1)&&(g._status=1,g._result=D)},function(D){(g._status===0||g._status===-1)&&(g._status=2,g._result=D)}),g._status===-1&&(g._status=0,g._result=I)}if(g._status===1)return g._result.default;throw g._result}var z=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)};function V(){}return G.Children={map:M,forEach:function(g,I,D){M(g,function(){I.apply(this,arguments)},D)},count:function(g){var I=0;return M(g,function(){I++}),I},toArray:function(g){return M(g,function(I){return I})||[]},only:function(g){if(!h(g))throw Error("React.Children.only expected to receive a single React element child.");return g}},G.Component=w,G.Fragment=t,G.Profiler=o,G.PureComponent=N,G.StrictMode=r,G.Suspense=u,G.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,G.__COMPILER_RUNTIME={__proto__:null,c:function(g){return j.H.useMemoCache(g)}},G.cache=function(g){return function(){return g.apply(null,arguments)}},G.cloneElement=function(g,I,D){if(g==null)throw Error("The argument must be a React element, but you passed "+g+".");var P=C({},g.props),H=g.key,q=void 0;if(I!=null)for(W in I.ref!==void 0&&(q=void 0),I.key!==void 0&&(H=""+I.key),I)!S.call(I,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&I.ref===void 0||(P[W]=I[W]);var W=arguments.length-2;if(W===1)P.children=D;else if(1<W){for(var K=Array(W),U=0;U<W;U++)K[U]=arguments[U+2];P.children=K}return T(g.type,H,void 0,void 0,q,P)},G.createContext=function(g){return g={$$typeof:c,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null},g.Provider=g,g.Consumer={$$typeof:i,_context:g},g},G.createElement=function(g,I,D){var P,H={},q=null;if(I!=null)for(P in I.key!==void 0&&(q=""+I.key),I)S.call(I,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(H[P]=I[P]);var W=arguments.length-2;if(W===1)H.children=D;else if(1<W){for(var K=Array(W),U=0;U<W;U++)K[U]=arguments[U+2];H.children=K}if(g&&g.defaultProps)for(P in W=g.defaultProps,W)H[P]===void 0&&(H[P]=W[P]);return T(g,q,void 0,void 0,null,H)},G.createRef=function(){return{current:null}},G.forwardRef=function(g){return{$$typeof:a,render:g}},G.isValidElement=h,G.lazy=function(g){return{$$typeof:l,_payload:{_status:-1,_result:g},_init:O}},G.memo=function(g,I){return{$$typeof:m,type:g,compare:I===void 0?null:I}},G.startTransition=function(g){var I=j.T,D={};j.T=D;try{var P=g(),H=j.S;H!==null&&H(D,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(V,z)}catch(q){z(q)}finally{j.T=I}},G.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},G.use=function(g){return j.H.use(g)},G.useActionState=function(g,I,D){return j.H.useActionState(g,I,D)},G.useCallback=function(g,I){return j.H.useCallback(g,I)},G.useContext=function(g){return j.H.useContext(g)},G.useDebugValue=function(){},G.useDeferredValue=function(g,I){return j.H.useDeferredValue(g,I)},G.useEffect=function(g,I,D){var P=j.H;if(typeof D=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(g,I)},G.useId=function(){return j.H.useId()},G.useImperativeHandle=function(g,I,D){return j.H.useImperativeHandle(g,I,D)},G.useInsertionEffect=function(g,I){return j.H.useInsertionEffect(g,I)},G.useLayoutEffect=function(g,I){return j.H.useLayoutEffect(g,I)},G.useMemo=function(g,I){return j.H.useMemo(g,I)},G.useOptimistic=function(g,I){return j.H.useOptimistic(g,I)},G.useReducer=function(g,I,D){return j.H.useReducer(g,I,D)},G.useRef=function(g){return j.H.useRef(g)},G.useState=function(g){return j.H.useState(g)},G.useSyncExternalStore=function(g,I,D){return j.H.useSyncExternalStore(g,I,D)},G.useTransition=function(){return j.H.useTransition()},G.version="19.1.1",G}var Oe;function jt(){return Oe||(Oe=1,fe.exports=St()),fe.exports}var d=jt();const Je=Ct(d),Be={BASE_URL:"/portfolio/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},le=new Map,de=n=>{const e=le.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,r])=>[t,r.getState()])):{}},Nt=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const r=le.get(t.name);if(r)return{type:"tracked",store:n,...r};const o={connection:e.connect(t),stores:{}};return le.set(t.name,o),{type:"tracked",store:n,...o}},_t=(n,e)=>{if(e===void 0)return;const t=le.get(n);t&&(delete t.stores[e],Object.keys(t.stores).length===0&&le.delete(n))},Tt=n=>{var e,t;if(!n)return;const r=n.split(`
`),o=r.findIndex(c=>c.includes("api.setState"));if(o<0)return;const i=((e=r[o+1])==null?void 0:e.trim())||"";return(t=/.+ (.+) .+/.exec(i))==null?void 0:t[1]},$t=(n,e={})=>(t,r,o)=>{const{enabled:i,anonymousActionType:c,store:a,...u}=e;let m;try{m=(i??(Be?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!m)return n(t,r,o);const{connection:l,...x}=Nt(a,m,u);let y=!0;o.setState=(p,w,k)=>{const N=t(p,w);if(!y)return N;const b=k===void 0?{type:c||Tt(new Error().stack)||"anonymous"}:typeof k=="string"?{type:k}:k;return a===void 0?(l?.send(b,r()),N):(l?.send({...b,type:`${a}/${b.type}`},{...de(u.name),[a]:o.getState()}),N)},o.devtools={cleanup:()=>{l&&typeof l.unsubscribe=="function"&&l.unsubscribe(),_t(u.name,a)}};const f=(...p)=>{const w=y;y=!1,t(...p),y=w},C=n(o.setState,r,o);if(x.type==="untracked"?l?.init(C):(x.stores[x.store]=o,l?.init(Object.fromEntries(Object.entries(x.stores).map(([p,w])=>[p,p===x.store?C:w.getState()])))),o.dispatchFromDevtools&&typeof o.dispatch=="function"){let p=!1;const w=o.dispatch;o.dispatch=(...k)=>{(Be?"production":void 0)!=="production"&&k[0].type==="__setState"&&!p&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),p=!0),w(...k)}}return l.subscribe(p=>{var w;switch(p.type){case"ACTION":if(typeof p.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return he(p.payload,k=>{if(k.type==="__setState"){if(a===void 0){f(k.state);return}Object.keys(k.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const N=k.state[a];if(N==null)return;JSON.stringify(o.getState())!==JSON.stringify(N)&&f(N);return}o.dispatchFromDevtools&&typeof o.dispatch=="function"&&o.dispatch(k)});case"DISPATCH":switch(p.payload.type){case"RESET":return f(C),a===void 0?l?.init(o.getState()):l?.init(de(u.name));case"COMMIT":if(a===void 0){l?.init(o.getState());return}return l?.init(de(u.name));case"ROLLBACK":return he(p.state,k=>{if(a===void 0){f(k),l?.init(o.getState());return}f(k[a]),l?.init(de(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return he(p.state,k=>{if(a===void 0){f(k);return}JSON.stringify(o.getState())!==JSON.stringify(k[a])&&f(k[a])});case"IMPORT_STATE":{const{nextLiftedState:k}=p.payload,N=(w=k.computedStates.slice(-1)[0])==null?void 0:w.state;if(!N)return;f(a===void 0?N:N[a]),l?.send(null,k);return}case"PAUSE_RECORDING":return y=!y}return}}),C},Mt=$t,he=(n,e)=>{let t;try{t=JSON.parse(n)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}t!==void 0&&e(t)};function It(n,e){let t;try{t=n()}catch{return}return{getItem:o=>{var i;const c=u=>u===null?null:JSON.parse(u,void 0),a=(i=t.getItem(o))!=null?i:null;return a instanceof Promise?a.then(c):c(a)},setItem:(o,i)=>t.setItem(o,JSON.stringify(i,void 0)),removeItem:o=>t.removeItem(o)}}const Ce=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return Ce(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return Ce(r)(t)}}}},Et=(n,e)=>(t,r,o)=>{let i={storage:It(()=>localStorage),partialize:p=>p,version:0,merge:(p,w)=>({...w,...p}),...e},c=!1;const a=new Set,u=new Set;let m=i.storage;if(!m)return n((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...p)},r,o);const l=()=>{const p=i.partialize({...r()});return m.setItem(i.name,{state:p,version:i.version})},x=o.setState;o.setState=(p,w)=>{x(p,w),l()};const y=n((...p)=>{t(...p),l()},r,o);o.getInitialState=()=>y;let f;const C=()=>{var p,w;if(!m)return;c=!1,a.forEach(N=>{var b;return N((b=r())!=null?b:y)});const k=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(p=r())!=null?p:y))||void 0;return Ce(m.getItem.bind(m))(i.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==i.version){if(i.migrate){const b=i.migrate(N.state,N.version);return b instanceof Promise?b.then(v=>[!0,v]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var b;const[v,j]=N;if(f=i.merge(j,(b=r())!=null?b:y),t(f,!0),v)return l()}).then(()=>{k?.(f,void 0),f=r(),c=!0,u.forEach(N=>N(f))}).catch(N=>{k?.(void 0,N)})};return o.persist={setOptions:p=>{i={...i,...p},p.storage&&(m=p.storage)},clearStorage:()=>{m?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>C(),hasHydrated:()=>c,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(u.add(p),()=>{u.delete(p)})},i.skipHydration||C(),f||y},Dt=Et,Rt={desktop:{backgroundColor:"#0078d4",gradient:{enabled:!1,type:"linear",angle:45,colors:[{color:"#0078d4",position:0},{color:"#106ebe",position:100}]},rgbTimer:{enabled:!1,interval:5e3,speed:1,colors:["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"]},presets:[{id:"default-blue",name:"Windows Blue",type:"solid",value:"#0078d4"},{id:"default-gradient",name:"Default Gradient",type:"gradient",value:{enabled:!0,type:"linear",angle:45,colors:[{color:"#0078d4",position:0},{color:"#106ebe",position:100}]}}]},language:{language:"en",region:"US",currency:"USD"},datetime:{timezone:"UTC",dateFormat:"short",timeFormat:"short",hour12Format:!0,showSeconds:!1,autoUpdate:!0}},Ft=[{id:"desktop",name:"Desktop",type:"folder",path:"/Desktop",icon:"folder",children:[{id:"about-me",name:"About.txt",type:"file",path:"/Desktop/About.txt",icon:"text",content:"Welcome to my portfolio! I'm a passionate developer...",position:{x:100,y:100}},{id:"test-md-file",name:"About.md",type:"file",path:"/Desktop/Test.md",icon:"markdown",content:`# Test Markdown File

This is a test markdown file to verify the system works correctly.

## Features

- **Bold text**
- *Italic text*
- [Links](https://example.com)

\`\`\`javascript
console.log("Hello, World!");
\`\`\`

> This is a blockquote

---

`,position:{x:200,y:100}}]},{id:"projects",name:"Projects",type:"folder",path:"/Projects",icon:"folder",children:[{id:"web-dev",name:"Web Development",type:"folder",path:"/Projects/Web Development",icon:"folder",children:[]},{id:"mobile-apps",name:"Mobile Apps",type:"folder",path:"/Projects/Mobile Apps",icon:"folder",children:[]}]},{id:"documents",name:"Documents",type:"folder",path:"/Documents",icon:"folder",children:[{id:"skills",name:"Skills.md",type:"file",path:"/Documents/Skills.md",icon:"markdown",content:`# Technical Skills

## Frontend
- React/TypeScript
- JavaScript/HTML/CSS

## Backend
- Node.js
- Python

## Tools
- Git/GitHub
- Docker`}]}],J=vt()(Mt(Dt((n,e)=>({windows:[],fileSystem:[],currentPath:"/Desktop",selectedItems:[],nextZIndex:1e3,theme:"light",wallpaper:"/wallpapers/default.jpg",isDragging:!1,draggedItem:null,isStartMenuOpen:!1,isScreensaverActive:!1,clipboard:{items:[],operation:null},settings:Rt,rgbTimerInterval:null,openWindow:t=>{const{nextZIndex:r}=e(),o={...t,id:`window-${Date.now()}-${Math.random()}`,isOpen:!0,zIndex:r};n(i=>({windows:[...i.windows,o],nextZIndex:r+1}))},closeWindow:t=>{n(r=>({windows:r.windows.filter(o=>o.id!==t)}))},minimizeWindow:t=>{n(r=>({windows:r.windows.map(o=>o.id===t?{...o,isMinimized:!o.isMinimized}:o)}))},maximizeWindow:t=>{n(r=>({windows:r.windows.map(o=>o.id===t?{...o,isMaximized:!o.isMaximized}:o)}))},updateWindowPosition:(t,r)=>{n(o=>({windows:o.windows.map(i=>i.id===t?{...i,position:r}:i)}))},updateWindowSize:(t,r)=>{n(o=>({windows:o.windows.map(i=>i.id===t?{...i,size:r}:i)}))},bringToFront:t=>{const{nextZIndex:r}=e();n(o=>({windows:o.windows.map(i=>i.id===t?{...i,zIndex:r}:i),nextZIndex:r+1}))},setCurrentPath:t=>n({currentPath:t}),setSelectedItems:t=>n({selectedItems:t}),addSelectedItem:t=>{n(r=>({selectedItems:[...r.selectedItems,t]}))},removeSelectedItem:t=>{n(r=>({selectedItems:r.selectedItems.filter(o=>o!==t)}))},clearSelection:()=>n({selectedItems:[]}),setTheme:t=>n({theme:t}),setWallpaper:t=>n({wallpaper:t}),initializeFileSystem:()=>n({fileSystem:Ft}),updateIconPosition:(t,r)=>{n(o=>{const a=(l,x)=>Math.sqrt(Math.pow(l.x-x.x,2)+Math.pow(l.y-x.y,2))<60,u=(l,x,y)=>{let f={...l},C=0;const p=20;for(;C<p;){if(!y.some(k=>k.id!==x&&k.position&&a(f,k.position)))return f;f.y+=90,C++}return f};return{fileSystem:o.fileSystem.map(l=>{if(l.children){const x=l.children;if(!x.find(w=>w.id===t))return l;const f=x.filter(w=>w.id!==t),C=f.find(w=>w.position&&a(r,w.position));let p=[...x];if(C&&C.position){const w=u({x:C.position.x,y:C.position.y+80+10},C.id,f.filter(k=>k.id!==C.id));p=p.map(k=>k.id===C.id?{...k,position:w}:k.id===t?{...k,position:r}:k)}else p=p.map(w=>w.id===t?{...w,position:r}:w);return{...l,children:p}}return l})}})},setDragging:(t,r)=>{n({isDragging:t,draggedItem:r||null})},toggleStartMenu:()=>{n(t=>({isStartMenuOpen:!t.isStartMenuOpen}))},closeStartMenu:()=>{n({isStartMenuOpen:!1})},activateScreensaver:()=>{n({isScreensaverActive:!0,isStartMenuOpen:!1})},deactivateScreensaver:()=>{n({isScreensaverActive:!1})},createFile:(t,r,o="")=>{const i=t.replace(/\/+$/,"")||"/",c=l=>{const w=l.filter(k=>k.position).map(k=>k.position);for(let k=0;k<10;k++)for(let N=0;N<8;N++){const b=100+N*100,v=100+k*100;if(!w.some(S=>Math.abs(S.x-b)<80&&Math.abs(S.y-v)<80))return{x:b,y:v}}return{x:100,y:100}},a=l=>{switch(l.split(".").pop()?.toLowerCase()){case"txt":return"text";case"md":return"markdown";case"js":case"ts":return"code";case"html":case"css":return"web";case"png":case"jpg":case"jpeg":case"gif":return"image";default:return"file"}},u=(l,x)=>l.map(y=>{if(y.path===x&&y.type==="folder"){if(y.children?.some(p=>p.name===r))return y;const C={id:`file-${Date.now()}-${Math.random()}`,name:r,type:"file",path:`${x}/${r}`,icon:a(r),content:o,position:x==="/Desktop"?c(y.children||[]):void 0};return m=!0,{...y,children:[...y.children||[],C]}}return y.children&&x.startsWith(`${y.path}/`)?{...y,children:u(y.children,x)}:y});let m=!1;return n(l=>({fileSystem:u(l.fileSystem,i)})),m},createFolder:(t,r)=>{const o=t.replace(/\/+$/,"")||"/",i=u=>{const C=u.filter(p=>p.position).map(p=>p.position);for(let p=0;p<10;p++)for(let w=0;w<8;w++){const k=100+w*100,N=100+p*100;if(!C.some(v=>Math.abs(v.x-k)<80&&Math.abs(v.y-N)<80))return{x:k,y:N}}return{x:100,y:100}},c=(u,m)=>u.map(l=>{if(l.path===m&&l.type==="folder"){if(l.children?.some(f=>f.name===r))return l;const y={id:`folder-${Date.now()}-${Math.random()}`,name:r,type:"folder",path:`${m}/${r}`,icon:"folder",children:[],position:m==="/Desktop"?i(l.children||[]):void 0};return a=!0,{...l,children:[...l.children||[],y]}}return l.children&&m.startsWith(`${l.path}/`)?{...l,children:c(l.children,m)}:l});let a=!1;return n(u=>({fileSystem:c(u.fileSystem,o)})),a},removeFileSystemItem:t=>{let r=!1;return n(o=>{const i=a=>a.filter(u=>u.path===t?(r=!0,!1):(u.children&&(u.children=i(u.children)),!0));return{fileSystem:i(o.fileSystem)}}),r},renameFileSystemItem:(t,r)=>{if(!r.trim())return!1;let o=!1;return n(i=>{const c=u=>u.map(m=>{if(m.path===t){const l=t.substring(0,t.lastIndexOf("/"))||"/",x=l==="/"?`/${r}`:`${l}/${r}`;if((i.fileSystem.find(w=>w.path===l&&w.type==="folder")?.children||[]).some(w=>w.name===r&&w.id!==m.id))return m;o=!0;const p={...m,name:r,path:x};if(m.type==="folder"&&m.children){const w=(k,N,b)=>k.map(v=>({...v,path:v.path.replace(N,b),children:v.children?w(v.children,N,b):void 0}));p.children=w(m.children,t,x)}return p}return m.children?{...m,children:c(m.children)}:m});return{fileSystem:c(i.fileSystem)}}),o},copyToClipboard:t=>{const r=e(),i=((c,a)=>{const u=[],m=l=>{for(const x of l)a.includes(x.path)&&u.push({...x}),x.children&&m(x.children)};return m(c),u})(r.fileSystem,t);n(c=>({...c,clipboard:{items:i,operation:"copy"}}))},cutToClipboard:t=>{const r=e(),i=((c,a)=>{const u=[],m=l=>{for(const x of l)a.includes(x.path)&&u.push({...x}),x.children&&m(x.children)};return m(c),u})(r.fileSystem,t);n(c=>({...c,clipboard:{items:i,operation:"cut"}}))},pasteFromClipboard:t=>{const r=e(),{clipboard:o}=r;if(!o.items.length||!o.operation)return!1;let i=!1;const c=(u,m)=>{if(!m.includes(u))return u;const l=u.split("."),x=l.length>1?`.${l.pop()}`:"",y=l.join(".");let f=1,C=`${y} (${f})${x}`;for(;m.includes(C);)f++,C=`${y} (${f})${x}`;return C},a=u=>{const C=u.filter(p=>p.position).map(p=>p.position);for(let p=0;p<10;p++)for(let w=0;w<8;w++){const k=100+w*100,N=100+p*100;if(!C.some(v=>Math.abs(v.x-k)<80&&Math.abs(v.y-N)<80))return{x:k,y:N}}return{x:100,y:100}};return n(u=>{const m=y=>y.map(f=>{if(f.path===t&&f.type==="folder"){const C=f.children?.map(w=>w.name)||[],p=[...f.children||[]];for(const w of o.items){const k=c(w.name,C),N=t==="/"?`/${k}`:`${t}/${k}`,b={...w,id:`${w.type}-${Date.now()}-${Math.random()}`,name:k,path:N,position:t==="/Desktop"?a(p):void 0};if(b.type==="folder"&&b.children){const v=(j,S,T)=>j.map($=>({...$,id:`${$.type}-${Date.now()}-${Math.random()}`,path:$.path.replace(S,T),children:$.children?v($.children,S,T):void 0}));b.children=v(b.children,w.path,N)}p.push(b),C.push(k)}return i=!0,{...f,children:p}}return f.children&&t.startsWith(`${f.path}/`)?{...f,children:m(f.children)}:f}),l=m(u.fileSystem);let x=l;if(o.operation==="cut"&&i){const y=f=>f.filter(C=>o.items.some(w=>w.path===C.path)?!1:(C.children&&(C.children=y(C.children)),!0));x=y(l)}return{...u,fileSystem:x,clipboard:i&&o.operation==="cut"?{items:[],operation:null}:u.clipboard}}),i},updateFileContent:(t,r)=>{let o=!1;const i=c=>c.map(a=>a.path===t&&a.type==="file"?(o=!0,{...a,content:r}):a.children?{...a,children:i(a.children)}:a);return n(c=>({fileSystem:i(c.fileSystem)})),o},saveFileAs:(t,r,o)=>{const i=t.replace(/\/+$/,"")||"/",c=`${i}/${r}`;let a=!1;const u=x=>{switch(x.split(".").pop()?.toLowerCase()){case"txt":return"text";case"html":case"htm":return"html";case"md":case"markdown":return"markdown";case"js":case"jsx":return"javascript";case"css":return"css";case"json":return"json";default:return"text"}},m=x=>{const k=x.filter(N=>N.position).map(N=>N.position);for(let N=0;N<10;N++)for(let b=0;b<8;b++){const v=100+b*100,j=300+N*100;if(!k.some(T=>Math.abs(T.x-v)<80&&Math.abs(T.y-j)<80))return{x:v,y:j}}return{x:100,y:300}},l=(x,y)=>x.map(f=>{if(f.path===y&&f.type==="folder")if(f.children?.some(p=>p.name===r)){const p=f.children.map(w=>w.name===r?{...w,content:o}:w);return a=!0,{...f,children:p}}else{const p={id:`file-${Date.now()}-${Math.random()}`,name:r,type:"file",path:c,icon:u(r),content:o,position:y==="/Desktop"?m(f.children||[]):void 0};return a=!0,{...f,children:[...f.children||[],p]}}return f.children&&y.startsWith(`${f.path}/`)?{...f,children:l(f.children,y)}:f});return n(x=>({fileSystem:l(x.fileSystem,i)})),a},clearClipboard:()=>{n(t=>({...t,clipboard:{items:[],operation:null}}))},hasClipboardItems:()=>e().clipboard.items.length>0,updateSettings:t=>{const r=e(),o={...r.settings,...t,desktop:{...r.settings.desktop,...t.desktop},language:{...r.settings.language,...t.language},datetime:{...r.settings.datetime,...t.datetime}};n({settings:o}),t.desktop?.rgbTimer&&(o.desktop.rgbTimer.enabled?e().startRGBTimer():e().stopRGBTimer())},startRGBTimer:()=>{const{settings:t,rgbTimerInterval:r}=e();if(r&&clearInterval(r),!t.desktop.rgbTimer.enabled)return;let o=0;const i=setInterval(()=>{const{settings:c}=e(),a=c.desktop.rgbTimer.colors;if(a.length===0)return;const u=a[o%a.length];o++,n(m=>({settings:{...m.settings,desktop:{...m.settings.desktop,backgroundColor:u}}}))},t.desktop.rgbTimer.interval);n({rgbTimerInterval:i})},stopRGBTimer:()=>{const{rgbTimerInterval:t}=e();t&&(clearInterval(t),n({rgbTimerInterval:null}))},getBackgroundStyle:()=>{const{settings:t}=e(),{desktop:r}=t;if(r.gradient.enabled){const{type:o,angle:i,colors:c}=r.gradient,a=c.map(u=>`${u.color} ${u.position}%`).join(", ");return o==="linear"?`linear-gradient(${i}deg, ${a})`:`radial-gradient(circle, ${a})`}return r.backgroundColor}}),{name:"desktop-store",partialize:n=>({settings:n.settings,theme:n.theme})}))),Lt=(n,e,t,r)=>{const o=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(o,"warn","react-i18next::",!0);ee(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...o):console?.warn&&console.warn(...o)},ze={},ke=(n,e,t,r)=>{ee(t)&&ze[t]||(ee(t)&&(ze[t]=new Date),Lt(n,e,t,r))},Xe=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},we=(n,e,t)=>{n.loadNamespaces(e,Xe(n,t))},He=(n,e,t,r)=>{if(ee(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return we(n,t,r);t.forEach(o=>{n.options.ns.indexOf(o)<0&&n.options.ns.push(o)}),n.loadLanguages(e,Xe(n,r))},At=(n,e,t={})=>!e.languages||!e.languages.length?(ke(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,o)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,n))return!1}}),ee=n=>typeof n=="string",Pt=n=>typeof n=="object"&&n!==null,Ot=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Bt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},zt=n=>Bt[n],Ht=n=>n.replace(Ot,zt);let Se={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Ht};const Wt=(n={})=>{Se={...Se,...n}},Ut=()=>Se;let Qe;const Gt=n=>{Qe=n},Vt=()=>Qe,nr={type:"3rdParty",init(n){Wt(n.options.react),Gt(n)}},qt=d.createContext();class Kt{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Yt=(n,e)=>{const t=d.useRef();return d.useEffect(()=>{t.current=n},[n,e]),t.current},et=(n,e,t,r)=>n.getFixedT(e,t,r),Zt=(n,e,t,r)=>d.useCallback(et(n,e,t,r),[n,e,t,r]),Jt=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:o}=d.useContext(qt)||{},i=t||r||Vt();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new Kt),!i){ke(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const v=(S,T)=>ee(T)?T:Pt(T)&&ee(T.defaultValue)?T.defaultValue:Array.isArray(S)?S[S.length-1]:S,j=[v,{},!1];return j.t=v,j.i18n={},j.ready=!1,j}i.options.react?.wait&&ke(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...Ut(),...i.options.react,...e},{useSuspense:a,keyPrefix:u}=c;let m=o||i.options?.defaultNS;m=ee(m)?[m]:m||["translation"],i.reportNamespaces.addUsedNamespaces?.(m);const l=(i.isInitialized||i.initializedStoreOnce)&&m.every(v=>At(v,i,c)),x=Zt(i,e.lng||null,c.nsMode==="fallback"?m:m[0],u),y=()=>x,f=()=>et(i,e.lng||null,c.nsMode==="fallback"?m:m[0],u),[C,p]=d.useState(y);let w=m.join();e.lng&&(w=`${e.lng}${w}`);const k=Yt(w),N=d.useRef(!0);d.useEffect(()=>{const{bindI18n:v,bindI18nStore:j}=c;N.current=!0,!l&&!a&&(e.lng?He(i,e.lng,m,()=>{N.current&&p(f)}):we(i,m,()=>{N.current&&p(f)})),l&&k&&k!==w&&N.current&&p(f);const S=()=>{N.current&&p(f)};return v&&i?.on(v,S),j&&i?.store.on(j,S),()=>{N.current=!1,i&&v&&v?.split(" ").forEach(T=>i.off(T,S)),j&&i&&j.split(" ").forEach(T=>i.store.off(T,S))}},[i,w]),d.useEffect(()=>{N.current&&l&&p(y)},[i,u,l]);const b=[C,i,l];if(b.t=C,b.i18n=i,b.ready=l,l||!l&&!a)return b;throw new Promise(v=>{e.lng?He(i,e.lng,m,()=>v()):we(i,m,()=>v())})},ce=()=>{const{t:n,i18n:e}=Jt(),r=J().settings||{language:{language:"en"},datetime:{timezone:"UTC",dateFormat:"short",timeFormat:"short",hour12Format:!0}};return{t:n,changeLanguage:c=>{e.changeLanguage(c),localStorage.setItem("language",c)},formatDateTime:(c,a)=>{const u=a?.locale||r.language.language,m={dateStyle:a?.dateStyle||r.datetime.dateFormat,timeStyle:a?.timeStyle||r.datetime.timeFormat,hour12:a?.hour12??r.datetime.hour12Format,timeZone:r.datetime.timezone};return new Intl.DateTimeFormat(u,m).format(c)},currentLanguage:e.language}},Xt=d.createContext(void 0),Qt=()=>{const n=d.useContext(Xt);if(n===void 0)throw new Error("useContextMenu must be used within a ContextMenuProvider");return n},je=({isVisible:n,title:e,label:t,initialValue:r="",placeholder:o,onConfirm:i,onCancel:c,required:a=!0,maxLength:u=255,validate:m})=>{const[l,x]=d.useState(r),[y,f]=d.useState(null),C=d.useRef(null),p=d.useRef(null);d.useEffect(()=>{n&&(x(r),f(null))},[n,r]);const w=d.useCallback(S=>a&&!S.trim()?"This field is required":S.length>u?`Maximum length is ${u} characters`:m?m(S):null,[a,u,m]),k=d.useCallback(()=>{const S=w(l);if(S){f(S);return}i(l.trim())},[l,w,i]);d.useEffect(()=>{n&&C.current&&setTimeout(()=>{C.current?.focus(),C.current?.select()},100)},[n]),d.useEffect(()=>{if(!n)return;const S=T=>{T.key==="Escape"?(T.preventDefault(),c()):T.key==="Enter"&&(T.preventDefault(),k())};return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[n,l,k,c]),d.useEffect(()=>{if(!n)return;const S=T=>{p.current&&!p.current.contains(T.target)&&c()};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[n,c]);const N=d.useCallback(S=>{const T=S.target.value;x(T),y&&f(null)},[y]),b=d.useCallback(()=>{c()},[c]);if(!n)return null;const v=u-l.length,j=!w(l);return s.jsx("div",{className:"input-dialog-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title",children:s.jsxs("div",{ref:p,className:"input-dialog",children:[s.jsx("div",{className:"input-dialog-header",children:s.jsx("h2",{id:"dialog-title",className:"input-dialog-title",children:e})}),s.jsx("div",{className:"input-dialog-content",children:s.jsxs("div",{className:"input-dialog-field",children:[s.jsx("label",{htmlFor:"dialog-input",className:"input-dialog-label",children:t}),s.jsx("input",{ref:C,id:"dialog-input",type:"text",value:l,onChange:N,placeholder:o,maxLength:u,className:`input-dialog-input ${y?"error":""}`,"aria-describedby":y?"input-error":"input-hint","aria-invalid":!!y}),y&&s.jsx("div",{id:"input-error",className:"input-dialog-error",role:"alert",children:y}),s.jsxs("div",{id:"input-hint",className:"input-dialog-hint",children:[v," characters remaining"]})]})}),s.jsxs("div",{className:"input-dialog-actions",children:[s.jsx("button",{type:"button",onClick:b,className:"input-dialog-button input-dialog-button-secondary",children:"Cancel"}),s.jsx("button",{type:"button",onClick:k,disabled:!j,className:"input-dialog-button input-dialog-button-primary",children:"OK"})]})]})})};je.displayName="InputDialog";const tt=({isVisible:n,title:e,message:t,details:r,confirmText:o="OK",cancelText:i="Cancel",destructive:c=!1,icon:a,onConfirm:u,onCancel:m,items:l=[]})=>{const x=d.useRef(null),y=d.useRef(null);d.useEffect(()=>{n&&y.current&&setTimeout(()=>{y.current?.focus()},100)},[n]),d.useEffect(()=>{if(!n)return;const w=k=>{k.key==="Escape"?(k.preventDefault(),m()):k.key==="Enter"&&(k.preventDefault(),u())};return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[n,u,m]),d.useEffect(()=>{if(!n)return;const w=k=>{x.current&&!x.current.contains(k.target)&&m()};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[n,m]);const f=d.useCallback(()=>{u()},[u]),C=d.useCallback(()=>{m()},[m]);if(!n)return null;let p=a;return a===void 0&&(p=c?"⚠️":"ℹ️"),s.jsx("div",{className:"confirm-dialog-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title",children:s.jsxs("div",{ref:x,className:`confirm-dialog ${c?"destructive":""}`,children:[s.jsxs("div",{className:"confirm-dialog-header",children:[p&&s.jsx("div",{className:"confirm-dialog-icon","aria-hidden":"true",children:p}),s.jsx("h2",{id:"dialog-title",className:"confirm-dialog-title",children:e})]}),s.jsxs("div",{className:"confirm-dialog-content",children:[s.jsx("p",{className:"confirm-dialog-message",children:t}),r&&s.jsx("p",{className:"confirm-dialog-details",children:r}),l.length>0&&s.jsxs("div",{className:"confirm-dialog-items",children:[s.jsx("p",{className:"confirm-dialog-items-header",children:l.length===1?"Item to be affected:":`${l.length} items to be affected:`}),s.jsxs("ul",{className:"confirm-dialog-items-list",children:[l.slice(0,5).map((w,k)=>s.jsx("li",{className:"confirm-dialog-items-item",children:w},k)),l.length>5&&s.jsxs("li",{className:"confirm-dialog-items-more",children:["...and ",l.length-5," more items"]})]})]})]}),s.jsxs("div",{className:"confirm-dialog-actions",children:[s.jsx("button",{type:"button",onClick:C,className:"confirm-dialog-button confirm-dialog-button-secondary",children:i}),s.jsx("button",{ref:y,type:"button",onClick:f,className:`confirm-dialog-button ${c?"confirm-dialog-button-destructive":"confirm-dialog-button-primary"}`,children:o})]})]})})};tt.displayName="ConfirmDialog";const nt=({content:n,theme:e})=>{const t={fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, source-code-pro, monospace',fontSize:"14px",lineHeight:"1.5",whiteSpace:"pre-wrap",wordWrap:"break-word",padding:"16px",backgroundColor:e==="dark"?"#1e1e1e":"#ffffff",color:e==="dark"?"#f8f8f2":"#2f3337",border:e==="dark"?"1px solid #404040":"1px solid #e0e0e0",borderRadius:"4px",minHeight:"calc(100vh - 100px)",overflow:"auto"};return s.jsx("div",{style:t,children:n||"Empty file"})},st=({content:n,theme:e})=>{const t={width:"100%",height:"100%",backgroundColor:e==="dark"?"#1e1e1e":"#ffffff",border:e==="dark"?"1px solid #404040":"1px solid #e0e0e0",borderRadius:"4px",overflow:"hidden"},r={width:"100%",height:"100%",border:"none",backgroundColor:"#ffffff"},o=new Blob([n],{type:"text/html"}),i=URL.createObjectURL(o);return Je.useEffect(()=>()=>{URL.revokeObjectURL(i)},[i]),s.jsx("div",{style:t,children:s.jsx("iframe",{src:i,style:r,title:"HTML Content",sandbox:"allow-same-origin allow-scripts"})})},en=n=>{let e=n;return e=e.replace(/^### (.*$)/gm,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gm,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gm,"<h1>$1</h1>"),e=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*(.*?)\*/g,"<em>$1</em>"),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),e=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" style="max-width: 100%; height: auto;" />'),e=e.replace(/```([^`]+)```/g,'<pre style="background: #f4f4f4; padding: 12px; border-radius: 4px; overflow-x: auto;"><code>$1</code></pre>'),e=e.replace(/`([^`]+)`/g,'<code style="background: #f4f4f4; padding: 2px 4px; border-radius: 2px;">$1</code>'),e=e.replace(/\n\n/g,"</p><p>"),e=e.replace(/\n/g,"<br>"),e=`<p>${e}</p>`,e=e.replace(/^\* (.+)$/gm,"<li>$1</li>"),e=e.replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>"),e=e.replace(/^\d+\. (.+)$/gm,"<li>$1</li>"),e=e.replace(/^> (.+)$/gm,'<blockquote style="border-left: 4px solid #ccc; margin: 0; padding-left: 16px; color: #666;">$1</blockquote>'),e=e.replace(/^---$/gm,'<hr style="border: none; border-top: 1px solid #ccc; margin: 16px 0;" />'),e},rt=({content:n,theme:e})=>{const t={fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:"16px",lineHeight:"1.6",padding:"24px",backgroundColor:e==="dark"?"#1e1e1e":"#ffffff",color:e==="dark"?"#f8f8f2":"#2f3337",border:e==="dark"?"1px solid #404040":"1px solid #e0e0e0",borderRadius:"4px",minHeight:"calc(100vh - 100px)",overflow:"auto"},r=en(n);return s.jsx("div",{style:t,dangerouslySetInnerHTML:{__html:r}})},tn=n=>{if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return`${parseFloat((n/Math.pow(e,r)).toFixed(2))} ${t[r]}`},nn=n=>{switch(n){case"html":return"HTML";case"markdown":return"Markdown";case"text":return"Text";default:return n.toUpperCase()}},sn=({fileName:n,fileType:e,zoom:t,theme:r,onZoomIn:o,onZoomOut:i,onZoomReset:c,onThemeToggle:a,fileSize:u})=>{const m={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 16px",backgroundColor:r==="dark"?"#2d2d2d":"#f5f5f5",borderBottom:`1px solid ${r==="dark"?"#404040":"#e0e0e0"}`,fontSize:"12px",fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, source-code-pro, monospace',color:r==="dark"?"#cccccc":"#666666"},l={display:"flex",alignItems:"center",gap:"12px"},x={fontSize:"11px",fontFamily:"inherit",backgroundColor:"transparent",color:"inherit",border:"1px solid transparent",outline:"none",cursor:"pointer",padding:"4px 8px",borderRadius:"2px",transition:"all 0.1s ease"},y={...x,border:`1px solid ${r==="dark"?"#404040":"#e0e0e0"}`,minWidth:"40px",textAlign:"center"},f=(C,p)=>{p?C.currentTarget.style.backgroundColor=r==="dark"?"#404040":"#e0e0e0":C.currentTarget.style.backgroundColor="transparent"};return s.jsxs("div",{style:m,children:[s.jsxs("div",{style:l,children:[s.jsx("span",{children:n}),s.jsx("span",{children:"•"}),s.jsx("span",{children:nn(e)}),s.jsx("span",{children:"•"}),s.jsx("span",{children:tn(u)})]}),s.jsxs("div",{style:l,children:[s.jsx("span",{children:"Zoom:"}),s.jsx("button",{style:x,onClick:i,onMouseEnter:C=>f(C,!0),onMouseLeave:C=>f(C,!1),title:"Zoom Out",children:"-"}),s.jsxs("span",{style:y,children:[t,"%"]}),s.jsx("button",{style:x,onClick:o,onMouseEnter:C=>f(C,!0),onMouseLeave:C=>f(C,!1),title:"Zoom In",children:"+"}),s.jsx("button",{style:x,onClick:c,onMouseEnter:C=>f(C,!0),onMouseLeave:C=>f(C,!1),title:"Reset Zoom",children:"Reset"}),s.jsx("span",{children:"•"}),s.jsx("button",{style:x,onClick:a,onMouseEnter:C=>f(C,!0),onMouseLeave:C=>f(C,!1),title:"Toggle Theme",children:r==="dark"?"🌙":"☀️"})]})]})},rn=n=>{switch(n.split(".").pop()?.toLowerCase()){case"html":case"htm":return"html";case"md":case"markdown":return"markdown";case"txt":default:return"text"}},on=({className:n="",fileName:e="sample.txt",fileContent:t=`Welcome to the File Viewer!

This is a sample text file. In a real implementation, this content would be loaded from the actual file system.`,fileType:r})=>{const[o,i]=d.useState(100),[c,a]=d.useState("light"),u=r||rn(e),m=C=>{i(Math.max(25,Math.min(200,C)))},l=()=>{a(C=>C==="light"?"dark":"light")},x={display:"flex",flexDirection:"column",height:"100%",width:"100%",backgroundColor:c==="dark"?"#1e1e1e":"#ffffff",color:c==="dark"?"#f8f8f2":"#2f3337"},y={flex:1,overflow:"auto",padding:"16px",transform:`scale(${o/100})`,transformOrigin:"top left",width:`${100/(o/100)}%`,height:`${100/(o/100)}%`},f=()=>{switch(u){case"html":return s.jsx(st,{content:t,theme:c});case"markdown":return s.jsx(rt,{content:t,theme:c});case"text":default:return s.jsx(nt,{content:t,theme:c})}};return s.jsxs("div",{className:`file-viewer ${n}`,style:x,children:[s.jsx(sn,{fileName:e,fileType:u,zoom:o,theme:c,onZoomIn:()=>m(o+25),onZoomOut:()=>m(o-25),onZoomReset:()=>m(100),onThemeToggle:l,fileSize:t.length}),s.jsx("div",{style:y,children:f()})]})},an=({filePath:n})=>{const{fileSystem:e}=J(),[t,r]=d.useState("sample.txt"),[o,i]=d.useState(`Welcome to File Viewer!

Select a file to view its contents.`),[c,a]=d.useState("text");return d.useEffect(()=>{if(n){const u=(l,x)=>{for(const y of l){if(y.path===x&&y.type==="file")return y;if(y.children){const f=u(y.children,x);if(f)return f}}return null},m=u(e,n);if(m)switch(r(m.name),i(m.content||"Empty file"),m.name.split(".").pop()?.toLowerCase()){case"html":case"htm":a("html");break;case"md":case"markdown":a("markdown");break;case"txt":default:a("text");break}}},[n,e]),s.jsx("div",{style:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:s.jsx(on,{fileName:t,fileContent:o,fileType:c})})},sr=Object.freeze(Object.defineProperty({__proto__:null,FileViewerApp:an},Symbol.toStringTag,{value:"Module"})),ln=({isOpen:n,onClose:e,onFileSelect:t,currentPath:r="/Desktop"})=>{const{fileSystem:o}=J(),[i,c]=d.useState(r),[a,u]=d.useState([]),[m,l]=d.useState(null),x=["txt","html","htm","md","markdown","js","jsx","ts","tsx","css","scss","sass","json","xml"],y=F=>{const E=F.split(".").pop()?.toLowerCase();return E?x.includes(E):!1},f=d.useCallback(F=>{const E=(O,z)=>{for(const V of O){if(V.path===z&&V.type==="folder")return V;if(V.children){const g=E(V.children,z);if(g)return g}}return null};return E(o,F)?.children||[]},[o]),C=F=>{if(F==="/"||F==="/Desktop")return null;const E=F.split("/");return E.pop(),E.join("/")||"/"},p=F=>{c(F),l(null)},w=F=>{F.type==="folder"?p(F.path):y(F.name)&&l(F.path)},k=()=>{if(!m)return;const F=(M,O)=>{for(const z of M){if(z.path===O&&z.type==="file")return z;if(z.children){const V=F(z.children,O);if(V)return V}}return null},E=F(o,m);E&&(t(E.path,E.name,E.content||""),e())};if(d.useEffect(()=>{u(f(i))},[i,o,f]),d.useEffect(()=>{c(r)},[r]),!n)return null;const N={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},b={backgroundColor:"#ffffff",borderRadius:"8px",padding:"24px",width:"500px",maxHeight:"600px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)"},v={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",borderBottom:"1px solid #e0e0e0",paddingBottom:"12px"},j={backgroundColor:"#f5f5f5",padding:"8px 12px",borderRadius:"4px",marginBottom:"12px",fontSize:"14px",fontFamily:"monospace",border:"1px solid #ddd"},S={flex:1,overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",maxHeight:"300px"},T={padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",gap:"8px"},$={...T,backgroundColor:"#e3f2fd"},h={display:"flex",gap:"12px",marginTop:"16px",justifyContent:"flex-end"},_={padding:"8px 16px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"14px"},R={..._,backgroundColor:"#0078d4",color:"white"},L={..._,backgroundColor:"#f5f5f5",color:"#333",border:"1px solid #ddd"},B=C(i);return s.jsx("div",{style:N,onClick:e,children:s.jsxs("div",{style:b,onClick:F=>F.stopPropagation(),children:[s.jsxs("div",{style:v,children:[s.jsx("h3",{style:{margin:0},children:"Abrir Arquivo"}),s.jsx("button",{onClick:e,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"×"})]}),s.jsxs("div",{style:j,children:["📁 ",i]}),s.jsxs("div",{style:S,children:[B&&s.jsxs("div",{style:T,onClick:()=>p(B),children:[s.jsx("span",{children:"📁"}),s.jsx("span",{children:".."})]}),a.map(F=>{const E=m===F.path,M=F.type==="file"?y(F.name):!0,O=E?$:T;return s.jsxs("div",{style:{...O,opacity:M?1:.5,cursor:M?"pointer":"not-allowed"},onClick:()=>M&&w(F),children:[s.jsx("span",{children:F.type==="folder"?"📁":F.name.endsWith(".txt")?"📄":F.name.endsWith(".html")||F.name.endsWith(".htm")?"🌐":F.name.endsWith(".md")?"ℹ️":F.name.endsWith(".js")||F.name.endsWith(".jsx")?"📜":F.name.endsWith(".css")?"🎨":F.name.endsWith(".json")?"🔧":"📄"}),s.jsx("span",{children:F.name}),F.type==="file"&&!y(F.name)&&s.jsx("span",{style:{fontSize:"12px",color:"#999",marginLeft:"auto"},children:"(não editável)"})]},F.id)})]}),s.jsxs("div",{style:h,children:[s.jsx("button",{style:L,onClick:e,children:"Cancelar"}),s.jsx("button",{style:R,onClick:k,disabled:!m,children:"Abrir"})]})]})})},cn=({isOpen:n,onClose:e,onSave:t,currentFileName:r="untitled.txt",currentPath:o="/Desktop"})=>{const{fileSystem:i}=J(),[c,a]=d.useState(o),[u,m]=d.useState([]),[l,x]=d.useState(r),[y,f]=d.useState(""),C=D=>D.trim()?/[<>:"/\\|?*]/.test(D)?'Nome contém caracteres inválidos: < > : " / \\ | ? *':u.find(q=>q.type==="file"&&q.name.toLowerCase()===D.toLowerCase())?"Arquivo já existe nesta pasta":"":"Nome do arquivo é obrigatório",p=d.useCallback(D=>{const P=(q,W)=>{for(const K of q){if(K.path===W&&K.type==="folder")return K;if(K.children){const U=P(K.children,W);if(U)return U}}return null};return P(i,D)?.children||[]},[i]),w=D=>{if(D==="/"||D==="/Desktop")return null;const P=D.split("/");return P.pop(),P.join("/")||"/"},k=D=>{a(D),f("")},N=D=>{D.type==="folder"&&k(D.path)},b=()=>{const D=C(l);if(D){f(D);return}t(c,l),e()},v=D=>{const P=D.target.value;x(P),y&&f("")},j=D=>D.includes(".")?D:`${D}.txt`;if(d.useEffect(()=>{m(p(c))},[c,i,p]),d.useEffect(()=>{a(o)},[o]),d.useEffect(()=>{x(r)},[r]),!n)return null;const S={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},T={backgroundColor:"#ffffff",borderRadius:"8px",padding:"24px",width:"500px",maxHeight:"600px",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)"},$={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",borderBottom:"1px solid #e0e0e0",paddingBottom:"12px"},h={backgroundColor:"#f5f5f5",padding:"8px 12px",borderRadius:"4px",marginBottom:"12px",fontSize:"14px",fontFamily:"monospace",border:"1px solid #ddd"},_={flex:1,overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",maxHeight:"200px",marginBottom:"16px"},R={padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",gap:"8px"},L={marginBottom:"12px"},B={display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"bold"},F={width:"100%",padding:"8px 12px",border:y?"1px solid #dc3545":"1px solid #ddd",borderRadius:"4px",fontSize:"14px"},E={color:"#dc3545",fontSize:"12px",marginTop:"4px"},M={display:"flex",gap:"12px",marginTop:"16px",justifyContent:"flex-end"},O={padding:"8px 16px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"14px"},z={...O,backgroundColor:"#0078d4",color:"white"},V={...O,backgroundColor:"#f5f5f5",color:"#333",border:"1px solid #ddd"},g=w(c),I=u.filter(D=>D.type==="folder");return s.jsx("div",{style:S,onClick:e,children:s.jsxs("div",{style:T,onClick:D=>D.stopPropagation(),children:[s.jsxs("div",{style:$,children:[s.jsx("h3",{style:{margin:0},children:"Salvar Como"}),s.jsx("button",{onClick:e,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"×"})]}),s.jsxs("div",{style:h,children:["📁 ",c]}),s.jsxs("div",{style:_,children:[g&&s.jsxs("div",{style:R,onClick:()=>k(g),children:[s.jsx("span",{children:"📁"}),s.jsx("span",{children:".."})]}),I.map(D=>s.jsxs("div",{style:R,onClick:()=>N(D),children:[s.jsx("span",{children:"📁"}),s.jsx("span",{children:D.name})]},D.id)),I.length===0&&!g&&s.jsxs("div",{style:{...R,cursor:"default",opacity:.7},children:[s.jsx("span",{children:"📂"}),s.jsx("span",{children:"Nenhuma subpasta encontrada"})]})]}),s.jsxs("div",{style:L,children:[s.jsx("label",{style:B,htmlFor:"fileName",children:"Nome do arquivo:"}),s.jsx("input",{id:"fileName",type:"text",value:l,onChange:v,style:F,placeholder:"Digite o nome do arquivo...",onBlur:()=>{l&&!l.includes(".")&&x(`${l}.txt`)}}),y&&s.jsx("div",{style:E,children:y})]}),s.jsxs("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:["Arquivo será salvo como: ",c,"/",j(l)]}),s.jsxs("div",{style:M,children:[s.jsx("button",{style:V,onClick:e,children:"Cancelar"}),s.jsx("button",{style:z,onClick:b,disabled:!l.trim()||!!y,children:"Salvar"})]})]})})},un=n=>{switch(n.split(".").pop()?.toLowerCase()){case"html":case"htm":return"html";case"md":case"markdown":return"markdown";case"txt":default:return"text"}},We=({filePath:n})=>{const{fileSystem:e,updateFileContent:t,saveFileAs:r}=J(),[o,i]=d.useState("untitled.txt"),[c,a]=d.useState(`Welcome to TextEditor!

Create a new file or open an existing one to start editing.`),[u,m]=d.useState(n||null),[l,x]=d.useState(!1),[y,f]=d.useState(!1),[C,p]=d.useState("light"),[w,k]=d.useState(!1),[N,b]=d.useState(!1),v=d.useRef(null),j=d.useRef(!1);d.useEffect(()=>{if(n&&!j.current){const K=(te,ue)=>{for(const se of te){if(se.path===ue&&se.type==="file")return se;if(se.children){const Fe=K(se.children,ue);if(Fe)return Fe}}return null},U=K(e,n);U&&(i(U.name),a(U.content||""),m(n)),j.current=!0}},[n,e]);const S=d.useCallback(()=>{i("untitled.txt"),a(""),f(!1),x(!1)},[]),T=d.useCallback(()=>{u&&y?(t(u,c),f(!1)):u||b(!0)},[u,c,y,t]),$=d.useCallback(()=>{k(!0)},[]),h=d.useCallback(()=>{b(!0)},[]),_=d.useCallback((K,U,te)=>{i(U),a(te),m(K),f(!1),x(!1)},[]),R=d.useCallback((K,U)=>{if(r(K,U,c)){const ue=`${K}/${U}`;i(U),m(ue),f(!1)}},[r,c]),L=d.useCallback(()=>{if(u){const K=u.split("/");return K.pop(),K.join("/")||"/Desktop"}return"/Desktop"},[u]),B=d.useCallback(K=>{const U=K.target.value;a(U),f(!0)},[]),F=d.useCallback(()=>{x(!l)},[l]),E=d.useCallback(()=>{p(K=>K==="light"?"dark":"light")},[]);d.useEffect(()=>{const K=U=>{if(U.ctrlKey||U.metaKey)switch(U.key.toLowerCase()){case"n":U.preventDefault(),S();break;case"o":U.preventDefault(),$();break;case"s":U.preventDefault(),U.shiftKey?h():T();break}};return document.addEventListener("keydown",K),()=>{document.removeEventListener("keydown",K)}},[S,$,T,h]);const M=un(o),O={text:"Plain Text",html:"HTML",markdown:"Markdown"}[M],z={height:"100%",width:"100%",display:"flex",flexDirection:"column",backgroundColor:C==="dark"?"#1e1e1e":"#f5f5f5",color:C==="dark"?"#f8f8f2":"#2f3337"},V={display:"flex",alignItems:"center",padding:"8px 16px",backgroundColor:C==="dark"?"#2d2d30":"#ffffff",borderBottom:`1px solid ${C==="dark"?"#404040":"#e0e0e0"}`,gap:"12px",minHeight:"40px"},g={padding:"6px 12px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px"},I={...g,backgroundColor:C==="dark"?"#404040":"#6c757d"},D={fontSize:"14px",color:C==="dark"?"#cccccc":"#666",display:"flex",alignItems:"center",gap:"8px"},P={flex:1,display:"flex",overflow:"hidden"},H={flex:1,border:"none",outline:"none",padding:"16px",fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, source-code-pro, monospace',fontSize:"14px",lineHeight:"1.5",backgroundColor:C==="dark"?"#1e1e1e":"#ffffff",color:C==="dark"?"#f8f8f2":"#2f3337",resize:"none"},q={flex:1,overflow:"auto",padding:"16px",backgroundColor:C==="dark"?"#1e1e1e":"#ffffff",borderLeft:`1px solid ${C==="dark"?"#404040":"#e0e0e0"}`},W=()=>{if(l)return s.jsx("textarea",{ref:v,style:H,value:c,onChange:B,placeholder:"Start typing your content here...",spellCheck:!1});switch(M){case"html":return s.jsx("div",{style:q,children:s.jsx(st,{content:c,theme:C})});case"markdown":return s.jsx("div",{style:q,children:s.jsx(rt,{content:c,theme:C})});case"text":default:return s.jsx("div",{style:q,children:s.jsx(nt,{content:c,theme:C})})}};return s.jsxs("div",{style:z,children:[s.jsxs("div",{style:V,children:[s.jsx("button",{style:g,onClick:S,title:"Create new file (Ctrl+N)",children:"📄 New"}),s.jsx("button",{style:g,onClick:$,title:"Open file (Ctrl+O)",children:"📁 Open"}),s.jsx("button",{style:g,onClick:T,disabled:!y&&!!u,title:"Save file (Ctrl+S)",children:"💾 Save"}),s.jsx("button",{style:I,onClick:h,title:"Save As (Ctrl+Shift+S)",children:"💾 Save As"}),s.jsx("div",{style:{width:"1px",height:"24px",backgroundColor:"#ddd",margin:"0 8px"}}),s.jsx("button",{style:I,onClick:F,title:l?"Switch to preview":"Switch to edit mode",children:l?"👁️ Preview":"✏️ Edit"}),s.jsx("button",{style:I,onClick:E,title:"Toggle theme",children:C==="light"?"🌙":"☀️"}),s.jsxs("div",{style:D,children:[s.jsxs("span",{children:["📄 ",o]}),s.jsx("span",{children:"•"}),s.jsx("span",{children:O}),y&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"•"}),s.jsx("span",{style:{color:"#d73a49"},children:"Modified"})]}),u&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"•"}),s.jsx("span",{style:{fontSize:"12px",opacity:.7},children:L()})]})]})]}),s.jsx("div",{style:P,children:W()}),s.jsx(ln,{isOpen:w,onClose:()=>k(!1),onFileSelect:_,currentPath:L()}),s.jsx(cn,{isOpen:N,onClose:()=>b(!1),onSave:R,currentFileName:o,currentPath:L()})]})},rr=Object.freeze(Object.defineProperty({__proto__:null,TextEditorApp:We,default:We},Symbol.toStringTag,{value:"Module"})),dn=()=>{const{fileSystem:n,createFile:e,createFolder:t,removeFileSystemItem:r,renameFileSystemItem:o,copyToClipboard:i,cutToClipboard:c,pasteFromClipboard:a,clipboard:u}=J(),{showContextMenu:m}=Qt(),[l,x]=d.useState({currentPath:"/Desktop",selectedItems:[],viewMode:"grid",sortBy:"name",sortOrder:"asc",searchQuery:"",isRenaming:null,showNewFolderDialog:!1,showNewFileDialog:!1,showDeleteDialog:!1,navigationHistory:["/Desktop"],historyIndex:0,showSidebar:!0,expandedFolders:new Set(["/Desktop"])}),y=d.useMemo(()=>{const h=(_,R)=>{for(const L of _){if(L.path===R&&L.type==="folder")return L;if(L.children&&R.startsWith(`${L.path}/`)){const B=h(L.children,R);if(B)return B}}return null};return h(n,l.currentPath)},[n,l.currentPath]),f=d.useMemo(()=>{if(!y?.children)return[];let h=[...y.children];if(l.searchQuery){const _=l.searchQuery.toLowerCase();h=h.filter(R=>R.name.toLowerCase().includes(_))}return h.sort((_,R)=>{let L=0;switch(l.sortBy){case"name":L=_.name.localeCompare(R.name);break;case"type":{if(_.type!==R.type)L=_.type==="folder"?-1:1;else{const B=_.name.includes(".")&&_.name.split(".").pop()||"",F=R.name.includes(".")&&R.name.split(".").pop()||"";L=B.localeCompare(F)}break}case"size":{const B=_.type==="folder"?0:_.content?.length||0,F=R.type==="folder"?0:R.content?.length||0;L=B-F;break}case"date":L=_.name.localeCompare(R.name);break;default:L=_.name.localeCompare(R.name);break}return l.sortOrder==="asc"?L:-L}),h},[y,l.searchQuery,l.sortBy,l.sortOrder]),C=d.useCallback(h=>{x(_=>{const R=_.navigationHistory.slice(0,_.historyIndex+1);return R.push(h),{..._,currentPath:h,selectedItems:[],navigationHistory:R,historyIndex:R.length-1}})},[]),p=d.useCallback(()=>{x(h=>{if(h.historyIndex>0){const _=h.historyIndex-1;return{...h,currentPath:h.navigationHistory[_],selectedItems:[],historyIndex:_}}return h})},[]),w=d.useCallback(()=>{x(h=>{if(h.historyIndex<h.navigationHistory.length-1){const _=h.historyIndex+1;return{...h,currentPath:h.navigationHistory[_],selectedItems:[],historyIndex:_}}return h})},[]),k=d.useCallback(()=>{const h=l.currentPath.split("/").slice(0,-1).join("/")||"/";h!==l.currentPath&&C(h)},[l.currentPath,C]),N=d.useCallback((h,_=!1)=>{x(R=>{if(_){const L=R.selectedItems.includes(h);return{...R,selectedItems:L?R.selectedItems.filter(B=>B!==h):[...R.selectedItems,h]}}return{...R,selectedItems:[h]}})},[]),b=d.useCallback(h=>{if(h.type==="folder"){C(h.path);return}},[C]),v=d.useCallback((h,_)=>{switch(h){case"new-folder":x(R=>({...R,showNewFolderDialog:!0}));break;case"new-file":x(R=>({...R,showNewFileDialog:!0}));break;case"delete":l.selectedItems.length>0&&x(R=>({...R,showDeleteDialog:!0}));break;case"copy":if(l.selectedItems.length>0){const R=l.selectedItems.map(L=>f.find(B=>B.id===L)?.path).filter(Boolean);i(R)}break;case"cut":if(l.selectedItems.length>0){const R=l.selectedItems.map(L=>f.find(B=>B.id===L)?.path).filter(Boolean);c(R)}break;case"paste":a(l.currentPath);break;case"rename":l.selectedItems.length===1&&x(R=>({...R,isRenaming:l.selectedItems[0]}));break}},[l.selectedItems,l.currentPath,f,i,c,a]),j=d.useMemo(()=>{const h=l.currentPath.split("/").filter(Boolean),_=[{name:"Computer",path:"/"}];let R="";for(const L of h)R+=`/${L}`,_.push({name:L,path:R});return _},[l.currentPath]),S=d.useCallback(h=>{x(_=>{const R=new Set(_.expandedFolders);return R.has(h)?R.delete(h):R.add(h),{..._,expandedFolders:R}})},[]),T=d.useMemo(()=>{const h=(_,R=0)=>{const L=[],B=_.filter(F=>F.type==="folder").sort((F,E)=>F.name.localeCompare(E.name));for(const F of B){const E=(F.children||[]).some(M=>M.type==="folder");L.push({item:F,level:R,hasChildren:E}),l.expandedFolders.has(F.path)&&F.children&&L.push(...h(F.children,R+1))}return L};return h(n)},[n,l.expandedFolders]),$=d.useCallback(()=>{x(h=>({...h,showSidebar:!h.showSidebar}))},[]);return d.useEffect(()=>{const h=_=>{if(_.ctrlKey)switch(_.key){case"c":_.preventDefault(),v("copy");break;case"x":_.preventDefault(),v("cut");break;case"v":_.preventDefault(),v("paste");break;case"a":_.preventDefault(),x(R=>({...R,selectedItems:f.map(L=>L.id)}));break}else switch(_.key){case"Delete":v("delete");break;case"F2":v("rename");break;case"Backspace":k();break}};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[v,k,f]),s.jsxs("div",{className:"file-explorer",children:[s.jsxs("div",{className:"file-explorer-toolbar",children:[s.jsxs("div",{className:"toolbar-section",children:[s.jsx("button",{className:"toolbar-button",onClick:p,disabled:l.historyIndex===0,title:"Back",children:"◀"}),s.jsx("button",{className:"toolbar-button",onClick:w,disabled:l.historyIndex===l.navigationHistory.length-1,title:"Forward",children:"▶"}),s.jsx("button",{className:"toolbar-button",onClick:k,disabled:l.currentPath==="/"||l.currentPath==="",title:"Up",children:"⬆"}),s.jsx("button",{className:`toolbar-button ${l.showSidebar?"active":""}`,onClick:$,title:"Toggle Sidebar",children:"📁 Sidebar"})]}),s.jsxs("div",{className:"toolbar-section",children:[s.jsx("button",{className:"toolbar-button",onClick:()=>v("new-folder"),title:"New Folder",children:"📁+ New Folder"}),s.jsx("button",{className:"toolbar-button",onClick:()=>v("new-file"),title:"New File",children:"📄+ New File"})]}),s.jsxs("div",{className:"toolbar-section",children:[s.jsx("button",{className:"toolbar-button",onClick:()=>v("copy"),disabled:l.selectedItems.length===0,title:"Copy (Ctrl+C)",children:"📋 Copy"}),s.jsx("button",{className:"toolbar-button",onClick:()=>v("cut"),disabled:l.selectedItems.length===0,title:"Cut (Ctrl+X)",children:"✂ Cut"}),s.jsx("button",{className:"toolbar-button",onClick:()=>v("paste"),disabled:!u.items.length,title:"Paste (Ctrl+V)",children:"📋 Paste"}),s.jsx("button",{className:"toolbar-button",onClick:()=>v("delete"),disabled:l.selectedItems.length===0,title:"Delete (Del)",children:"🗑 Delete"})]}),s.jsxs("div",{className:"toolbar-section",children:[s.jsx("button",{className:`toolbar-button ${l.viewMode==="grid"?"active":""}`,onClick:()=>x(h=>({...h,viewMode:"grid"})),title:"Grid View",children:"⊞"}),s.jsx("button",{className:`toolbar-button ${l.viewMode==="list"?"active":""}`,onClick:()=>x(h=>({...h,viewMode:"list"})),title:"List View",children:"≡"}),s.jsx("button",{className:`toolbar-button ${l.viewMode==="details"?"active":""}`,onClick:()=>x(h=>({...h,viewMode:"details"})),title:"Details View",children:"☰"})]})]}),s.jsxs("div",{className:"file-explorer-address-bar",children:[s.jsx("div",{className:"address-breadcrumbs",children:j.map((h,_)=>s.jsxs(Je.Fragment,{children:[s.jsx("button",{className:"breadcrumb-item",onClick:()=>C(h.path),children:h.name}),_<j.length-1&&s.jsx("span",{className:"breadcrumb-separator",children:"▶"})]},h.path))}),s.jsx("div",{className:"search-section",children:s.jsx("input",{type:"text",className:"search-input",placeholder:"Search files...",value:l.searchQuery,onChange:h=>x(_=>({..._,searchQuery:h.target.value}))})})]}),s.jsxs("div",{className:"file-explorer-main",children:[l.showSidebar&&s.jsxs("div",{className:"file-explorer-sidebar",children:[s.jsx("div",{className:"sidebar-header",children:s.jsx("span",{className:"sidebar-title",children:"Folders"})}),s.jsx("div",{className:"folder-tree",children:T.map(({item:h,level:_,hasChildren:R})=>s.jsx("div",{className:`tree-item ${l.currentPath===h.path?"active":""}`,style:{paddingLeft:`${_*16+8}px`},onClick:()=>C(h.path),children:s.jsxs("div",{className:"tree-item-content",children:[R&&s.jsx("button",{className:"tree-expand-button",onClick:L=>{L.stopPropagation(),S(h.path)},children:l.expandedFolders.has(h.path)?"▼":"▶"}),!R&&s.jsx("span",{className:"tree-spacer"}),s.jsx("span",{className:"tree-icon",children:"📁"}),s.jsx("span",{className:"tree-label",children:h.name})]})},h.id))})]}),s.jsx("div",{className:"file-explorer-content",children:s.jsx("div",{className:`file-display file-display--${l.viewMode}`,children:f.length===0?s.jsx("div",{className:"empty-folder",children:s.jsx("p",{children:"This folder is empty"})}):f.map(h=>s.jsxs("div",{className:`file-item ${l.selectedItems.includes(h.id)?"selected":""} ${l.isRenaming===h.id?"renaming":""}`,onClick:_=>N(h.id,_.ctrlKey),onDoubleClick:()=>b(h),onContextMenu:_=>{_.preventDefault(),N(h.id),m({x:_.clientX,y:_.clientY},[{id:"open",label:"Open",onClick:()=>b(h)},{id:"separator1",label:"",separator:!0},{id:"rename",label:"Rename",onClick:()=>v("rename")},{id:"delete",label:"Delete",onClick:()=>v("delete")},{id:"separator2",label:"",separator:!0},{id:"copy",label:"Copy",onClick:()=>v("copy")},{id:"cut",label:"Cut",onClick:()=>v("cut")}])},children:[s.jsx("div",{className:"file-icon",children:h.type==="folder"?"📁":mn(h.name)}),s.jsx("div",{className:"file-name",children:l.isRenaming===h.id?s.jsx("input",{type:"text",className:"rename-input",defaultValue:h.name,onBlur:_=>{const R=_.target.value.trim();R&&R!==h.name&&o(h.path,R),x(L=>({...L,isRenaming:null}))},onKeyDown:_=>{_.key==="Enter"?_.currentTarget.blur():_.key==="Escape"&&x(R=>({...R,isRenaming:null}))},autoFocus:!0,onClick:_=>_.stopPropagation()}):h.name}),l.viewMode==="details"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"file-type",children:h.type}),s.jsx("div",{className:"file-size",children:h.type==="folder"?"":pn(h.content?.length||0)})]})]},h.id))})})]}),s.jsx("div",{className:"file-explorer-status-bar",children:s.jsxs("span",{children:[f.length," item",f.length!==1?"s":"",l.selectedItems.length>0&&s.jsxs(s.Fragment,{children:[", ",l.selectedItems.length," selected"]})]})}),s.jsx(je,{isVisible:l.showNewFolderDialog,title:"Create New Folder",label:"Folder name:",placeholder:"New folder",onConfirm:h=>{t(l.currentPath,h),x(_=>({..._,showNewFolderDialog:!1}))},onCancel:()=>x(h=>({...h,showNewFolderDialog:!1})),validate:h=>h.trim()?f.some(_=>_.name===h.trim())?"A folder with this name already exists":null:"Folder name is required"}),s.jsx(je,{isVisible:l.showNewFileDialog,title:"Create New File",label:"File name:",placeholder:"New file.txt",onConfirm:h=>{e(l.currentPath,h,""),x(_=>({..._,showNewFileDialog:!1}))},onCancel:()=>x(h=>({...h,showNewFileDialog:!1})),validate:h=>h.trim()?f.some(_=>_.name===h.trim())?"A file with this name already exists":null:"File name is required"}),s.jsx(tt,{isVisible:l.showDeleteDialog,title:"Delete Items",message:`Are you sure you want to delete ${l.selectedItems.length} item${l.selectedItems.length!==1?"s":""}?`,onConfirm:()=>{l.selectedItems.forEach(h=>{const _=f.find(R=>R.id===h);_&&r(_.path)}),x(h=>({...h,showDeleteDialog:!1,selectedItems:[]}))},onCancel:()=>x(h=>({...h,showDeleteDialog:!1}))})]})};function mn(n){switch(n.split(".").pop()?.toLowerCase()){case"txt":case"md":return"📄";case"doc":case"docx":return"📘";case"xls":case"xlsx":return"📗";case"ppt":case"pptx":return"📙";case"zip":case"rar":case"7z":return"📦";case"jpg":case"jpeg":case"png":case"gif":case"bmp":return"🖼";case"mp3":case"wav":case"flac":return"🎵";case"mp4":case"avi":case"mkv":case"mov":return"🎬";case"js":case"ts":case"jsx":case"tsx":return"⚡";case"html":case"css":return"🌐";case"py":return"🐍";case"java":return"☕";case"cpp":case"c":return"🔧";default:return"📋"}}function pn(n){if(n===0)return"0 B";const e=["B","KB","MB","GB"],t=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,t)).toFixed(1)} ${e[t]}`}const or=Object.freeze(Object.defineProperty({__proto__:null,FileExplorerApp:dn},Symbol.toStringTag,{value:"Module"})),ge={background:"#282c34",foreground:"#abb2bf",prompt:"#98c379",success:"#98c379",error:"#e06c75",warning:"#e5c07b",directory:"#61afef",file:"#abb2bf",executable:"#c678dd",comment:"#5c6370",selection:"#3e4451",cursor:"#528bff"},Ue={background:"#0c0c0c",foreground:"#cccccc",prompt:"#ffffff",success:"#00ff00",error:"#ff0000",warning:"#ffff00",directory:"#00ffff",file:"#cccccc",executable:"#ff00ff",comment:"#808080",selection:"#264f78",cursor:"#ffffff"};class X{static ANSI_COLORS={reset:"\x1B[0m",bold:"\x1B[1m",dim:"\x1B[2m",italic:"\x1B[3m",underline:"\x1B[4m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",bgBlack:"\x1B[40m",bgRed:"\x1B[41m",bgGreen:"\x1B[42m",bgYellow:"\x1B[43m",bgBlue:"\x1B[44m",bgMagenta:"\x1B[45m",bgCyan:"\x1B[46m",bgWhite:"\x1B[47m"};static ansiToHtml(e){const t={"\x1B[0m":"</span>","\x1B[1m":'<span style="font-weight: bold;">',"\x1B[2m":'<span style="opacity: 0.5;">',"\x1B[3m":'<span style="font-style: italic;">',"\x1B[4m":'<span style="text-decoration: underline;">',"\x1B[30m":'<span style="color: #000000;">',"\x1B[31m":'<span style="color: #e06c75;">',"\x1B[32m":'<span style="color: #98c379;">',"\x1B[33m":'<span style="color: #e5c07b;">',"\x1B[34m":'<span style="color: #61afef;">',"\x1B[35m":'<span style="color: #c678dd;">',"\x1B[36m":'<span style="color: #56b6c2;">',"\x1B[37m":'<span style="color: #abb2bf;">',"\x1B[40m":'<span style="background-color: #000000;">',"\x1B[41m":'<span style="background-color: #e06c75;">',"\x1B[42m":'<span style="background-color: #98c379;">',"\x1B[43m":'<span style="background-color: #e5c07b;">',"\x1B[44m":'<span style="background-color: #61afef;">',"\x1B[45m":'<span style="background-color: #c678dd;">',"\x1B[46m":'<span style="background-color: #56b6c2;">',"\x1B[47m":'<span style="background-color: #abb2bf;">'};let r=e;return Object.entries(t).forEach(([o,i])=>{r=r.replace(new RegExp(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i)}),r}static colorize(e,t){return`${{success:this.ANSI_COLORS.green,error:this.ANSI_COLORS.red,warning:this.ANSI_COLORS.yellow,info:this.ANSI_COLORS.cyan,directory:this.ANSI_COLORS.blue,file:this.ANSI_COLORS.white,executable:this.ANSI_COLORS.magenta}[t]}${e}${this.ANSI_COLORS.reset}`}static formatFileList(e){return e.map(t=>t.isDirectory?this.colorize(`${t.name}/`,"directory"):t.isExecutable?this.colorize(t.name,"executable"):this.colorize(t.name,"file")).join("  ")}}class fn{static highlight(e,t){const r=e.split(" ");if(r.length===0)return e;const o=r[0];let c=t?.hasCommand(o)||!1?`<span style="color: #98c379; font-weight: bold;">${o}</span>`:`<span style="color: #e06c75;">${o}</span>`;if(r.length>1){const a=r.slice(1).join(" ");c+=` <span style="color: #abb2bf;">${a}</span>`}return c}static isValidCommand(e,t){return t?.hasCommand(e)||!1}}class _e{pool=[];maxSize;createFn;resetFn;constructor(e,t,r=100){this.createFn=e,this.resetFn=t,this.maxSize=r}acquire(){return this.pool.length>0?this.pool.pop():this.createFn()}release(e){this.pool.length<this.maxSize&&(this.resetFn(e),this.pool.push(e))}getStats(){return{poolSize:this.pool.length,maxSize:this.maxSize}}clear(){this.pool.length=0}}const hn=()=>({id:`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,content:"",type:"output",timestamp:new Date,className:""}),gn=n=>{n.id=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n.content="",n.type="output",n.timestamp=new Date,n.className=""},ne=new _e(hn,gn,200),Q=new Map,Y={get(n,e){if(Q.has(n))return Q.get(n);const t=e();if(Q.size>=500){const r=Array.from(Q.entries()),o=Math.floor(r.length*.5);Q.clear(),r.slice(-o).forEach(([i,c])=>Q.set(i,c))}return Q.set(n,t),t},clear(){Q.clear()},getStats(){return{cacheSize:Q.size,maxSize:500}}},yn=()=>({type:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,preventDefault:()=>{},stopPropagation:()=>{}}),xn=n=>{n.type="",n.key="",n.ctrlKey=!1,n.shiftKey=!1,n.altKey=!1,n.metaKey=!1},Ge=new _e(yn,xn,50),bn=()=>({start:0,end:0,type:"identifier",content:""}),vn=n=>{n.start=0,n.end=0,n.type="identifier",n.content=""},me=new _e(bn,vn,1e3),ye={getAllStats(){return{terminalLines:ne.getStats(),styles:Y.getStats(),events:Ge.getStats(),syntaxTokens:me.getStats()}},clearAll(){ne.clear(),Y.clear(),Ge.clear(),me.clear()},forceGC(){typeof window.gc=="function"&&window.gc()}},Cn=({line:n,theme:e,isLast:t})=>{const r=d.useMemo(()=>{switch(n.type){case"input":case"output":return e.foreground;case"error":return e.error;case"success":return e.success;case"warning":return e.warning;case"info":return e.comment;default:return e.foreground}},[n.type,e.foreground,e.error,e.success,e.warning,e.comment]),o=d.useMemo(()=>{const u=`line-${n.type}-${r}`;return Y.get(u,()=>{const m={color:r,fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "Courier New", monospace',fontSize:"14px",lineHeight:"1.4",whiteSpace:"pre-wrap",overflowWrap:"anywhere",wordBreak:"break-word",margin:0,padding:"2px 0"};return["input","error","success","warning"].includes(n.type)?{...m,fontWeight:500}:m})},[n.type,r]),{needsHtmlRendering:i,processedContent:c}=d.useMemo(()=>{const u=n.content.includes("<span")||n.content.includes("</span>"),m=n.content.includes("\x1B[");return{needsHtmlRendering:u||m,processedContent:m?X.ansiToHtml(n.content):n.content}},[n.content]),a=d.useCallback(u=>{u&&t&&typeof u.scrollIntoView=="function"&&u.scrollIntoView({behavior:"smooth"})},[t]);return s.jsx("div",{style:o,className:`terminal-line terminal-line--${n.type} ${n.className||""}`,"data-line-id":n.id,"data-timestamp":n.timestamp.toISOString(),ref:t?a:void 0,children:i?s.jsx("span",{dangerouslySetInnerHTML:{__html:c}}):c})},ot=d.memo(Cn,(n,e)=>n.line.id===e.line.id&&n.line.content===e.line.content&&n.line.type===e.line.type&&n.isLast===e.isLast&&n.theme===e.theme);ot.displayName="TerminalLine";const it=d.memo(({currentDirectory:n,osType:e,username:t,hostname:r,theme:o,isExecuting:i=!1})=>{const c=()=>e==="windows"?`${`C:\\${n.replace(/\//g,"\\")}`}> `:`${t}@${r}:${n==="/Desktop"?"~":n}$ `,a=()=>{if(e==="windows"){const l=`C:\\${n.replace(/\//g,"\\")}`;return s.jsxs("span",{style:{color:o.prompt},children:[l,"> "]})}const m=n==="/Desktop"?"~":n;return s.jsxs(s.Fragment,{children:[s.jsx("span",{style:{color:o.success,fontWeight:"bold"},children:t}),s.jsx("span",{style:{color:o.foreground},children:"@"}),s.jsx("span",{style:{color:o.directory,fontWeight:"bold"},children:r}),s.jsx("span",{style:{color:o.foreground},children:":"}),s.jsx("span",{style:{color:o.directory,fontWeight:"bold"},children:m}),s.jsx("span",{style:{color:o.prompt,fontWeight:"bold"},children:"$ "})]})},u={fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "Courier New", monospace',fontSize:"14px",lineHeight:"1.4",display:"inline-flex",alignItems:"center",userSelect:"none",opacity:i?.7:1};return s.jsxs("span",{style:u,className:"terminal-prompt","aria-label":c(),children:[a(),s.jsx("span",{style:{position:"absolute",left:"-9999px"},children:c()})]})});it.displayName="TerminalPrompt";const kn=({value:n,onChange:e,onKeyDown:t,currentDirectory:r,osType:o,username:i,hostname:c,theme:a,isExecuting:u,cursorPosition:m,suggestions:l,selectedSuggestion:x,showSuggestions:y,commandRegistry:f})=>{const C=d.useRef(null),p=d.useRef(null),w=d.useRef(null),[,k]=d.useState(!1),[N,b]=d.useState(0);d.useLayoutEffect(()=>{if(w.current){const{width:F}=w.current.getBoundingClientRect();b(F)}},[r,o,i,c,a]),d.useEffect(()=>{!u&&C.current&&C.current.focus()},[u]);const v=d.useCallback(F=>{const E=F.target.value,M=F.target.selectionStart||0;e(E,M)},[e]),j=d.useCallback(F=>{const{nativeEvent:E}=F;t(E)},[t]),S=d.useCallback(F=>{const E=n.split(/\s+/),M=n.substring(0,m),O=Math.max(0,M.split(/\s+/).length-1);E[O]=F;const z=E.join(" ");e(z,z.length),C.current&&C.current.focus()},[n,m,e]),T=d.useMemo(()=>{const F=`container-${a.background}`;return Y.get(F,()=>({position:"relative",display:"flex",alignItems:"center",padding:"8px 8px",backgroundColor:a.background,minHeight:"40px"}))},[a.background]),$=d.useMemo(()=>Y.get("input-container",()=>({position:"relative",flex:1,display:"flex",alignItems:"center"})),[]),h=d.useMemo(()=>{const F=`input-${a.foreground}-${a.cursor}-${N}`;return Y.get(F,()=>({background:"transparent",border:"none",outline:"none",color:a.foreground,caretColor:a.cursor,fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "Courier New", monospace',fontSize:"14px",lineHeight:"1.4",width:"100%",position:"relative",overflowWrap:"anywhere",wordBreak:"break-word",minHeight:"20px",marginLeft:"4px"}))},[a.foreground,a.cursor,N]),_=d.useMemo(()=>{const F=`suggestions-${a.background}-${a.selection}`;return Y.get(F,()=>({position:"absolute",bottom:"100%",left:0,right:0,maxHeight:"200px",overflowY:"auto",backgroundColor:a.background,border:`1px solid ${a.selection}`,borderRadius:"4px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"}))},[a.background,a.selection]),R=d.useCallback(F=>{const E=`suggestion-${F}-${x}-${a.selection}-${a.foreground}-${a.comment}`;return Y.get(E,()=>({padding:"8px 12px",fontSize:"14px",fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "Courier New", monospace',cursor:"pointer",backgroundColor:F===x?a.selection:"transparent",color:F===x?a.foreground:a.comment,borderBottom:F<l.length-1?`1px solid ${a.selection}`:"none"}))},[x,l.length,a.selection,a.foreground,a.comment]),L=d.useMemo(()=>!n||!f||n.length>1e3?"":fn.highlight(n,f),[n,f]),B=d.useMemo(()=>{const F=`highlight-overlay-${N}`;return Y.get(F,()=>({position:"absolute",top:0,left:"4px",right:0,bottom:0,pointerEvents:"none",fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "Courier New", monospace',fontSize:"14px",lineHeight:"1.4",color:"transparent",backgroundColor:"transparent",border:"none",outline:"none",padding:0,margin:0,whiteSpace:"pre",overflowWrap:"anywhere",overflow:"hidden"}))},[N]);return s.jsxs("div",{style:T,className:"terminal-input-container",children:[s.jsx("span",{ref:w,children:s.jsx(it,{currentDirectory:r,osType:o,username:i,hostname:c,theme:a,isExecuting:u})}),s.jsxs("div",{style:$,children:[L&&s.jsx("div",{style:B,dangerouslySetInnerHTML:{__html:L},"aria-hidden":"true"}),s.jsx("input",{ref:C,type:"text",value:n,onChange:v,onKeyDown:j,onFocus:()=>k(!0),onBlur:()=>k(!1),style:{...h,color:L?"transparent":a.foreground,backgroundColor:"transparent"},disabled:u,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,"aria-label":"Terminal command input",className:"terminal-input"}),y&&l.length>0&&s.jsx("div",{ref:p,style:_,className:"terminal-suggestions",children:l.map((F,E)=>s.jsx("div",{style:R(E),onClick:()=>S(F),className:"terminal-suggestion",children:F},E))})]}),u&&s.jsx("div",{style:{marginLeft:"8px",color:a.comment,fontSize:"12px"},children:s.jsx("span",{className:"terminal-spinner",children:"⠋"})}),s.jsx("style",{children:`
        @keyframes spin {
          0% { content: '⠋'; }
          12.5% { content: '⠙'; }
          25% { content: '⠹'; }
          37.5% { content: '⠸'; }
          50% { content: '⠼'; }
          62.5% { content: '⠴'; }
          75% { content: '⠦'; }
          87.5% { content: '⠧'; }
          100% { content: '⠇'; }
        }
        .terminal-spinner {
          animation: spin 1s linear infinite;
        }
      `})]})},at=d.memo(kn,(n,e)=>n.value===e.value&&n.cursorPosition===e.cursorPosition&&n.isExecuting===e.isExecuting&&n.showSuggestions===e.showSuggestions&&n.selectedSuggestion===e.selectedSuggestion&&n.suggestions===e.suggestions&&n.theme===e.theme&&n.currentDirectory===e.currentDirectory&&n.osType===e.osType&&n.username===e.username&&n.hostname===e.hostname&&n.commandRegistry===e.commandRegistry);at.displayName="TerminalInput";const oe=24,Ve=10,wn=({output:n,theme:e,autoScroll:t=!0,maxLines:r=1e3,currentInput:o,onInputChange:i,onKeyDown:c,currentDirectory:a,osType:u,username:m,hostname:l,isExecuting:x,cursorPosition:y,suggestions:f,selectedSuggestion:C,showSuggestions:p,commandRegistry:w})=>{const k=d.useRef(null),N=d.useRef(!1),b=d.useRef(void 0),[v,j]=d.useState(0),[S,T]=d.useState(0),$=d.useMemo(()=>n.slice(-r),[n,r]),{startIndex:h,endIndex:_,totalHeight:R}=d.useMemo(()=>{const g=$.length,I=Math.floor(v/oe)-Ve,D=Math.ceil(S/oe),P=I+D+Ve*2;return{startIndex:Math.max(0,I),endIndex:Math.min(g,P),totalHeight:g*oe}},[v,S,$.length]),L=d.useMemo(()=>$.slice(h,_),[$,h,_]),B=d.useCallback(()=>{const g=k.current;if(!g)return;const{scrollTop:I,scrollHeight:D,clientHeight:P}=g,H=D-I-P<10;j(I),T(P),N.current=!H,b.current&&window.clearTimeout(b.current),b.current=window.setTimeout(()=>{N.current=!1},1e3)},[]);d.useEffect(()=>{if(!t||N.current)return;const g=k.current;g&&(g.scrollTop=g.scrollHeight)},[n,t]),d.useEffect(()=>{const g=k.current;g&&T(g.clientHeight)},[]);const F=d.useMemo(()=>{const g=`output-${e.background}-${e.comment}`;return Y.get(g,()=>({flex:1,display:"flex",flexDirection:"column",overflowY:"auto",overflowX:"hidden",backgroundColor:e.background,scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:`${e.comment} ${e.background}`}))},[e.background,e.comment]),E=d.useMemo(()=>Y.get("content",()=>({position:"relative",height:`${R}px`,padding:"8px 8px"})),[R]),M=d.useMemo(()=>Y.get("input-container",()=>({padding:"0",minHeight:"auto"})),[]),O=d.useMemo(()=>`
    .terminal-output::-webkit-scrollbar {
      width: 8px;
    }
    .terminal-output::-webkit-scrollbar-track {
      background: ${e.background};
    }
    .terminal-output::-webkit-scrollbar-thumb {
      background-color: ${e.comment};
      border-radius: 4px;
      border: 2px solid ${e.background};
    }
    .terminal-output::-webkit-scrollbar-thumb:hover {
      background-color: ${e.foreground};
    }
  `,[e.background,e.comment,e.foreground]),z=d.useMemo(()=>o!==void 0&&i&&c&&a&&u&&m&&l,[o,i,c,a,u,m,l]),V=d.useMemo(()=>Y.get("virtual-list",()=>({position:"absolute",top:`${h*oe}px`,left:0,right:0})),[h]);return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:O}),s.jsxs("div",{ref:k,style:F,className:"terminal-output",onScroll:B,role:"log","aria-live":"polite","aria-label":"Terminal output",children:[s.jsx("div",{style:E,children:$.length===0?s.jsx("div",{style:{color:e.comment,fontStyle:"italic",padding:"20px 0",textAlign:"center"},children:"Terminal ready - type a command to get started"}):s.jsx("div",{style:V,children:L.map((g,I)=>{const D=h+I,P=g.id&&g.id.trim()!==""?`${g.id}-${D}`:`line-${D}-${g.timestamp?.getTime()||Date.now()}`;return s.jsx("div",{style:{height:`${oe}px`},children:s.jsx(ot,{line:g,theme:e,isLast:D===$.length-1})},P)})})}),z&&s.jsx("div",{style:M,children:s.jsx(at,{value:o,onChange:i,onKeyDown:c,currentDirectory:a,osType:u,username:m,hostname:l,theme:e,isExecuting:x||!1,cursorPosition:y||0,suggestions:f||[],selectedSuggestion:C||-1,showSuggestions:p||!1,commandRegistry:w})})]})]})},lt=d.memo(wn,(n,e)=>n.output.length===e.output.length&&n.output===e.output&&n.theme===e.theme&&n.autoScroll===e.autoScroll&&n.maxLines===e.maxLines&&n.currentInput===e.currentInput&&n.isExecuting===e.isExecuting&&n.cursorPosition===e.cursorPosition&&n.showSuggestions===e.showSuggestions);lt.displayName="TerminalOutput";const Sn=({state:n,theme:e,filename:t})=>{const o=(()=>{switch(n.mode){case"normal":return{text:"NORMAL",color:e.syntax.keyword};case"insert":return{text:"INSERT",color:e.syntax.string};case"visual":return{text:"VISUAL",color:e.syntax.number};case"command":return{text:"COMMAND",color:e.syntax.type};default:return{text:"NORMAL",color:e.syntax.keyword}}})(),i=()=>{let p="";return n.isModified&&(p+="[+] "),t||(p+="[No Name] "),p},c=()=>{const p=n.cursor.line+1,w=n.cursor.column+1,k=n.buffer.length,N=Math.round(p/k*100);return`${p},${w} ${N}%`},a=()=>{if(!t)return"";const p=t.split(".").pop()?.toLowerCase();switch(p){case"ts":case"tsx":return"TypeScript";case"js":case"jsx":return"JavaScript";case"md":return"Markdown";case"json":return"JSON";case"txt":return"Text";default:return p?p.toUpperCase():""}},u={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 12px",backgroundColor:e.statusBackground,color:e.statusForeground,fontSize:"12px",fontWeight:"bold",borderTop:`1px solid ${e.currentLineBackground}`,minHeight:"24px"},m={display:"flex",alignItems:"center",gap:"12px"},l={display:"flex",alignItems:"center",gap:"12px"},x={padding:"2px 8px",borderRadius:"3px",backgroundColor:o.color,color:e.background,fontSize:"11px",fontWeight:"bold"},y={display:"flex",alignItems:"center",gap:"8px"},f={color:n.messageType==="error"?e.syntax.string:n.messageType==="warning"?e.syntax.number:e.statusForeground,fontStyle:n.messageType==="info"?"italic":"normal"},C={color:e.syntax.comment,fontSize:"11px"};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:u,className:"vim-status-bar",children:[s.jsxs("div",{style:m,children:[s.jsx("div",{style:x,children:o.text}),s.jsxs("div",{style:y,children:[s.jsx("span",{children:t||"[No Name]"}),s.jsx("span",{children:i()}),n.message&&s.jsx("span",{style:f,children:n.message})]})]}),s.jsxs("div",{style:l,children:[a()&&s.jsx("span",{style:C,children:a()}),s.jsx("span",{children:c()}),s.jsxs("span",{children:[n.buffer.length," lines"]})]})]}),n.mode==="command"&&s.jsxs("div",{style:{padding:"2px 12px",backgroundColor:e.background,color:e.foreground,fontSize:"14px",borderTop:`1px solid ${e.currentLineBackground}`,fontFamily:"inherit"},className:"vim-command-line",children:[":",n.commandInput,s.jsx("span",{style:{animation:"vim-blink 1s infinite",marginLeft:"1px"},children:"█"})]})]})},jn=new Set(["abstract","any","as","async","await","boolean","break","case","catch","class","const","constructor","continue","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","instanceof","interface","is","keyof","let","module","namespace","never","new","null","number","object","of","package","private","protected","public","readonly","require","return","set","static","string","super","switch","symbol","this","throw","true","try","type","typeof","undefined","union","unique","unknown","var","void","while","with","yield"]),Nn=new Set(["Array","Boolean","Date","Error","Function","Map","Number","Object","Promise","RegExp","Set","String","Symbol","WeakMap","WeakSet","React","Component","Element","HTMLElement","Node","NodeList","EventTarget"]),ie=new Set(["+","-","*","/","%","**","++","--","=","+=","-=","*=","/=","%=","==","===","!=","!==","<",">","<=",">=","&&","||","!","&","|","^","~","<<",">>",">>>","?",":","=>","...","??","?.","??="]);function _n(n){if(!n)return"text";switch(n.split(".").pop()?.toLowerCase()){case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"md":return"markdown";case"json":return"json";case"css":return"css";case"html":case"htm":return"html";default:return"text"}}function Z(n,e,t){const r=me.acquire();return r.start=n,r.end=e,r.type=t,r}function Tn(n){const e=[];let t=0;for(;t<n.length;){const r=n[t];if(/\s/.test(r)){t++;continue}if(r==='"'||r==="'"||r==="`"){const o=t,i=r;for(t++;t<n.length&&n[t]!==i;)n[t]==="\\"&&t++,t++;t<n.length&&t++,e.push(Z(o,t,"string"));continue}if(r==="/"&&n[t+1]==="/"){e.push(Z(t,n.length,"comment"));break}if(r==="/"&&n[t+1]==="*"){const o=t;for(t+=2;t<n.length-1&&!(n[t]==="*"&&n[t+1]==="/");)t++;t<n.length-1&&(t+=2),e.push(Z(o,t,"comment"));continue}if(/\d/.test(r)){const o=t;for(;t<n.length&&/[\d.]/.test(n[t]);)t++;e.push(Z(o,t,"number"));continue}if(/[a-zA-Z_$]/.test(r)){const o=t;for(;t<n.length&&/[a-zA-Z0-9_$]/.test(n[t]);)t++;const i=n.slice(o,t);let c="identifier";jn.has(i)?c="keyword":Nn.has(i)&&(c="type"),e.push(Z(o,t,c));continue}if(ie.has(r)||ie.has(n.slice(t,t+2))||ie.has(n.slice(t,t+3))){const o=t;ie.has(n.slice(t,t+3))?t+=3:ie.has(n.slice(t,t+2))?t+=2:t++,e.push(Z(o,t,"operator"));continue}t++}return e}function $n(n){const e=[];if(n.startsWith("#"))return e.push(Z(0,n.length,"keyword")),e;if(n.startsWith("```"))return e.push(Z(0,n.length,"string")),e;let t=0;for(;t<n.length;)if(n[t]==="`"){const r=t;for(t++;t<n.length&&n[t]!=="`";)t++;t<n.length&&t++,e.push(Z(r,t,"string"))}else t++;return e}function Mn(n){const e=[];let t=0;for(;t<n.length;){const r=n[t];if(/\s/.test(r)){t++;continue}if(r==='"'){const o=t;for(t++;t<n.length&&n[t]!=='"';)n[t]==="\\"&&t++,t++;t<n.length&&t++,e.push(Z(o,t,"string"));continue}if(/\d/.test(r)||r==="-"){const o=t;for(r==="-"&&t++;t<n.length&&/[\d.]/.test(n[t]);)t++;e.push(Z(o,t,"number"));continue}if(/[a-z]/.test(r)){const o=t;for(;t<n.length&&/[a-z]/.test(n[t]);)t++;const i=n.slice(o,t);["true","false","null"].includes(i)&&e.push(Z(o,t,"keyword"));continue}t++}return e}function In(){const n=d.useRef(new Map),e=500,t=d.useMemo(()=>new Map,[]),r=d.useCallback(a=>{if(!a)return"text";if(t.has(a))return t.get(a);const u=_n(a);return t.set(a,u),u},[t]),o=d.useCallback((a,u)=>{const m=`${u||"text"}:${a}`;if(n.current.has(m))return n.current.get(m);if(a.length>5e3)return{text:a,tokens:[]};n.current.size>e*1.2&&(console.warn("Vim Syntax: Emergency cache clear, size:",n.current.size),n.current.clear(),t.clear());const l=r(u);let x=[];try{switch(l){case"typescript":case"javascript":x=Tn(a);break;case"markdown":x=$n(a);break;case"json":x=Mn(a);break;default:break}}catch(f){console.warn("Syntax highlighting error:",f),x=[]}const y={text:a,tokens:x};if(n.current.size>=e){const f=Array.from(n.current.keys()).slice(0,Math.floor(e*.7));f.forEach(C=>n.current.delete(C)),console.log(`Vim Syntax: Aggressive cache cleanup, removed ${f.length} entries`)}return n.current.set(m,y),y},[r]),i=d.useCallback(()=>{console.log(`Vim Syntax: Clearing cache with ${n.current.size} entries`),n.current.forEach(a=>{a.tokens.forEach(u=>me.release(u))}),n.current.clear(),t.clear()},[t]),c=d.useCallback(()=>({syntaxCacheSize:n.current.size,languageCacheSize:t.size,maxCacheSize:e}),[t]);return d.useEffect(()=>{const a=setInterval(()=>{const u=n.current.size,m=t.size;if(u>e*.6){const l=Array.from(n.current.entries()),x=Math.floor(e*.3);n.current.clear(),l.slice(-x).forEach(([y,f])=>{n.current.set(y,f)}),console.log(`Vim Syntax: Periodic cleanup, ${u} -> ${x} entries`)}m>50&&(t.clear(),console.log(`Vim Syntax: Cleared language cache (${m} entries)`))},3e4);return()=>clearInterval(a)},[t]),{highlightLine:o,clearCache:i,getCacheStats:c}}const En=({state:n,theme:e})=>{const t=d.useRef(null),{highlightLine:r,clearCache:o,getCacheStats:i}=In(),[c,a]=d.useState([0,Math.min(n.buffer.length,50)]),u=d.useCallback(()=>{const j=t.current;if(!j)return[0,Math.min(n.buffer.length,50)];const S=20,T=j.clientHeight,{scrollTop:$}=j,h=Math.floor($/S),_=Math.min(n.buffer.length,h+Math.ceil(T/S)+10),R=n.cursor.line,L=Math.max(0,Math.min(h-5,R-5)),B=Math.max(_,R+10);return[L,Math.min(B,n.buffer.length)]},[n.buffer.length,n.cursor.line]);d.useLayoutEffect(()=>{const j=u();a(j)},[u,n.buffer.length]),d.useLayoutEffect(()=>{const j=t.current;if(!j)return;const S=20,T=n.cursor.line*S,$=j.scrollTop,h=$+j.clientHeight;if(T<$||T>h-S){j.scrollTop=Math.max(0,T-j.clientHeight/2);const _=u();a(_)}},[n.cursor.line,n.cursor.column,u]),d.useEffect(()=>{const j=t.current;if(!j)return;let S,T;const $=()=>{clearTimeout(S),S=setTimeout(()=>{const R=u();a(R)},16)},h=()=>{clearTimeout(T),T=setTimeout(()=>{const L=n.cursor.line*20,B=j.scrollTop,F=B+j.clientHeight;if(L<B||L>F-20){j.scrollTop=Math.max(0,L-j.clientHeight/2);const E=u();a(E)}},8)};return n.buffer.reduce((R,L)=>R+L.length,0)>5e5&&i().syntaxCacheSize>500&&(console.log("Vim TextBuffer: Clearing syntax cache for large buffer"),o()),j.addEventListener("scroll",$,{passive:!0}),h(),()=>{j.removeEventListener("scroll",$),clearTimeout(S),clearTimeout(T)}},[u,n.cursor,n.buffer,o,i]);const m=n.cursor.line,l=n.cursor.column,x=n.mode,y=n.filename,f=d.useMemo(()=>(j,S)=>{const T=r(j,y);let $="";const h=m===S,_=h?l:-1;if(j.length===0)return h?'<span class="vim-cursor">█</span>':"<span>&nbsp;</span>";const R=[];T.tokens.forEach(B=>{R.push({start:B.start,end:B.end,className:`vim-syntax-${B.type}`})}),h&&_>=0&&_<j.length&&x!=="insert"&&R.push({start:_,end:_+1,className:"vim-cursor",isCursor:!0}),R.sort((B,F)=>B.start-F.start);let L=0;for(const B of R){if(L<B.start){const E=j.slice(L,B.start);$+=C(E)}const F=j.slice(B.start,B.end);$+=`<span class="${B.className}">${C(F)}</span>`,L=Math.max(L,B.end)}if(L<j.length){const B=j.slice(L);$+=C(B)}return h&&x==="insert"&&_===j.length&&($+='<span class="vim-cursor">█</span>'),$||"&nbsp;"},[m,l,x,y,r]),C=j=>j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/ /g,"&nbsp;"),[p,w]=c,k={flex:1,overflow:"auto",padding:"8px 12px",backgroundColor:e.background,color:e.foreground,lineHeight:"20px",fontFamily:"inherit",fontSize:"inherit",whiteSpace:"pre-wrap",overflowWrap:"anywhere",position:"relative"},N={height:`${n.buffer.length*20}px`,position:"relative"},b={position:"absolute",top:`${p*20}px`,left:0,right:0},v=j=>({height:"20px",minHeight:"20px",backgroundColor:j===n.cursor.line?e.currentLineBackground:"transparent",padding:"0 4px",margin:0});return s.jsx("div",{ref:t,style:k,className:"vim-text-buffer",role:"textbox","aria-label":"Text editor content","aria-multiline":!0,children:s.jsx("div",{style:N,children:s.jsxs("div",{style:b,children:[n.buffer.slice(p,w).map((j,S)=>{const T=p+S,$=f(j,T);return s.jsx("div",{style:v(T),className:`vim-line ${T===n.cursor.line?"vim-current-line":""}`,dangerouslySetInnerHTML:{__html:$}},T)}),n.buffer.length===0&&s.jsx("div",{style:v(0),className:"vim-line vim-current-line",children:s.jsx("span",{className:"vim-cursor",children:"█"})})]})})})},Dn=({buffer:n,currentLine:e,scrollOffset:t,viewportHeight:r,theme:o,relative:i=!1})=>{const c=()=>{const w=n.length,k=Math.max(2,Math.floor(Math.log10(w))+1);return Math.max(40,k*8+16)},a=w=>i&&w!==e?Math.abs(w-e).toString():(w+1).toString(),u=()=>{const k=Math.max(0,Math.floor(t/20)-5),N=Math.min(n.length,k+Math.ceil(r/20)+10);return[k,N]},[m,l]=u(),y={width:`${c()}px`,backgroundColor:o.background,borderRight:`1px solid ${o.currentLineBackground}`,overflow:"hidden",position:"relative",fontSize:"12px",lineHeight:"20px",fontFamily:"inherit"},f={height:`${n.length*20}px`,position:"relative"},C={position:"absolute",top:`${m*20}px`,left:0,right:0},p=w=>({height:"20px",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"8px",color:w===e?o.currentLineNumber:o.lineNumber,backgroundColor:w===e?o.currentLineBackground:"transparent",fontWeight:w===e?"bold":"normal",cursor:"default",userSelect:"none"});return s.jsx("div",{style:y,className:"vim-line-numbers",children:s.jsx("div",{style:f,children:s.jsxs("div",{style:C,children:[n.slice(m,l).map((w,k)=>{const N=m+k;return s.jsx("div",{style:p(N),className:`vim-line-number ${N===e?"current":""}`,children:a(N)},N)}),n.length===0&&s.jsx("div",{style:p(0),className:"vim-line-number current",children:"1"})]})})})};class Rn extends d.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Vim Editor Error:",e),console.error("Error Info:",t),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}handleRestart=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};render(){if(this.state.hasError){const{theme:e}=this.props,t={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",backgroundColor:e.background,color:e.foreground,fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "Courier New", monospace',fontSize:"14px",padding:"20px",textAlign:"center"},r={color:e.syntax.keyword,fontSize:"18px",fontWeight:"bold",marginBottom:"16px"},o={color:e.foreground,marginBottom:"20px",maxWidth:"600px",wordWrap:"break-word"},i={backgroundColor:e.statusBackground,color:e.statusForeground,border:`1px solid ${e.foreground}`,padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontFamily:"inherit"};return e.currentLineBackground,`${e.lineNumber}`,s.jsxs("div",{style:t,children:[s.jsx("div",{style:r,children:"🔧 Vim Editor Error"}),s.jsx("div",{style:o,children:"The vim editor encountered an unexpected error and has been safely contained. Your work in other applications is not affected."}),s.jsx("button",{style:i,onClick:this.handleRestart,onMouseOver:c=>{c.currentTarget.style.backgroundColor=e.selectionBackground},onMouseOut:c=>{c.currentTarget.style.backgroundColor=e.statusBackground},children:"Restart Vim Editor"}),!1]})}return this.props.children}}const ct={name:"w",aliases:["write"],description:"Write (save) the current buffer",execute:async(n,e,t)=>{const r=n[0]||e.filename;if(!r)return{success:!1,message:"E32: No file name",messageType:"error"};try{const o=e.buffer.join(`
`);return await t.saveFile(r,o)?{success:!0,state:{...e,filename:r,isModified:!1,mode:"normal",commandInput:""},message:`"${r}" ${e.buffer.length}L, ${o.length}C written`,messageType:"info"}:{success:!1,message:`E212: Can't open file for writing: ${r}`,messageType:"error"}}catch(o){return{success:!1,message:`Write error: ${o instanceof Error?o.message:"Unknown error"}`,messageType:"error"}}}},Fn={name:"q",aliases:["quit"],description:"Quit vim",execute:async(n,e,t)=>e.isModified?{success:!1,message:"E37: No write since last change (add ! to override)",messageType:"error"}:(t.exitVim(),{success:!0})},Ln={name:"q!",aliases:["quit!"],description:"Force quit vim (discard changes)",execute:async(n,e,t)=>(t.exitVim(),{success:!0})},An={name:"wq",aliases:["x"],description:"Write and quit",execute:async(n,e,t)=>{const r=await ct.execute(n,e,t);return r.success?(t.exitVim(),{success:!0}):r}},Pn={name:"e",aliases:["edit"],description:"Edit a file",execute:async(n,e,t)=>{if(e.isModified)return{success:!1,message:"E37: No write since last change (add ! to override)",messageType:"error"};const r=n[0];if(!r)return{success:!1,message:"E471: Argument required",messageType:"error"};try{const o=await t.loadFile(r),i=o.split(`
`);return{success:!0,state:{...e,filename:r,buffer:i.length>0?i:[""],isModified:!1,cursor:{line:0,column:0},mode:"normal",commandInput:""},message:`"${r}" ${i.length}L, ${o.length}C`,messageType:"info"}}catch{return{success:!0,state:{...e,filename:r,buffer:[""],isModified:!1,cursor:{line:0,column:0},mode:"normal",commandInput:""},message:`"${r}" [New File]`,messageType:"info"}}}},On={name:"set",aliases:["se"],description:"Set vim options",execute:async(n,e,t)=>{if(n.length===0)return{success:!1,message:"E471: Argument required",messageType:"error"};const r=n[0],o={...e};let i="";switch(r){case"number":case"nu":o.showLineNumbers=!0,i="Line numbers enabled";break;case"nonumber":case"nonu":o.showLineNumbers=!1,i="Line numbers disabled";break;default:return{success:!1,message:`E518: Unknown option: ${r}`,messageType:"error"}}return o.mode="normal",o.commandInput="",{success:!0,state:o,message:i,messageType:"info"}}},Bn={name:"help",aliases:["h"],description:"Show help",execute:async(n,e,t)=>({success:!0,state:{...e,buffer:["=== Vim Help ===","","Normal Mode Commands:","  h, j, k, l    - Move cursor left, down, up, right","  w, b, e       - Word movements","  0, $          - Beginning/end of line","  gg, G         - First/last line","  i, a, o, O    - Enter insert mode","  x             - Delete character","  dd            - Delete line","  yy            - Yank (copy) line","  p, P          - Put (paste)","  u             - Undo","  Ctrl+r        - Redo","  /             - Search","  v             - Enter visual mode","  :             - Enter command mode","","Command Mode:","  :w            - Write (save) file","  :q            - Quit","  :wq           - Write and quit","  :q!           - Force quit","  :e <file>     - Edit file","  :set number   - Show line numbers","  :help         - Show this help","","Press : to enter command mode, then type a command."],filename:"[Help]",isModified:!1,cursor:{line:0,column:0},mode:"normal",commandInput:""},message:"Help loaded",messageType:"info"})},zn=[ct,Fn,Ln,An,Pn,On,Bn],Hn=n=>({mode:"normal",buffer:[""],cursor:{line:0,column:0},selection:void 0,isModified:!1,filename:n,commandInput:"",undoStack:[],redoStack:[],register:"",searchPattern:"",searchResults:[],currentSearchIndex:-1,message:"",messageType:"info",showLineNumbers:!0,scrollOffset:0,viewportHeight:25});function Wn(n,e){const[t,r]=d.useState(()=>Hn(n));d.useEffect(()=>{n&&e?.loadFile&&(async()=>{try{const v=await e.loadFile(n),j=v.split(`
`);r(S=>({...S,buffer:j.length>0?j:[""],isModified:!1,message:`"${n}" ${j.length}L, ${v.length}C`,messageType:"info"}))}catch{r(j=>({...j,buffer:[""],message:`"${n}" [New File]`,messageType:"info"}))}})()},[n,e]);const o=d.useCallback((b,v)=>{const j=[],S=Math.max(b.length,v.length);for(let T=0;T<S;T++){const $=b[T]||"",h=v[T]||"";$!==h&&($===""&&h!==""?j.push({line:T,oldContent:"",newContent:h,operation:"insert"}):$!==""&&h===""?j.push({line:T,oldContent:$,newContent:"",operation:"delete"}):j.push({line:T,oldContent:$,newContent:h,operation:"replace"}))}return j},[]),i=d.useRef(void 0),c=d.useCallback((b,v="info")=>{r(j=>({...j,message:b,messageType:v})),i.current&&clearTimeout(i.current),v==="info"&&(i.current=setTimeout(()=>{r(j=>({...j,message:""}))},3e3))},[]);d.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]);const a=d.useCallback(()=>{r(b=>({...b,mode:"normal",commandInput:"",selection:void 0}))},[]),u=d.useCallback(b=>{r(v=>({...v,mode:"insert",cursor:b||v.cursor}))},[]),m=d.useCallback(()=>{r(b=>({...b,mode:"visual",selection:{start:b.cursor,end:b.cursor}}))},[]),l=d.useCallback(()=>{r(b=>({...b,mode:"command",commandInput:""}))},[]),x=d.useCallback(b=>{r(v=>{if(!(v.buffer.length!==b.length||v.buffer.some((T,$)=>T!==b[$])))return v;const S={type:"buffer",data:{bufferDiffs:o(v.buffer,b),cursor:{...v.cursor},isModified:v.isModified},timestamp:Date.now()};return{...v,buffer:b,isModified:!0,undoStack:[...v.undoStack.slice(-19),S],redoStack:[]}})},[o]),y=d.useCallback(b=>{r(v=>{const j=Math.max(0,v.buffer.length-1),S=Math.max(0,Math.min(b.line,j)),T=v.buffer[S]?.length||0,$=Math.max(0,Math.min(b.column,T)),h={line:S,column:$};return v.cursor.line===h.line&&v.cursor.column===h.column&&v.mode==="visual"&&v.selection&&v.selection.end.line===h.line&&v.selection.end.column===h.column?v:v.mode==="visual"&&v.selection?{...v,cursor:h,selection:{...v.selection,end:h}}:{...v,cursor:h}})},[]),f=d.useCallback(async b=>{if(!b.trim())return{success:!1,message:"Empty command",messageType:"error"};const v=b.trim().split(/\s+/),j=v[0],S=v.slice(1),T=zn.find($=>$.name===j||$.aliases.includes(j));if(!T)return{success:!1,message:`E492: Not an editor command: ${j}`,messageType:"error"};try{const $=await T.execute(S,t,e||{});return $.state&&r($.state),$.message&&c($.message,$.messageType||"info"),$}catch($){return{success:!1,message:`Command error: ${$ instanceof Error?$.message:"Unknown error"}`,messageType:"error"}}},[t,e,c]),C=d.useCallback((b,v,j=!1)=>{const S=[...b];for(const T of v){const{line:$,oldContent:h,newContent:_}=T;if(j)$<S.length&&(S[$]=h);else if($<S.length)S[$]=_;else{for(;S.length<=$;)S.push("");S[$]=_}}return S},[]),p=d.useCallback(()=>{r(b=>{if(b.undoStack.length===0)return c("Already at oldest change","warning"),b;const v=b.undoStack[b.undoStack.length-1],j=b.undoStack.slice(0,-1),S={type:v.type,data:{},timestamp:Date.now()};let T=b.buffer;if(v.type==="buffer"){if(v.data.bufferDiffs){T=C(b.buffer,v.data.bufferDiffs,!0);const _=o(T,b.buffer);S.data.bufferDiffs=_}else v.data.buffer&&(T=v.data.buffer,S.data.buffer=[...b.buffer]);S.data.cursor={...b.cursor},S.data.isModified=b.isModified}else v.type==="cursor"?S.data.cursor={...b.cursor}:v.type==="mode"&&(S.data.mode=b.mode,S.data.selection=b.selection?{...b.selection}:void 0);const $=[...b.redoStack,S],h={...b,buffer:T};return v.data.cursor&&(h.cursor=v.data.cursor),v.data.selection!==void 0&&(h.selection=v.data.selection),v.data.mode&&(h.mode=v.data.mode),v.data.isModified!==void 0&&(h.isModified=v.data.isModified),{...h,undoStack:j,redoStack:$,message:"",messageType:"info"}})},[c,C,o]),w=d.useCallback(()=>{r(b=>{if(b.redoStack.length===0)return c("Already at newest change","warning"),b;const v=b.redoStack[b.redoStack.length-1],j=b.redoStack.slice(0,-1),S={type:v.type,data:{},timestamp:Date.now()};v.type==="buffer"?(S.data.buffer=[...b.buffer],S.data.cursor={...b.cursor},S.data.isModified=b.isModified):v.type==="cursor"?S.data.cursor={...b.cursor}:v.type==="mode"&&(S.data.mode=b.mode,S.data.selection=b.selection?{...b.selection}:void 0);const T=[...b.undoStack,S],$={...b};return v.data.buffer&&($.buffer=v.data.buffer),v.data.cursor&&($.cursor=v.data.cursor),v.data.selection!==void 0&&($.selection=v.data.selection),v.data.mode&&($.mode=v.data.mode),v.data.isModified!==void 0&&($.isModified=v.data.isModified),{...$,undoStack:T,redoStack:j,message:"",messageType:"info"}})},[c]),k=d.useCallback(b=>{r(v=>({...v,commandInput:b}))},[]),N=d.useCallback((b,v)=>{r(j=>v==="add"?{...j,commandInput:j.commandInput+b}:{...j,commandInput:j.commandInput.slice(0,-1)})},[]);return{state:t,enterNormalMode:a,enterInsertMode:u,enterVisualMode:m,enterCommandMode:l,updateBuffer:x,moveCursor:y,executeCommand:f,undo:p,redo:w,setMessage:c,updateCommandInput:k,handleCommandInputChange:N}}function Un(n){const e=[0];let t=!1;for(let r=0;r<n.length;r++){const o=n[r],i=/\w/.test(o);!t&&i?(e.push(r),t=!0):t&&!i&&(e.push(r),t=!1)}return e.push(n.length),[...new Set(e)].sort((r,o)=>r-o)}function xe(n,e){const t=n.buffer[n.cursor.line]||"",r=Un(t);if(e==="forward"){const o=r.find(i=>i>n.cursor.column);if(o!==void 0)return{line:n.cursor.line,column:o};if(n.cursor.line<n.buffer.length-1)return{line:n.cursor.line+1,column:0}}else{const o=r.reverse().find(i=>i<n.cursor.column);if(o!==void 0)return{line:n.cursor.line,column:o};if(n.cursor.line>0){const i=n.buffer[n.cursor.line-1]||"";return{line:n.cursor.line-1,column:i.length}}}return n.cursor}function Gn(n,e){const t=n.buffer[n.cursor.line]||"";if(n.cursor.column<t.length){const r=t.slice(0,n.cursor.column)+t.slice(n.cursor.column+1),o=[...n.buffer];o[n.cursor.line]=r,e.updateBuffer(o)}}function Vn(n,e){if(n.buffer.length===1)e.updateBuffer([""]),e.moveCursor({line:0,column:0});else{const t=n.buffer.filter((i,c)=>c!==n.cursor.line);e.updateBuffer(t);const r=Math.min(n.cursor.line,t.length-1),o=Math.min(n.cursor.column,(t[r]||"").length);e.moveCursor({line:r,column:o})}}function qn(n,e){e.setMessage("1 line yanked","info")}function qe(n,e){e.setMessage("Nothing to put","warning")}function Kn(n,e,t){const{key:r,ctrlKey:o}=n;if(o)switch(r){case"r":t.redo();return;case"f":const i=Math.min(e.buffer.length-1,e.cursor.line+e.viewportHeight);t.moveCursor({line:i,column:e.cursor.column});return;case"b":const c=Math.max(0,e.cursor.line-e.viewportHeight);t.moveCursor({line:c,column:e.cursor.column});return;default:return}switch(r){case"h":case"ArrowLeft":t.moveCursor({line:e.cursor.line,column:Math.max(0,e.cursor.column-1)});break;case"j":case"ArrowDown":if(e.cursor.line<e.buffer.length-1){const C=e.buffer[e.cursor.line+1]||"";t.moveCursor({line:e.cursor.line+1,column:Math.min(e.cursor.column,C.length)})}break;case"k":case"ArrowUp":if(e.cursor.line>0){const C=e.buffer[e.cursor.line-1]||"";t.moveCursor({line:e.cursor.line-1,column:Math.min(e.cursor.column,C.length)})}break;case"l":case"ArrowRight":const i=e.buffer[e.cursor.line]||"";e.cursor.column<i.length&&t.moveCursor({line:e.cursor.line,column:e.cursor.column+1});break;case"w":t.moveCursor(xe(e,"forward"));break;case"b":t.moveCursor(xe(e,"backward"));break;case"e":const c=xe(e,"forward");c.column>0?t.moveCursor({...c,column:c.column-1}):t.moveCursor(c);break;case"0":case"Home":t.moveCursor({line:e.cursor.line,column:0});break;case"$":case"End":const a=(e.buffer[e.cursor.line]||"").length;t.moveCursor({line:e.cursor.line,column:Math.max(0,a-1)});break;case"g":t.moveCursor({line:0,column:0});break;case"G":const u=e.buffer.length-1,m=(e.buffer[u]||"").length;t.moveCursor({line:u,column:Math.max(0,m-1)});break;case"i":t.enterInsertMode();break;case"I":t.moveCursor({line:e.cursor.line,column:0}),t.enterInsertMode();break;case"a":const l=Math.min(e.cursor.column+1,(e.buffer[e.cursor.line]||"").length);t.enterInsertMode({line:e.cursor.line,column:l});break;case"A":const x=(e.buffer[e.cursor.line]||"").length;t.enterInsertMode({line:e.cursor.line,column:x});break;case"o":const y=[...e.buffer.slice(0,e.cursor.line+1),"",...e.buffer.slice(e.cursor.line+1)];t.updateBuffer(y),t.enterInsertMode({line:e.cursor.line+1,column:0});break;case"O":const f=[...e.buffer.slice(0,e.cursor.line),"",...e.buffer.slice(e.cursor.line)];t.updateBuffer(f),t.enterInsertMode({line:e.cursor.line,column:0});break;case"x":Gn(e,t);break;case"d":Vn(e,t);break;case"y":qn(e,t);break;case"p":qe(e,t);break;case"P":qe(e,t);break;case"u":t.undo();break;case"v":t.enterVisualMode();break;case":":t.enterCommandMode();break;case"/":t.setMessage("Search not implemented yet","info");break}}function ut(n,e,t){const r=n.buffer[n.cursor.line]||"",o=r.slice(0,n.cursor.column)+e+r.slice(n.cursor.column),i=[...n.buffer];i[n.cursor.line]=o,t.updateBuffer(i),t.moveCursor({line:n.cursor.line,column:n.cursor.column+1})}function be(n,e){if(n.cursor.column>0){const t=n.buffer[n.cursor.line]||"",r=t.slice(0,n.cursor.column-1)+t.slice(n.cursor.column),o=[...n.buffer];o[n.cursor.line]=r,e.updateBuffer(o),e.moveCursor({line:n.cursor.line,column:n.cursor.column-1})}else if(n.cursor.line>0){const t=n.buffer[n.cursor.line]||"",r=n.buffer[n.cursor.line-1]||"",o=r+t,i=[...n.buffer.slice(0,n.cursor.line-1),o,...n.buffer.slice(n.cursor.line+1)];e.updateBuffer(i),e.moveCursor({line:n.cursor.line-1,column:r.length})}}function Yn(n,e){const t=n.buffer[n.cursor.line]||"";if(n.cursor.column<t.length){const r=t.slice(0,n.cursor.column)+t.slice(n.cursor.column+1),o=[...n.buffer];o[n.cursor.line]=r,e.updateBuffer(o)}else if(n.cursor.line<n.buffer.length-1){const r=n.buffer[n.cursor.line+1]||"",o=t+r,i=[...n.buffer.slice(0,n.cursor.line),o,...n.buffer.slice(n.cursor.line+2)];e.updateBuffer(i)}}function Zn(n,e){const t=n.buffer[n.cursor.line]||"",r=t.slice(0,n.cursor.column),o=t.slice(n.cursor.column),i=[...n.buffer.slice(0,n.cursor.line),r,o,...n.buffer.slice(n.cursor.line+1)];e.updateBuffer(i),e.moveCursor({line:n.cursor.line+1,column:0})}function Jn(n,e){ut(n,"  ",e)}function Xn(n,e,t){const{key:r,ctrlKey:o,altKey:i,metaKey:c}=n;if(o&&!i&&!c)switch(r){case"c":t.enterNormalMode();return;case"h":be(e,t);return;case"w":be(e,t);return;case"u":{const u=(e.buffer[e.cursor.line]||"").slice(e.cursor.column),m=[...e.buffer];m[e.cursor.line]=u,t.updateBuffer(m),t.moveCursor({line:e.cursor.line,column:0});return}default:return}switch(r){case"Escape":t.enterNormalMode();break;case"Enter":Zn(e,t);break;case"Backspace":be(e,t);break;case"Delete":Yn(e,t);break;case"Tab":Jn(e,t);break;case"ArrowLeft":if(e.cursor.column>0)t.moveCursor({line:e.cursor.line,column:e.cursor.column-1});else if(e.cursor.line>0){const a=e.buffer[e.cursor.line-1]||"";t.moveCursor({line:e.cursor.line-1,column:a.length})}break;case"ArrowRight":{const a=e.buffer[e.cursor.line]||"";e.cursor.column<a.length?t.moveCursor({line:e.cursor.line,column:e.cursor.column+1}):e.cursor.line<e.buffer.length-1&&t.moveCursor({line:e.cursor.line+1,column:0});break}case"ArrowUp":if(e.cursor.line>0){const a=e.buffer[e.cursor.line-1]||"";t.moveCursor({line:e.cursor.line-1,column:Math.min(e.cursor.column,a.length)})}break;case"ArrowDown":if(e.cursor.line<e.buffer.length-1){const a=e.buffer[e.cursor.line+1]||"";t.moveCursor({line:e.cursor.line+1,column:Math.min(e.cursor.column,a.length)})}break;case"Home":t.moveCursor({line:e.cursor.line,column:0});break;case"End":{const a=(e.buffer[e.cursor.line]||"").length;t.moveCursor({line:e.cursor.line,column:a});break}case"PageUp":{const a=Math.max(0,e.cursor.line-e.viewportHeight);t.moveCursor({line:a,column:e.cursor.column});break}case"PageDown":{const a=Math.min(e.buffer.length-1,e.cursor.line+e.viewportHeight);t.moveCursor({line:a,column:e.cursor.column});break}default:r.length===1&&!o&&!i&&!c&&ut(e,r,t);break}}function Qn(n){if(!n.selection)return"";const{start:e,end:t}=n.selection,r=e.line<t.line||e.line===t.line&&e.column<=t.column?e:t,o=e.line<t.line||e.line===t.line&&e.column<=t.column?t:e;if(r.line===o.line)return(n.buffer[r.line]||"").slice(r.column,o.column);const i=[];for(let c=r.line;c<=o.line;c++){const a=n.buffer[c]||"";c===r.line?i.push(a.slice(r.column)):c===o.line?i.push(a.slice(0,o.column)):i.push(a)}return i.join(`
`)}function es(n,e){if(!n.selection)return;const{start:t,end:r}=n.selection,o=t.line<r.line||t.line===r.line&&t.column<=r.column?t:r,i=t.line<r.line||t.line===r.line&&t.column<=r.column?r:t;if(o.line===i.line){const c=n.buffer[o.line]||"",a=c.slice(0,o.column)+c.slice(i.column),u=[...n.buffer];u[o.line]=a,e.updateBuffer(u),e.moveCursor(o)}else{const c=n.buffer[o.line]||"",a=n.buffer[i.line]||"",u=c.slice(0,o.column)+a.slice(i.column),m=[...n.buffer.slice(0,o.line),u,...n.buffer.slice(i.line+1)];e.updateBuffer(m),e.moveCursor(o)}e.enterNormalMode()}function ts(n,e){if(!n.selection)return;const r=Qn(n).split(`
`).length;e.setMessage(`${r} line${r===1?"":"s"} yanked`,"info"),e.enterNormalMode()}function ns(n){const e=[0];let t=!1;for(let r=0;r<n.length;r++){const o=n[r],i=/\w/.test(o);!t&&i?(e.push(r),t=!0):t&&!i&&(e.push(r),t=!1)}return e.push(n.length),[...new Set(e)].sort((r,o)=>r-o)}function ve(n,e){const t=n.buffer[n.cursor.line]||"",r=ns(t);if(e==="forward"){const o=r.find(i=>i>n.cursor.column);if(o!==void 0)return{line:n.cursor.line,column:o};if(n.cursor.line<n.buffer.length-1)return{line:n.cursor.line+1,column:0}}else{const o=r.reverse().find(i=>i<n.cursor.column);if(o!==void 0)return{line:n.cursor.line,column:o};if(n.cursor.line>0){const i=n.buffer[n.cursor.line-1]||"";return{line:n.cursor.line-1,column:i.length}}}return n.cursor}function ss(n,e,t){const{key:r,ctrlKey:o}=n;if(o)switch(r){case"f":const i=Math.min(e.buffer.length-1,e.cursor.line+e.viewportHeight);t.moveCursor({line:i,column:e.cursor.column});return;case"b":const c=Math.max(0,e.cursor.line-e.viewportHeight);t.moveCursor({line:c,column:e.cursor.column});return;default:return}switch(r){case"Escape":case"v":t.enterNormalMode();break;case"h":case"ArrowLeft":t.moveCursor({line:e.cursor.line,column:Math.max(0,e.cursor.column-1)});break;case"j":case"ArrowDown":if(e.cursor.line<e.buffer.length-1){const l=e.buffer[e.cursor.line+1]||"";t.moveCursor({line:e.cursor.line+1,column:Math.min(e.cursor.column,l.length)})}break;case"k":case"ArrowUp":if(e.cursor.line>0){const l=e.buffer[e.cursor.line-1]||"";t.moveCursor({line:e.cursor.line-1,column:Math.min(e.cursor.column,l.length)})}break;case"l":case"ArrowRight":const i=e.buffer[e.cursor.line]||"";e.cursor.column<i.length&&t.moveCursor({line:e.cursor.line,column:e.cursor.column+1});break;case"w":t.moveCursor(ve(e,"forward"));break;case"b":t.moveCursor(ve(e,"backward"));break;case"e":const c=ve(e,"forward");c.column>0?t.moveCursor({...c,column:c.column-1}):t.moveCursor(c);break;case"0":case"Home":t.moveCursor({line:e.cursor.line,column:0});break;case"$":case"End":const a=(e.buffer[e.cursor.line]||"").length;t.moveCursor({line:e.cursor.line,column:a});break;case"g":t.moveCursor({line:0,column:0});break;case"G":const u=e.buffer.length-1,m=(e.buffer[u]||"").length;t.moveCursor({line:u,column:m});break;case"d":case"x":es(e,t);break;case"y":ts(e,t);break;case"i":t.enterInsertMode();break;case":":t.enterCommandMode();break}}async function rs(n,e){if(!n.commandInput.trim()){e.enterNormalMode();return}try{await e.executeCommand(n.commandInput)}catch(t){e.setMessage(`Command error: ${t instanceof Error?t.message:"Unknown error"}`,"error")}e.enterNormalMode()}function os(n,e,t){const{key:r,ctrlKey:o,altKey:i,metaKey:c}=n;if(o&&!i&&!c)switch(r){case"c":t.enterNormalMode();return;case"u":return;case"w":return;default:return}switch(r){case"Escape":t.enterNormalMode();break;case"Enter":rs(e,t);break;case"Backspace":t.handleCommandInputChange("","delete");break;case"Delete":t.handleCommandInputChange("","delete");break;case"ArrowLeft":break;case"ArrowRight":break;case"ArrowUp":break;case"ArrowDown":break;case"Home":break;case"End":break;case"Tab":break;default:r.length===1&&!o&&!i&&!c&&t.handleCommandInputChange(r,"add");break}}function is(n,e){const t=d.useMemo(()=>n,[n.mode,n.cursor.line,n.cursor.column,n.buffer.length,n.commandInput,n.selection?.start.line,n.selection?.start.column,n.selection?.end.line,n.selection?.end.column]),r=d.useMemo(()=>e,[e.executeCommand,e.enterInsertMode,e.enterVisualMode,e.enterNormalMode,e.enterCommandMode,e.updateBuffer,e.moveCursor,e.undo,e.redo,e.setMessage,e.handleCommandInputChange]);return{handleKeyDown:d.useCallback(i=>{["F5","F11","F12"].includes(i.key)||i.preventDefault();try{switch(t.mode){case"normal":Kn(i,t,r);break;case"insert":Xn(i,t,r);break;case"visual":ss(i,t,r);break;case"command":os(i,t,r);break;default:console.warn(`Unknown vim mode: ${t.mode}`);break}}catch(a){console.error("Vim key handler error:",a),r.setMessage(`Key handler error: ${a instanceof Error?a.message:"Unknown error"}`,"error")}},[t,r])}}const as=({filename:n,currentDirectory:e,theme:t,onExit:r,onSaveFile:o,onLoadFile:i,onFileExists:c})=>{const a=d.useRef(null),u=d.useMemo(()=>({saveFile:o,loadFile:i,exitVim:r,fileExists:c,currentDirectory:e}),[o,i,r,c,e]),{state:m,executeCommand:l,enterInsertMode:x,enterVisualMode:y,enterNormalMode:f,enterCommandMode:C,updateBuffer:p,moveCursor:w,undo:k,redo:N,setMessage:b,handleCommandInputChange:v}=Wn(n,u),j=d.useMemo(()=>({executeCommand:l,enterInsertMode:x,enterVisualMode:y,enterNormalMode:f,enterCommandMode:C,updateBuffer:p,moveCursor:w,undo:k,redo:N,setMessage:b,handleCommandInputChange:v}),[l,x,y,f,C,p,w,k,N,b,v]),S=()=>{window.gc&&typeof window.gc=="function"&&window.gc()},T=()=>({used:0,total:0,available:0}),{handleKeyDown:$}=is(m,j);d.useEffect(()=>{const E=a.current;if(!E)return;E.focus();const M=O=>{if(E.offsetParent!==null){O.ctrlKey&&["s","o","f","h","r","w","n","t"].includes(O.key)&&O.preventDefault();try{$(O)}catch(z){console.error("Vim key handler error:",z)}}};return E.addEventListener("keydown",M,{passive:!1}),()=>{E.removeEventListener("keydown",M)}},[$]);const h=d.useMemo(()=>({background:t.background,foreground:t.foreground,currentLineBackground:t.selection,lineNumber:t.comment,currentLineNumber:t.foreground,statusBackground:t.selection,statusForeground:t.foreground,selectionBackground:t.selection,searchHighlight:t.warning,cursor:t.cursor,syntax:{keyword:t.success,string:t.directory,comment:t.comment,number:t.warning,operator:t.foreground,identifier:t.foreground,type:t.success}}),[t]),_=d.useMemo(()=>({display:"flex",flexDirection:"column",height:"100%",width:"100%",backgroundColor:h.background,color:h.foreground,fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "Courier New", monospace',fontSize:"14px",overflow:"hidden",position:"relative"}),[h.background,h.foreground]),R=d.useMemo(()=>({display:"flex",flex:1,overflow:"hidden"}),[]),L=d.useMemo(()=>({flexShrink:0}),[]),B=d.useMemo(()=>({flex:1,overflow:"hidden"}),[]),F=E=>{console.error("Vim Editor crashed:",E),b("Editor crashed - restarting in safe mode","error"),console.log("Memory usage at crash:",T()),S()};return s.jsx(Rn,{theme:h,onError:F,children:s.jsxs("div",{ref:a,style:_,className:"vim-editor",tabIndex:0,role:"application","aria-label":"Vim Text Editor",children:[s.jsxs("div",{style:R,className:"vim-editor-area",children:[m.showLineNumbers&&s.jsx("div",{style:L,children:s.jsx(Dn,{buffer:m.buffer,currentLine:m.cursor.line,scrollOffset:m.scrollOffset,viewportHeight:m.viewportHeight,theme:h})}),s.jsx("div",{style:B,children:s.jsx(En,{state:m,theme:h,onBufferChange:p})})]}),s.jsx(Sn,{state:m,theme:h,filename:n,currentDirectory:e}),s.jsx("style",{children:`
        .vim-editor {
          font-variant-ligatures: none;
          -webkit-font-feature-settings: "liga" 0;
          font-feature-settings: "liga" 0;
        }
        
        .vim-editor:focus {
          outline: none;
        }
        
        .vim-cursor {
          animation: vim-blink 1s infinite;
          background-color: ${h.cursor};
          color: ${h.background};
        }
        
        .vim-current-line {
          background-color: ${h.currentLineBackground};
        }
        
        .vim-selection {
          background-color: ${h.selectionBackground};
        }
        
        .vim-search-highlight {
          background-color: ${h.searchHighlight};
          color: ${h.background};
        }
        
        @keyframes vim-blink {
          0%, 50% { opacity: 1; }
          51%, 100% { opacity: 0; }
        }
        
        /* Syntax highlighting */
        .vim-syntax-keyword { color: ${h.syntax.keyword}; font-weight: bold; }
        .vim-syntax-string { color: ${h.syntax.string}; }
        .vim-syntax-comment { color: ${h.syntax.comment}; font-style: italic; }
        .vim-syntax-number { color: ${h.syntax.number}; }
        .vim-syntax-operator { color: ${h.syntax.operator}; }
        .vim-syntax-identifier { color: ${h.syntax.identifier}; }
        .vim-syntax-type { color: ${h.syntax.type}; font-weight: bold; }
        
        /* Responsive design */
        @media (max-width: 768px) {
          .vim-editor {
            font-size: 12px;
          }
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
          .vim-editor {
            border: 2px solid ${h.foreground};
          }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
          .vim-cursor {
            animation: none;
            opacity: 1;
          }
        }
      `})]})})};class A{static convertToTerminalItem(e){return{name:e.name,isDirectory:e.type==="folder",path:e.path,permissions:"rwxr-xr-x",size:e.content?.length||0,modified:new Date}}static resolvePath(e,t){if(t.startsWith("/"))return this.normalizePath(t);if(t===".")return e;if(t===".."){const r=e.split("/").filter(Boolean);return r.pop(),`/${r.join("/")}`}if(t.startsWith("./")&&(t=t.substring(2)),t.startsWith("../")){const r=e.split("/").filter(Boolean),o=t.split("/");for(const i of o)i===".."?r.pop():i!=="."&&r.push(i);return`/${r.join("/")}`}return this.normalizePath(`${e}/${t}`)}static normalizePath(e){const t=e.split("/").filter(Boolean),r=[];for(const o of t)o!=="."&&(o===".."?r.pop():r.push(o));return`/${r.join("/")}`}static getParentDirectory(e){const t=e.split("/").filter(Boolean);return t.pop(),`/${t.join("/")}`}static getFilename(e){const t=e.split("/");return t[t.length-1]||""}static isSubdirectory(e,t){const r=this.normalizePath(e),o=this.normalizePath(t);return r===o?!1:o.startsWith(`${r}/`)}static findItemByPath(e,t){const r=this.normalizePath(t),o=i=>{for(const c of i){if(c.path===r)return c;if(c.children&&r.startsWith(`${c.path}/`)){const a=o(c.children);if(a)return a}}return null};return o(e)}static getDirectoryContents(e,t){const r=this.findItemByPath(e,t);return!r||r.type!=="folder"||!r.children?[]:r.children.map(o=>this.convertToTerminalItem(o))}static pathExists(e,t){return this.findItemByPath(e,t)!==null}static isDirectory(e,t){return this.findItemByPath(e,t)?.type==="folder"}static getFileContent(e,t){const r=this.findItemByPath(e,t);return!r||r.type!=="file"?null:r.content??""}static formatFileSize(e){if(e===0)return"0 B";const t=1024,r=["B","KB","MB","GB","TB"],o=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,o)).toFixed(2))} ${r[o]}`}static formatPermissions(e){return e}static getFileExtension(e){const t=e.lastIndexOf(".");return t>0?e.substring(t+1).toLowerCase():""}static isExecutable(e){const t=this.getFileExtension(e);return["exe","bat","cmd","sh","py","js","rb","pl"].includes(t)}static getPathCompletions(e,t,r){let o=t,i=r;if(r.startsWith("/")){const a=r.lastIndexOf("/");o=r.substring(0,a)||"/",i=r.substring(a+1)}else if(r.includes("/")){const a=r.lastIndexOf("/"),u=r.substring(0,a);o=this.resolvePath(t,u),i=r.substring(a+1)}return this.getDirectoryContents(e,o).filter(a=>a.name.toLowerCase().startsWith(i.toLowerCase())).map(a=>{const u=a.isDirectory?`${a.name}/`:a.name;if(r.startsWith("/"))return o==="/"?`/${u}`:`${o}/${u}`;if(r.includes("/")){const m=r.lastIndexOf("/");return r.substring(0,m+1)+u}return u}).sort((a,u)=>{const m=a.endsWith("/"),l=u.endsWith("/");return m&&!l?-1:!m&&l?1:a.localeCompare(u)})}}const ls={name:"ls",aliases:["ll"],description:"List directory contents",usage:"ls [options] [directory]",execute:(n,e)=>{const t=dt(n),r=n.filter(a=>!a.startsWith("-")),o=r.length>0?A.resolvePath(e.currentDirectory,r[0]):e.currentDirectory;if(!A.pathExists(e.fileSystem,o))return{success:!1,output:"",error:`ls: cannot access '${r[0]||o}': No such file or directory`,type:"error"};if(!A.isDirectory(e.fileSystem,o))return{success:!0,output:A.getFilename(o),type:"output"};const i=A.getDirectoryContents(e.fileSystem,o);if(i.length===0)return{success:!0,output:"",type:"output"};if(t.l||t.long)return{success:!0,output:i.map(u=>{const m=u.isDirectory?"drwxr-xr-x":"-rw-r--r--",l=u.isDirectory?"4096":(u.size||0).toString(),x=u.modified?.toLocaleDateString()||new Date().toLocaleDateString(),y=u.isDirectory?X.colorize(u.name,"directory"):X.colorize(u.name,"file");return`${m} 1 ${e.username} ${e.username} ${l.padStart(8)} ${x} ${y}`}).join(`
`),type:"output"};const c=i.map(a=>({name:a.name,isDirectory:a.isDirectory,isExecutable:A.isExecutable(a.name)}));return{success:!0,output:X.formatFileList(c),type:"output"}},autocomplete:(n,e,t)=>A.getPathCompletions(t.fileSystem,t.currentDirectory,n)},cs={name:"cd",aliases:[],description:"Change current directory",usage:"cd [directory]",execute:(n,e)=>{let t;return n.length===0?t="/Desktop":t=A.resolvePath(e.currentDirectory,n[0]),A.pathExists(e.fileSystem,t)?A.isDirectory(e.fileSystem,t)?{success:!0,output:"",newDirectory:t,type:"success"}:{success:!1,output:"",error:`cd: not a directory: ${n[0]}`,type:"error"}:{success:!1,output:"",error:`cd: no such file or directory: ${n[0]||"home"}`,type:"error"}},autocomplete:(n,e,t)=>A.getPathCompletions(t.fileSystem,t.currentDirectory,n).filter(r=>r.endsWith("/"))},us={name:"pwd",aliases:[],description:"Print current working directory",usage:"pwd",execute:(n,e)=>({success:!0,output:e.currentDirectory,type:"output"})},ds={name:"mkdir",aliases:[],description:"Create directories",usage:"mkdir [options] directory...",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"mkdir: missing operand",type:"error"};const t=u=>!u||u.trim()===""?"Empty name not allowed":/[<>:"|?*\x00-\x1f]/.test(u)?"Name contains illegal characters":["CON","PRN","AUX","NUL","COM1","COM2","COM3","COM4","COM5","COM6","COM7","COM8","COM9","LPT1","LPT2","LPT3","LPT4","LPT5","LPT6","LPT7","LPT8","LPT9"].includes(u.toUpperCase())?"Reserved name not allowed":u.startsWith(".")||u.endsWith(".")||u.startsWith(" ")||u.endsWith(" ")?"Name cannot start or end with dots or spaces":null,r=n.filter(u=>!u.startsWith("-")),o=[],i=[];for(const u of r){const m=t(u);if(m){i.push(`mkdir: cannot create directory '${u}': ${m}`);continue}const l=A.resolvePath(e.currentDirectory,u),x=A.getParentDirectory(l),y=A.getFilename(l);if(!A.pathExists(e.fileSystem,x)){i.push(`mkdir: cannot create directory '${u}': No such file or directory`);continue}e.createFolder?e.createFolder(x,y)?o.push(u):i.push(`mkdir: cannot create directory '${u}': File exists or permission denied`):i.push(`mkdir: cannot create directory '${u}': Operation not supported`)}let c="";o.length>0&&(c+=`Created ${o.length} director${o.length===1?"y":"ies"}: ${o.join(", ")}`);let a="";return i.length>0&&(a=i.join(`
`)),{success:o.length>0,output:c,error:i.length>0?a:void 0,type:o.length>0?"success":"error"}}},ms={name:"rmdir",aliases:[],description:"Remove empty directories",usage:"rmdir directory...",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"rmdir: missing operand",type:"error"};const t=[],r=[];for(const c of n){const a=A.resolvePath(e.currentDirectory,c);if(!A.pathExists(e.fileSystem,a)){r.push(`rmdir: failed to remove '${c}': No such file or directory`);continue}if(!A.isDirectory(e.fileSystem,a)){r.push(`rmdir: failed to remove '${c}': Not a directory`);continue}if(A.getDirectoryContents(e.fileSystem,a).length>0){r.push(`rmdir: failed to remove '${c}': Directory not empty`);continue}e.removeFileSystemItem?e.removeFileSystemItem(a)?t.push(c):r.push(`rmdir: failed to remove '${c}': Permission denied`):r.push(`rmdir: failed to remove '${c}': Operation not supported`)}let o="",i="";return t.length>0&&(o=`Removed ${t.length} director${t.length===1?"y":"ies"}: ${t.join(", ")}`),r.length>0&&(i=r.join(`
`)),{success:t.length>0,output:o,error:r.length>0?i:void 0,type:t.length>0?"success":"error"}}},ps={name:"touch",aliases:[],description:"Create empty files or update timestamps",usage:"touch file...",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"touch: missing file operand",type:"error"};const t=a=>{if(!a||a.trim()==="")return"Empty name not allowed";if(/[<>:"|?*\x00-\x1f]/.test(a))return"Name contains illegal characters";const m=["CON","PRN","AUX","NUL","COM1","COM2","COM3","COM4","COM5","COM6","COM7","COM8","COM9","LPT1","LPT2","LPT3","LPT4","LPT5","LPT6","LPT7","LPT8","LPT9"],[l]=a.split(".");return m.includes(l.toUpperCase())?"Reserved name not allowed":a.startsWith(" ")||a.endsWith(" ")?"Name cannot start or end with spaces":null},r=[],o=[];for(const a of n){const u=t(a);if(u){o.push(`touch: cannot create file '${a}': ${u}`);continue}const m=A.resolvePath(e.currentDirectory,a),l=A.getParentDirectory(m),x=A.getFilename(m);if(!A.pathExists(e.fileSystem,l)){o.push(`touch: cannot create file '${a}': No such file or directory`);continue}e.createFile?e.createFile(l,x,"")?r.push(a):o.push(`touch: cannot create file '${a}': File exists or permission denied`):o.push(`touch: cannot create file '${a}': Operation not supported`)}let i="";r.length>0&&(i+=`Created/updated ${r.length} file${r.length===1?"":"s"}: ${r.join(", ")}`);let c="";return o.length>0&&(c=o.join(`
`)),{success:r.length>0,output:i,error:o.length>0?c:void 0,type:r.length>0?"success":"error"}}},fs={name:"rm",aliases:[],description:"Remove files and directories",usage:"rm [options] file...",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"rm: missing operand",type:"error"};const t=dt(n),r=n.filter(u=>!u.startsWith("-")),o=[],i=[];for(const u of r){const m=A.resolvePath(e.currentDirectory,u);if(!A.pathExists(e.fileSystem,m)){!t.f&&!t.force&&i.push(`rm: cannot remove '${u}': No such file or directory`);continue}if(A.isDirectory(e.fileSystem,m)&&!t.r&&!t.recursive){!t.f&&!t.force&&i.push(`rm: cannot remove '${u}': Is a directory`);continue}A.isDirectory(e.fileSystem,m)&&(t.r||t.recursive)&&A.getDirectoryContents(e.fileSystem,m).length>0&&!t.f&&t.force,e.removeFileSystemItem?e.removeFileSystemItem(m)?o.push(u):!t.f&&!t.force&&i.push(`rm: cannot remove '${u}': Permission denied`):!t.f&&!t.force&&i.push(`rm: cannot remove '${u}': Operation not supported`)}let c="",a="";return o.length>0&&(c=`Removed ${o.length} item${o.length===1?"":"s"}: ${o.join(", ")}`),i.length>0&&(a=i.join(`
`)),{success:o.length>0,output:c,error:i.length>0?a:void 0,type:o.length>0?"success":"error"}}},hs={name:"cp",aliases:[],description:"Copy files or directories",usage:"cp [options] source destination",execute:(n,e)=>{if(n.length<2)return{success:!1,output:"",error:"cp: missing destination file operand",type:"error"};const t=n[n.length-2],r=n[n.length-1],o=A.resolvePath(e.currentDirectory,t);if(!A.pathExists(e.fileSystem,o))return{success:!1,output:"",error:`cp: cannot stat '${t}': No such file or directory`,type:"error"};if(A.isDirectory(e.fileSystem,o))return{success:!1,output:"",error:`cp: -r not specified; omitting directory '${t}'`,type:"error"};const i=A.getFileContent(e.fileSystem,o);if(i===null)return{success:!1,output:"",error:`cp: cannot open '${t}' for reading: Permission denied`,type:"error"};let c,a;return r.includes("/")||r==="."?(c=A.resolvePath(e.currentDirectory,r),A.pathExists(e.fileSystem,c)&&A.isDirectory(e.fileSystem,c)?a=A.getFilename(o):(a=A.getFilename(c),c=A.getParentDirectory(c))):(c=e.currentDirectory,a=r),A.pathExists(e.fileSystem,c)?e.createFile?e.createFile(c,a,i)?{success:!0,output:`Copied '${t}' to '${r}'`,type:"success"}:{success:!1,output:"",error:`cp: cannot create regular file '${r}': File exists or permission denied`,type:"error"}:{success:!1,output:"",error:"cp: Operation not supported",type:"error"}:{success:!1,output:"",error:`cp: cannot create regular file '${r}': No such file or directory`,type:"error"}}},gs={name:"mv",aliases:[],description:"Move/rename files or directories",usage:"mv source destination",execute:(n,e)=>{if(n.length<2)return{success:!1,output:"",error:"mv: missing destination file operand",type:"error"};const[t,r]=n,o=A.resolvePath(e.currentDirectory,t);if(!A.pathExists(e.fileSystem,o))return{success:!1,output:"",error:`mv: cannot stat '${t}': No such file or directory`,type:"error"};let i="";const c=A.isDirectory(e.fileSystem,o);if(!c){const l=A.getFileContent(e.fileSystem,o);if(l===null)return{success:!1,output:"",error:`mv: cannot open '${t}' for reading: Permission denied`,type:"error"};i=l}let a,u;if(r.includes("/")||r==="."?(a=A.resolvePath(e.currentDirectory,r),A.pathExists(e.fileSystem,a)&&A.isDirectory(e.fileSystem,a)?u=A.getFilename(o):(u=A.getFilename(a),a=A.getParentDirectory(a))):(a=e.currentDirectory,u=r),!A.pathExists(e.fileSystem,a))return{success:!1,output:"",error:`mv: cannot move '${t}' to '${r}': No such file or directory`,type:"error"};let m=!1;if(c?e.createFolder&&(m=e.createFolder(a,u)):e.createFile&&(m=e.createFile(a,u,i)),!m)return{success:!1,output:"",error:`mv: cannot create '${r}': File exists or permission denied`,type:"error"};if(e.removeFileSystemItem){if(!e.removeFileSystemItem(o))return{success:!1,output:"",error:`mv: cannot remove '${t}': Permission denied`,type:"error"}}else return{success:!1,output:"",error:"mv: Operation not supported",type:"error"};return{success:!0,output:`Moved '${t}' to '${r}'`,type:"success"}}},ys={name:"cat",aliases:[],description:"Display file contents",usage:"cat file...",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"cat: missing file operand",type:"error"};const t=[];for(const r of n){const o=A.resolvePath(e.currentDirectory,r);if(!A.pathExists(e.fileSystem,o)){t.push(`cat: ${r}: No such file or directory`);continue}if(A.isDirectory(e.fileSystem,o)){t.push(`cat: ${r}: Is a directory`);continue}const i=A.getFileContent(e.fileSystem,o);i!==null?t.push(i):t.push(`cat: ${r}: Permission denied`)}return{success:!0,output:t.join(`
`),type:"output"}},autocomplete:(n,e,t)=>A.getPathCompletions(t.fileSystem,t.currentDirectory,n).filter(r=>!r.endsWith("/"))},xs={name:"grep",aliases:[],description:"Search text patterns in files",usage:"grep [options] pattern [file...]",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"grep: missing pattern",type:"error"};const[t]=n,r=n.slice(1);if(r.length===0)return{success:!0,output:`Searching for pattern '${t}' in standard input...`,type:"output"};const o=[];for(const i of r){const c=A.resolvePath(e.currentDirectory,i),a=A.getFileContent(e.fileSystem,c);if(a){const m=a.split(`
`).filter(l=>l.includes(t));m.length>0&&(o.push(`${i}:`),o.push(...m.map(l=>`  ${l}`)))}}return{success:!0,output:o.length>0?o.join(`
`):`No matches found for '${t}'`,type:"output"}}},bs={name:"find",aliases:[],description:"Search for files and directories",usage:"find [path] [options]",execute:(n,e)=>{const t=n.length>0&&!n[0].startsWith("-")?n[0]:e.currentDirectory,r=n.find((i,c)=>n[c-1]==="-name");return r?{success:!0,output:[`${t}/example1.txt`,`${t}/subfolder/example2.txt`,`${t}/documents/readme.md`].filter(i=>i.includes(r)).join(`
`),type:"output"}:{success:!0,output:`Searching in ${t}...`,type:"output"}}};function dt(n){const e={};return n.forEach(t=>{t.startsWith("--")?e[t.substring(2)]=!0:t.startsWith("-")&&t.substring(1).split("").forEach(r=>{e[r]=!0})}),e}const vs=[ls,cs,us,ds,ms,ps,fs,hs,gs,ys,xs,bs],Cs={name:"dir",aliases:[],description:"Display directory contents",usage:"dir [path]",execute:(n,e)=>{const t=n.length>0?A.resolvePath(e.currentDirectory,n[0]):e.currentDirectory;if(!A.pathExists(e.fileSystem,t))return{success:!1,output:"",error:"The system cannot find the path specified.",type:"error"};if(!A.isDirectory(e.fileSystem,t))return{success:!0,output:A.getFilename(t),type:"output"};const r=A.getDirectoryContents(e.fileSystem,t);if(r.length===0)return{success:!0,output:"Directory is empty.",type:"output"};const o=[" Volume in drive C has no label."," Volume Serial Number is 1234-5678","",` Directory of ${t}`,""],i=r.map(l=>{const x=l.modified?.toLocaleDateString("en-US")||new Date().toLocaleDateString("en-US"),y=l.modified?.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"})||"00:00",f=l.isDirectory?"<DIR>":(l.size||0).toString().padStart(15),C=l.isDirectory?X.colorize(l.name,"directory"):X.colorize(l.name,"file");return`${x}  ${y}    ${f} ${C}`}),c=r.filter(l=>!l.isDirectory).length,a=r.filter(l=>l.isDirectory).length,u=r.reduce((l,x)=>l+(x.size||0),0),m=["",`               ${c} File(s)  ${u.toLocaleString()} bytes`,`               ${a} Dir(s)   999,999,999 bytes free`];return{success:!0,output:[...o,...i,...m].join(`
`),type:"output"}},autocomplete:(n,e,t)=>A.getPathCompletions(t.fileSystem,t.currentDirectory,n)},ks={name:"cd",aliases:["chdir"],description:"Change current directory",usage:"cd [directory]",execute:(n,e)=>{if(n.length===0)return{success:!0,output:e.currentDirectory,type:"output"};const t=A.resolvePath(e.currentDirectory,n[0]);return A.pathExists(e.fileSystem,t)?A.isDirectory(e.fileSystem,t)?{success:!0,output:"",newDirectory:t,type:"success"}:{success:!1,output:"",error:"The directory name is invalid.",type:"error"}:{success:!1,output:"",error:"The system cannot find the path specified.",type:"error"}},autocomplete:(n,e,t)=>A.getPathCompletions(t.fileSystem,t.currentDirectory,n).filter(r=>r.endsWith("/"))},ws={name:"md",aliases:["mkdir"],description:"Create directories",usage:"md directory",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"The syntax of the command is incorrect.",type:"error"};const t=[],r=[];for(const c of n)e.createFolder&&e.createFolder(e.currentDirectory,c)?t.push(c):r.push(c);let o="";t.length>0&&(o+=t.map(c=>`Directory created: ${c}`).join(`
`));let i="";return r.length>0&&(i=`A subdirectory or file ${r.join(", ")} already exists.`),{success:t.length>0,output:o,error:r.length>0?i:void 0,type:t.length>0?"success":"error"}}},Ss={name:"rd",aliases:["rmdir"],description:"Remove directories",usage:"rd directory",execute:n=>n.length===0?{success:!1,output:"",error:"The syntax of the command is incorrect.",type:"error"}:{success:!0,output:`Directory removed: ${n[0]}`,type:"success"}},js={name:"del",aliases:["erase"],description:"Delete files",usage:"del filename",execute:n=>{if(n.length===0)return{success:!1,output:"",error:"The syntax of the command is incorrect.",type:"error"};const e=n.filter(t=>!t.startsWith("/"));return{success:!0,output:`Deleted ${e.length} file${e.length===1?"":"s"}.`,type:"success"}}},Ns={name:"copy",aliases:[],description:"Copy files",usage:"copy source destination",execute:n=>{if(n.length<2)return{success:!1,output:"",error:"The syntax of the command is incorrect.",type:"error"};const[e,t]=n;return{success:!0,output:`        1 file(s) copied.
        ${e} -> ${t}`,type:"success"}}},_s={name:"move",aliases:[],description:"Move files and directories",usage:"move source destination",execute:n=>{if(n.length<2)return{success:!1,output:"",error:"The syntax of the command is incorrect.",type:"error"};const[e,t]=n;return{success:!0,output:`        1 file(s) moved.
        ${e} -> ${t}`,type:"success"}}},Ts={name:"type",aliases:[],description:"Display file contents",usage:"type filename",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"The syntax of the command is incorrect.",type:"error"};const[t]=n,r=A.resolvePath(e.currentDirectory,t);if(!A.pathExists(e.fileSystem,r))return{success:!1,output:"",error:"The system cannot find the file specified.",type:"error"};if(A.isDirectory(e.fileSystem,r))return{success:!1,output:"",error:"Access is denied.",type:"error"};const o=A.getFileContent(e.fileSystem,r);return o!==null?{success:!0,output:o,type:"output"}:{success:!1,output:"",error:"Access is denied.",type:"error"}},autocomplete:(n,e,t)=>A.getPathCompletions(t.fileSystem,t.currentDirectory,n).filter(r=>!r.endsWith("/"))},$s={name:"attrib",aliases:[],description:"Display or change file attributes",usage:"attrib [+R | -R] [+A | -A] [+S | -S] [+H | -H] [filename]",execute:(n,e)=>{if(n.length===0)return{success:!0,output:A.getDirectoryContents(e.fileSystem,e.currentDirectory).map(c=>`${c.isDirectory?"    ":"A   "} ${c.path}`).join(`
`),type:"output"};const t=n[n.length-1];return{success:!0,output:`Attributes ${n.slice(0,-1).join(" ")} set for ${t}`,type:"success"}}},Ms={name:"ver",aliases:[],description:"Display system version",usage:"ver",execute:()=>({success:!0,output:"Portfolio Desktop OS [Version 1.0.0]",type:"output"})},Is={name:"time",aliases:[],description:"Display or set system time",usage:"time [new-time]",execute:n=>n.length===0?{success:!0,output:`The current time is: ${new Date().toLocaleTimeString()}`,type:"output"}:{success:!0,output:`Time set to: ${n[0]}`,type:"success"}},Es={name:"findstr",aliases:[],description:"Search for text in files",usage:"findstr [options] string [filename]",execute:(n,e)=>{if(n.length===0)return{success:!1,output:"",error:"The syntax of the command is incorrect.",type:"error"};const[t]=n,r=n.slice(1);if(r.length===0)return{success:!0,output:`Searching for "${t}" in standard input...`,type:"output"};const o=[];for(const i of r){const c=A.resolvePath(e.currentDirectory,i),a=A.getFileContent(e.fileSystem,c);a&&a.split(`
`).forEach((m,l)=>{m.includes(t)&&o.push(`${i}:${l+1}:${m}`)})}return{success:!0,output:o.length>0?o.join(`
`):"String not found.",type:"output"}}},Ds={name:"ipconfig",aliases:[],description:"Display network configuration",usage:"ipconfig [options]",execute:n=>n.includes("/all")?{success:!0,output:["Windows IP Configuration","","   Host Name . . . . . . . . . . . . : portfolio-desktop","   Primary Dns Suffix  . . . . . . . : ","   Node Type . . . . . . . . . . . . : Hybrid","   IP Routing Enabled. . . . . . . . : No","   WINS Proxy Enabled. . . . . . . . : No","","Ethernet adapter Local Area Connection:","","   Connection-specific DNS Suffix  . : ","   Description . . . . . . . . . . . : Intel(R) Ethernet Connection","   Physical Address. . . . . . . . . : 00-1B-21-12-34-56","   DHCP Enabled. . . . . . . . . . . : Yes","   Autoconfiguration Enabled . . . . : Yes","   IPv4 Address. . . . . . . . . . . : 192.168.1.100(Preferred)","   Subnet Mask . . . . . . . . . . . : 255.255.255.0","   Default Gateway . . . . . . . . . : 192.168.1.1","   DHCP Server . . . . . . . . . . . : 192.168.1.1","   DNS Servers . . . . . . . . . . . : 8.8.8.8","                                       8.8.4.4"].join(`
`),type:"output"}:{success:!0,output:["Windows IP Configuration","","Ethernet adapter Local Area Connection:","","   Connection-specific DNS Suffix  . : ","   IPv4 Address. . . . . . . . . . . : 192.168.1.100","   Subnet Mask . . . . . . . . . . . : 255.255.255.0","   Default Gateway . . . . . . . . . : 192.168.1.1"].join(`
`),type:"output"}},Rs={name:"nslookup",aliases:[],description:"Query DNS servers",usage:"nslookup [hostname]",execute:async n=>{if(n.length===0)return{success:!0,output:["Default Server:  dns.google","Address:  8.8.8.8","",">"].join(`
`),type:"output"};const[e]=n;return await new Promise(t=>setTimeout(t,500)),{success:!0,output:["Server:  dns.google","Address:  8.8.8.8","",`Name:    ${e}`,"Address:  93.184.216.34"].join(`
`),type:"output"}}},Fs=[Cs,ks,ws,Ss,js,Ns,_s,Ts,$s,Ms,Is,Es,Ds,Rs],mt=n=>new Promise(e=>setTimeout(e,n)),Ls=async n=>{await mt(Math.random()*500+200);const e=Math.random()>.1,t=Math.floor(Math.random()*100)+10;return e?{success:!0,data:`PING ${n}: 64 bytes from ${n}: icmp_seq=1 ttl=64 time=${t} ms`,responseTime:t}:{success:!1,data:`ping: cannot resolve ${n}: Unknown host`,responseTime:0,error:"Host unreachable"}},Te={name:"clear",aliases:["cls"],description:"Clear the terminal screen",usage:"clear",execute:()=>({success:!0,output:"",clear:!0,type:"success"})},$e={name:"exit",aliases:["quit"],description:"Exit the terminal",usage:"exit",execute:()=>({success:!0,output:"Goodbye!",exit:!0,type:"info"})},Me={name:"help",aliases:["?"],description:"Display available commands",usage:"help [command]",execute:(n,e)=>{const t=e.osType==="windows";if(n.length>0)return{success:!0,output:As(n[0]),type:"info"};const r=t?xt():yt();return{success:!0,output:[X.colorize("Available Commands:","info"),"",...r.map(i=>`  ${X.colorize(i.name.padEnd(12),"success")} ${i.description}`),"",'Type "help <command>" for more information about a specific command.',`Current OS: ${X.colorize(t?"Windows":"Linux","warning")}`].join(`
`),type:"info"}}},Ie={name:"echo",aliases:[],description:"Display text",usage:"echo [text...]",execute:n=>({success:!0,output:n.join(" "),type:"output"})},Ee={name:"date",aliases:[],description:"Display current date and time",usage:"date",execute:()=>({success:!0,output:new Date().toString(),type:"output"})},De={name:"whoami",aliases:[],description:"Display current username",usage:"whoami",execute:(n,e)=>({success:!0,output:e.username,type:"output"})},Re={name:"ping",aliases:[],description:"Send ICMP echo requests to a host",usage:"ping <host>",execute:async n=>{if(n.length===0)return{success:!1,output:"",error:"ping: missing host argument",type:"error"};const[e]=n,t=[];t.push(`PING ${e} (${e}): 56 data bytes`);for(let r=1;r<=4;r++){const o=await Ls(e);if(o.success)t.push(o.data.replace("icmp_seq=1",`icmp_seq=${r}`));else{t.push(o.data);break}}return{success:!0,output:t.join(`
`),type:"output"}}},pt={name:"curl",aliases:[],description:"Transfer data from servers",usage:"curl <url>",execute:async n=>{if(n.length===0)return{success:!1,output:"",error:"curl: no URL specified",type:"error"};const[e]=n;return await mt(1e3),Math.random()>.2?{success:!0,output:`HTTP/1.1 200 OK
Content-Type: text/html

<!DOCTYPE html>
<html>
<head><title>Example</title></head>
<body><h1>Hello World!</h1></body>
</html>`,type:"output"}:{success:!1,output:"",error:`curl: (6) Could not resolve host: ${e}`,type:"error"}}},ft={name:"ps",aliases:[],description:"Display running processes",usage:"ps [options]",execute:()=>{const n=[{pid:1,name:"init",cpu:0,memory:"1.2M",state:"S",startTime:"00:00"},{pid:123,name:"terminal",cpu:2.5,memory:"15.4M",state:"R",startTime:"10:30"},{pid:456,name:"browser",cpu:5.2,memory:"128.7M",state:"S",startTime:"09:15"},{pid:789,name:"editor",cpu:1.8,memory:"45.3M",state:"S",startTime:"11:20"}],e="PID     NAME        CPU%   MEM     STATE  START",t=n.map(r=>`${r.pid.toString().padEnd(8)}${r.name.padEnd(12)}${r.cpu.toFixed(1).padEnd(7)}${r.memory.padEnd(8)}${r.state.padEnd(7)}${r.startTime}`);return{success:!0,output:[e,...t].join(`
`),type:"output"}}},ht={name:"uptime",aliases:[],description:"Show system uptime and load",usage:"uptime",execute:()=>({success:!0,output:`${new Date().toLocaleTimeString()} up 2 days, 14:32, 1 user, load average: 0.15, 0.23, 0.18`,type:"output"})},gt={name:"uname",aliases:[],description:"Display system information",usage:"uname [-a]",execute:n=>{const e={os:"Portfolio-OS",version:"1.0.0",arch:"x86_64",hostname:"thalison",datetime:new Date().toISOString()};return n.includes("-a")||n.includes("--all")?{success:!0,output:`${e.os} ${e.hostname} ${e.version} ${e.arch}`,type:"output"}:{success:!0,output:e.os,type:"output"}}};function As(n,e){const r=[...yt(),...xt()].find(o=>o.name===n||o.aliases.includes(n));return r?[X.colorize(`${r.name}`,"success"),`Description: ${r.description}`,`Usage: ${r.usage}`,r.aliases.length>0?`Aliases: ${r.aliases.join(", ")}`:""].filter(Boolean).join(`
`):`Command '${n}' not found.`}function yt(){return[Te,$e,Me,Ie,Ee,De,Re,pt,ft,ht,gt]}function xt(){return[Te,$e,Me,Ie,Ee,De,Re]}const Ps={name:"vim",aliases:["vi"],description:"Open vim text editor (LunarVim-inspired)",usage:"vim [filename]",execute:async(n,e)=>{const t=n[0];return t&&(t.includes("..")||t.startsWith("/"))?{success:!1,output:"",error:`vim: "${t}": Invalid filename`,type:"error"}:{success:!0,output:"",type:"vim",vimData:{filename:t,currentDirectory:e.currentDirectory}}},autocomplete:(n,e,t)=>{if(e.length<=1)try{return(t.fileSystem||[]).filter(o=>!o.isFolder&&o.name.startsWith(n)).map(o=>o.name).slice(0,10)}catch{return[]}return[]}};class Os{commands=new Map;aliases=new Map;constructor(e){this.initializeCommands(e)}initializeCommands(e){this.commands.clear(),this.aliases.clear();const t=[Te,$e,Me,Ie,Ee,De,Re],r=e==="linux"?[...vs,pt,ft,ht,gt]:Fs;[...t,...r,Ps].forEach(o=>{this.commands.set(o.name,o),o.aliases.forEach(i=>{this.aliases.set(i,o.name)})})}getCommand(e){const t=this.aliases.get(e);return t?this.commands.get(t):this.commands.get(e)}getAllCommands(){return Array.from(this.commands.values())}getCommandSuggestions(e){const t=[];return this.commands.forEach((r,o)=>{o.startsWith(e.toLowerCase())&&t.push(o)}),this.aliases.forEach((r,o)=>{o.startsWith(e.toLowerCase())&&t.push(o)}),t.sort()}hasCommand(e){return this.commands.has(e)||this.aliases.has(e)}getArgumentSuggestions(e,t,r,o){const i=this.getCommand(e);if(!i||!i.autocomplete)return[];try{return i.autocomplete(t,r,o)}catch(c){return console.warn(`Autocomplete error for command ${e}:`,c),[]}}switchOS(e){this.initializeCommands(e)}getCommandUsage(e){return this.getCommand(e)?.usage}getCommandDescription(e){return this.getCommand(e)?.description}getAllCommandNames(){const e=Array.from(this.commands.keys()),t=Array.from(this.aliases.keys());return[...e,...t]}}function Ke(n){return new Os(n)}class bt{static parse(e){const t=e.trim();if(!t)return{command:"",args:[],raw:e,flags:{}};const r=this.tokenize(t);if(r.length===0)return{command:"",args:[],raw:e,flags:{}};const o=r[0],i=r.slice(1),c=[],a={};for(let u=0;u<i.length;u++){const m=i[u];if(m.startsWith("--")){const[l,...x]=m.substring(2).split("=");x.length>0?a[l]=x.join("="):u+1<i.length&&!i[u+1].startsWith("-")?(a[l]=i[u+1],u++):a[l]=!0}else if(m.startsWith("-")&&m.length>1){const l=m.substring(1);for(let x=0;x<l.length;x++){const y=l[x];x===l.length-1&&u+1<i.length&&!i[u+1].startsWith("-")?(a[y]=i[u+1],u++):a[y]=!0}}else c.push(m)}return{command:o,args:c,raw:e,flags:a}}static tokenize(e){const t=[];let r="",o=!1,i="",c=!1;for(let a=0;a<e.length;a++){const u=e[a];if(c){r+=u,c=!1;continue}if(u==="\\"){c=!0;continue}if((u==='"'||u==="'")&&!o){o=!0,i=u;continue}if(u===i&&o){o=!1,i="";continue}if(u===" "&&!o){r&&(t.push(r),r="");continue}r+=u}return r&&t.push(r),t}static escape(e){return e.replace(/[\\'"$`]/g,"\\$&")}static needsQuoting(e){return/[\s'"$`\\]/.test(e)}static quote(e){return this.needsQuoting(e)?`"${e.replace(/["\\]/g,"\\$&")}"`:e}}const Bs=15;function zs(n,e=Bs){const[t,r]=d.useState([]),[o,i]=d.useState(-1),c=k=>`terminal-command-history-${k}`;d.useEffect(()=>{try{const k=c(n),N=localStorage.getItem(k);if(N){const b=JSON.parse(N);Array.isArray(b)&&r(b.slice(-e))}else r([]);i(-1)}catch(k){console.warn("Failed to load command history from localStorage:",k)}},[e,n]),d.useEffect(()=>{try{const k=c(n);localStorage.setItem(k,JSON.stringify(t))}catch(k){console.warn("Failed to save command history to localStorage:",k)}},[t,n]);const a=d.useCallback(k=>{const N=k.trim();N&&(r(b=>[...b,N].slice(-e)),i(-1))},[e]),u=d.useCallback(k=>{if(t.length===0)return null;let N;if(k==="up")o===-1?N=t.length-1:o>0?N=o-1:N=0;else{if(o===-1)return null;o<t.length-1?N=o+1:N=-1}return i(N),N===-1?"":t[N]},[t,o]),m=d.useCallback(k=>{if(!k.trim())return t;const N=k.toLowerCase();return t.filter(b=>b.toLowerCase().includes(N)).slice(-20)},[t]),l=d.useCallback(()=>o===-1||o>=t.length?null:t[o],[t,o]),x=d.useCallback(()=>{i(-1)},[]),y=d.useCallback(()=>{r([]),i(-1);try{const k=c(n);localStorage.removeItem(k)}catch(k){console.warn("Failed to clear command history from localStorage:",k)}},[n]),f=d.useCallback((k=10)=>t.slice(-k),[t]),C=t.length>0,p=o<t.length-1||o===-1,w=o>0;return{history:t,historyIndex:o,addToHistory:a,navigateHistory:u,searchHistory:m,getCurrentHistoryEntry:l,resetHistoryIndex:x,clearHistory:y,getRecentCommands:f,hasHistory:C,canNavigateUp:p,canNavigateDown:w}}function Hs(n,e,t,r){const[o,i]=d.useState([]),[c,a]=d.useState(-1),[u,m]=d.useState(!1),l=d.useCallback((S,T)=>{const $=S.trim();if(!$)return{completions:[],commonPrefix:"",hasExactMatch:!1};bt.parse($);const h=$.split(/\s+/),_=Math.max(0,$.substring(0,T).split(/\s+/).length-1),R=h[_]||"";let L=[],B="";if(_===0)L=n.getCommandSuggestions(R),B=Ye(L);else{const[E]=h,M=h.slice(1,_);try{L=n.getArgumentSuggestions(E,R,M,{currentDirectory:e,fileSystem:t,osType:r,env:{},history:[],username:"user",hostname:"desktop"}),B=Ye(L)}catch(O){console.warn("Error generating argument suggestions:",O),L=[]}}const F=L.includes(R);return{completions:L.slice(0,20),commonPrefix:B,hasExactMatch:F}},[n,e,t,r]),x=d.useCallback((S,T)=>{const $=l(S,T),h=S.trim(),_=h.split(/\s+/),R=Math.max(0,h.substring(0,T).split(/\s+/).length-1),L=_[R]||"",B=$.completions.length===0||L&&$.completions.includes(L)||L&&$.completions.every(F=>L.length>=F.length);return i($.completions),a(-1),m(!B&&$.completions.length>0),$},[l]),y=d.useCallback(S=>{if(o.length===0)return null;let T;return S==="up"?T=c<=0?o.length-1:c-1:T=c>=o.length-1?0:c+1,a(T),o[T]},[o,c]),f=d.useCallback(S=>S<0||S>=o.length?null:(a(S),o[S]),[o]),C=d.useCallback(()=>c<0||c>=o.length?null:o[c],[o,c]),p=d.useCallback((S,T,$)=>{const h=$||C();if(!h)return{newInput:S,newCursorPosition:T};const _=S.split(/\s+/),R=S.substring(0,T),L=Math.max(0,R.split(/\s+/).length-1);_[L]=h;const B=_.join(" "),F=_.slice(0,L),E=F.join(" ").length+(F.length>0?1:0)+h.length;return{newInput:B,newCursorPosition:E}},[C]),w=d.useCallback(()=>{m(!1),a(-1)},[]),k=d.useCallback(()=>{o.length>0&&m(!0)},[o.length]),N=d.useCallback(()=>{i([]),a(-1),m(!1)},[]),b=d.useCallback((S,T)=>{const $=l(S,T);if($.completions.length===1)return p(S,T,$.completions[0]);if($.completions.length>1&&$.commonPrefix){const h=S.split(/\s+/),_=S.substring(0,T),R=Math.max(0,_.split(/\s+/).length-1),L=h[R]||"";if($.commonPrefix.length>L.length)return p(S,T,$.commonPrefix)}return x(S,T),{newInput:S,newCursorPosition:T}},[l,p,x]),v=o.length>0,j=c>=0&&c<o.length;return{suggestions:o,selectedIndex:c,isVisible:u,hasSuggestions:v,hasSelection:j,updateSuggestions:x,navigateSuggestions:y,selectSuggestion:f,getSelectedSuggestion:C,applyCompletion:p,getTabCompletion:b,hideSuggestions:w,showSuggestions:k,clearSuggestions:N}}function Ye(n){if(n.length===0)return"";if(n.length===1)return n[0];let e="";const[t]=n;for(let r=0;r<t.length;r++){const o=t[r];if(n.every(i=>i[r]===o))e+=o;else break}return e}function Ws(){const{fileSystem:n,createFile:e,createFolder:t,removeFileSystemItem:r}=J(),[o,i]=d.useState({output:[],currentInput:"",currentDirectory:"/Desktop",history:[],historyIndex:-1,osType:"linux",isExecuting:!1,theme:ge,username:"portfolio",hostname:"thalison",env:{PATH:"/usr/local/bin:/usr/bin:/bin",HOME:"/Desktop",USER:"portfolio"},suggestions:[],showSuggestions:!1,selectedSuggestion:-1,cursorPosition:0}),c=d.useRef(Ke(o.osType)),a=c.current,u=d.useRef(!1),{addToHistory:m,navigateHistory:l,searchHistory:x,resetHistoryIndex:y,clearHistory:f}=zs(o.osType),{suggestions:C,selectedIndex:p,isVisible:w,updateSuggestions:k,navigateSuggestions:N,getTabCompletion:b,hideSuggestions:v,clearSuggestions:j}=Hs(a,o.currentDirectory,n,o.osType);d.useEffect(()=>{c.current=Ke(o.osType),i(E=>({...E,theme:E.osType==="linux"?ge:Ue}))},[o.osType]);const S=d.useCallback((E,M="output")=>{const O=ne.acquire();O.id=`line-${Date.now()}-${Math.random()}`,O.content=E,O.type=M,O.timestamp=new Date,O.className="",i(z=>{const V=[...z.output,O];let g=V;return V.length>1e3&&(V.slice(0,V.length-1e3).forEach(D=>ne.release(D)),g=V.slice(-1e3)),{...z,output:g}})},[]),T=d.useCallback(()=>{i(E=>(E.output.forEach(M=>ne.release(M)),{...E,output:[]}))},[]),$=d.useCallback((E,M,O)=>{i(z=>({...z,currentInput:E,cursorPosition:M??E.length})),O||y(),E.trim()?k(E,M??E.length):j()},[y,k,j]),h=d.useCallback(()=>{if(o.osType==="windows"){const M=`C:\\${o.currentDirectory.replace(/\//g,"\\")}`;return`<span style="color: ${o.theme.prompt}; font-weight: bold;">${M}></span> `}const E=o.currentDirectory==="/Desktop"?"~":o.currentDirectory;return`<span style="color: ${o.theme.success}; font-weight: bold;">${o.username}</span><span style="color: ${o.theme.foreground};">@</span><span style="color: ${o.theme.directory}; font-weight: bold;">${o.hostname}</span><span style="color: ${o.theme.foreground};">:</span><span style="color: ${o.theme.directory}; font-weight: bold;">${E}</span><span style="color: ${o.theme.prompt}; font-weight: bold;">$</span> `},[o.osType,o.currentDirectory,o.username,o.hostname,o.theme]),_=d.useCallback(async E=>{const M=E.trim(),O=h();if(S(`${O}${E}`,"input"),!M){i(z=>({...z,currentInput:"",cursorPosition:0}));return}m(M),i(z=>({...z,isExecuting:!0}));try{const z=bt.parse(M);if(!z.command){i(D=>({...D,isExecuting:!1}));return}const V=a.getCommand(z.command);if(!V){const D=o.osType==="windows"?`'${z.command}' is not recognized as an internal or external command, operable program or batch file.`:`${z.command}: command not found`;S(D,"error"),i(P=>({...P,isExecuting:!1}));return}const g={currentDirectory:o.currentDirectory,osType:o.osType,env:o.env,history:o.history,fileSystem:n,username:o.username,hostname:o.hostname,createFile:e,createFolder:t,removeFileSystemItem:r},I=await V.execute(z.args,g);if(I.type==="vim"&&I.vimData){i(D=>({...D,isVimMode:!0,vimData:I.vimData,isExecuting:!1,currentInput:"",cursorPosition:0}));return}I.clear?T():I.output&&S(I.output,(I.type==="vim"?"output":I.type)||"output"),I.error&&S(I.error,"error"),I.newDirectory&&i(D=>({...D,currentDirectory:I.newDirectory})),I.exit&&S("Terminal session ended.","info")}catch(z){console.error("Command execution error:",z),S(`Error executing command: ${z}`,"error")}finally{i(z=>({...z,isExecuting:!1,currentInput:"",cursorPosition:0})),v()}},[o.osType,o.currentDirectory,o.username,o.hostname,o.env,o.history,S,m,a,n,T,v,h,e,t,r]),R=d.useCallback(E=>{if(!o.isExecuting)switch(E.key){case"Enter":E.preventDefault(),_(o.currentInput);break;case"ArrowUp":if(E.preventDefault(),w)N("up");else{const M=l("up");M!==null&&$(M,void 0,!0)}break;case"ArrowDown":if(E.preventDefault(),w)N("down");else{const M=l("down");M!==null&&$(M,void 0,!0)}break;case"Tab":{E.preventDefault();const M=b(o.currentInput,o.cursorPosition);$(M.newInput,M.newCursorPosition);break}case"Escape":E.preventDefault(),v();break;case"c":if(E.ctrlKey){E.preventDefault();const M=h();S(`${M}${o.currentInput}^C`,"input"),$(""),v()}break;case"l":E.ctrlKey&&(E.preventDefault(),T());break;case"r":E.ctrlKey&&(E.preventDefault(),S("(reverse-i-search): ","info"));break}},[o.isExecuting,o.currentInput,o.cursorPosition,w,_,N,l,b,$,v,S,T,h]),L=d.useCallback(E=>{o.osType!==E&&(i(M=>({...M,osType:E,theme:E==="linux"?ge:Ue})),a.switchOS(E),S(`Switched to ${E==="linux"?"Linux":"Windows"} mode`,"info"))},[o.osType,a,S]),B=d.useCallback(()=>{i(E=>({...E,isVimMode:!1,vimData:void 0}))},[]),F=d.useCallback(()=>{if(o.osType==="windows")return`C:\\${o.currentDirectory.replace(/\//g,"\\")}> `;const E=o.currentDirectory==="/Desktop"?"~":o.currentDirectory;return`${o.username}@${o.hostname}:${E}$ `},[o.osType,o.currentDirectory,o.username,o.hostname]);return d.useEffect(()=>{if(u.current)return;["Portfolio Desktop Terminal v1.0.0",`Running in ${o.osType==="linux"?"Linux":"Windows"} mode`,'Type "help" for available commands',"Use Ctrl+L to clear, Ctrl+C to interrupt",""].forEach(M=>S(M,"info")),u.current=!0},[S,o.osType]),d.useEffect(()=>{const E=setInterval(()=>{ye.forceGC();const M=ye.getAllStats();M.terminalLines.poolSize>150&&console.log("Terminal: Pool statistics",M)},3e4);return()=>{clearInterval(E)}},[]),d.useEffect(()=>()=>{o.output.forEach(E=>ne.release(E)),ye.clearAll()},[o.output]),{output:o.output,currentInput:o.currentInput,currentDirectory:o.currentDirectory,osType:o.osType,isExecuting:o.isExecuting,theme:o.theme,username:o.username,hostname:o.hostname,cursorPosition:o.cursorPosition,isVimMode:o.isVimMode,vimData:o.vimData,suggestions:C,selectedIndex:p,showSuggestions:w,updateInput:$,executeCommand:_,clearOutput:T,switchOS:L,handleKeyDown:R,getCurrentPrompt:F,exitVimMode:B,clearHistory:f,searchHistory:x,commandRegistry:a,fileSystem:n,createFile:e,createFolder:t,removeFileSystemItem:r}}const Us=({initialOS:n="linux",showOSSwitcher:e=!0})=>{const t=d.useRef(null),[r,o]=d.useState(!1),i=d.useRef(null),{output:c,currentInput:a,currentDirectory:u,osType:m,isExecuting:l,theme:x,username:y,hostname:f,cursorPosition:C,isVimMode:p,vimData:w,suggestions:k,selectedIndex:N,showSuggestions:b,updateInput:v,clearOutput:j,switchOS:S,handleKeyDown:T,clearHistory:$,exitVimMode:h,createFile:_,commandRegistry:R}=Ws();i.current=T,d.useEffect(()=>{const D=t.current;if(!D)return;const P=()=>{const q=D.querySelector(".terminal-input");q&&q.focus()},H=q=>{const W=D.contains(document.activeElement),K=document.activeElement?.classList.contains("terminal-input");if(q.ctrlKey&&!K&&i.current){i.current(q);return}K||W&&i.current&&i.current(q)};return D.addEventListener("click",P),document.addEventListener("keydown",H),()=>{D.removeEventListener("click",P),document.removeEventListener("keydown",H)}},[]),d.useEffect(()=>{r||(n!==m&&S(n),o(!0))},[n,m,S,r]);const L=D=>{S(D)},B=async(D,P)=>{try{return _?.(w?.currentDirectory||u,D,P)||!1}catch(H){return console.error("Error saving file:",H),!1}},F=async D=>"",E=D=>!1,M={display:"flex",flexDirection:"column",height:"100%",width:"100%",backgroundColor:x.background,color:x.foreground,fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "Courier New", monospace',fontSize:"14px",overflow:"hidden",position:"relative"},O={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 16px",backgroundColor:x.selection,borderBottom:`1px solid ${x.comment}`,fontSize:"12px",color:x.comment},z={display:"flex",gap:"8px",alignItems:"center"},V=(D,P=!1)=>({padding:"4px 8px",border:"none",backgroundColor:D?x.foreground:"transparent",color:D?x.background:x.comment,fontSize:"11px",borderRadius:"3px",cursor:P?"not-allowed":"pointer",fontFamily:"inherit",transition:"all 0.2s ease",opacity:P&&!D?.5:1}),g={display:"flex",alignItems:"center",gap:"8px",fontSize:"11px",fontWeight:"bold"},I={display:"flex",alignItems:"center",gap:"12px",fontSize:"11px"};return s.jsxs("div",{ref:t,style:M,className:"terminal-app",tabIndex:0,role:"application","aria-label":"Terminal Application",children:[p&&w?s.jsx(as,{filename:w.filename,currentDirectory:w.currentDirectory,theme:x,onExit:h,onSaveFile:B,onLoadFile:F,onFileExists:E}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:O,className:"terminal-header",children:[s.jsxs("div",{style:g,children:[s.jsx("span",{children:"📟"}),s.jsx("span",{children:"Terminal"})]}),s.jsxs("div",{style:I,children:[s.jsx("span",{children:m==="linux"?"🐧 Linux":"🪟 Windows"}),l&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"|"}),s.jsx("span",{style:{color:x.warning},children:"Running..."})]})]}),e&&s.jsxs("div",{style:z,children:[s.jsx("span",{style:{fontSize:"11px",color:x.comment},children:"OS:"}),s.jsx("button",{style:V(m==="linux",l||m==="linux"),onClick:()=>L("linux"),disabled:l||m==="linux",title:m==="linux"?"Already in Linux mode":"Switch to Linux mode",children:"Linux"}),s.jsx("button",{style:V(m==="windows",l||m==="windows"),onClick:()=>L("windows"),disabled:l||m==="windows",title:m==="windows"?"Already in Windows mode":"Switch to Windows mode",children:"Windows"})]})]}),s.jsx(lt,{output:c,theme:x,autoScroll:!0,maxLines:1e3,currentInput:a,onInputChange:v,onKeyDown:T,currentDirectory:u,osType:m,username:y,hostname:f,isExecuting:l,cursorPosition:C,suggestions:k,selectedSuggestion:N,showSuggestions:b,commandRegistry:R}),s.jsxs("div",{style:{position:"absolute",left:"-9999px"},children:[s.jsx("button",{onClick:j,"aria-label":"Clear terminal output",children:"Clear (Ctrl+L)"}),s.jsx("button",{onClick:$,"aria-label":"Clear command history",children:"Clear History"})]})]}),s.jsx("style",{children:`
        .terminal-app {
          font-variant-ligatures: none;
          -webkit-font-feature-settings: "liga" 0;
          font-feature-settings: "liga" 0;
        }
        
        .terminal-app *:focus {
          outline: none;
        }
        
        .terminal-input::selection {
          background-color: ${x.selection};
          color: ${x.foreground};
        }
        
        .terminal-suggestion:hover {
          background-color: ${x.selection} !important;
          color: ${x.foreground} !important;
        }
        
        .terminal-line {
          animation: fadeIn 0.1s ease-in;
        }
        
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(2px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes blink {
          0%, 50% { opacity: 1; }
          51%, 100% { opacity: 0; }
        }
        
        .terminal-cursor {
          animation: blink 1s infinite;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
          .terminal-header {
            flex-direction: column;
            gap: 8px;
            padding: 12px 16px;
          }
          
          .terminal-input-container {
            padding: 12px 0px;
          }
          
          .terminal-output {
            padding: 12px 16px;
          }
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
          .terminal-app {
            border: 2px solid ${x.foreground};
          }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
          .terminal-line {
            animation: none;
          }
          
          .terminal-cursor {
            animation: none;
            opacity: 1;
          }
        }
      `})]})},ir=Object.freeze(Object.defineProperty({__proto__:null,TerminalApp:Us},Symbol.toStringTag,{value:"Module"})),Gs=()=>s.jsxs("div",{style:{padding:"20px",height:"100%",overflow:"auto"},children:[s.jsx("h3",{id:"contact-form-title",children:"Contact Me"}),s.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"12px"},"aria-labelledby":"contact-form-title",role:"form",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contact-name",style:{display:"block",marginBottom:"4px",fontSize:"14px"},children:"Name"}),s.jsx("input",{id:"contact-name",type:"text",placeholder:"Your Name",style:{padding:"8px",width:"100%",boxSizing:"border-box"},required:!0,"aria-required":"true"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contact-email",style:{display:"block",marginBottom:"4px",fontSize:"14px"},children:"Email"}),s.jsx("input",{id:"contact-email",type:"email",placeholder:"Your Email",style:{padding:"8px",width:"100%",boxSizing:"border-box"},required:!0,"aria-required":"true"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contact-message",style:{display:"block",marginBottom:"4px",fontSize:"14px"},children:"Message"}),s.jsx("textarea",{id:"contact-message",placeholder:"Your Message",rows:5,style:{padding:"8px",resize:"vertical",width:"100%",boxSizing:"border-box"},required:!0,"aria-required":"true"})]}),s.jsx("button",{type:"submit",style:{padding:"10px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},"aria-label":"Send contact message",children:"Send Message"})]})]}),ar=Object.freeze(Object.defineProperty({__proto__:null,ContactFormApp:Gs},Symbol.toStringTag,{value:"Module"})),Vs=()=>s.jsxs("div",{style:{padding:"16px",height:"100%",overflow:"auto"},children:[s.jsx("h3",{children:"Skills"}),s.jsx("h4",{children:"Frontend"}),s.jsxs("ul",{children:[s.jsx("li",{children:"React/TypeScript"}),s.jsx("li",{children:"JavaScript/HTML/CSS"}),s.jsx("li",{children:"Vue.js"})]}),s.jsx("h4",{children:"Backend"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Node.js"}),s.jsx("li",{children:"Python"}),s.jsx("li",{children:"Express.js"})]}),s.jsx("h4",{children:"Tools"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Git/GitHub"}),s.jsx("li",{children:"Docker"}),s.jsx("li",{children:"AWS"})]})]}),lr=Object.freeze(Object.defineProperty({__proto__:null,MarkdownViewerApp:Vs},Symbol.toStringTag,{value:"Module"})),qs=()=>{const[n,e]=d.useState({display:"0",previousValue:null,operation:null,waitingForOperand:!1,isResult:!1,history:""}),t=d.useCallback(f=>{e(C=>{const{display:p,waitingForOperand:w,isResult:k}=C;return w||k?{...C,display:f,waitingForOperand:!1,isResult:!1}:{...C,display:p==="0"?f:`${p}${f}`,isResult:!1}})},[]),r=d.useCallback(()=>{e(f=>{const{display:C,waitingForOperand:p,isResult:w}=f;return p||w?{...f,display:"0.",waitingForOperand:!1,isResult:!1}:C.indexOf(".")===-1?{...f,display:`${C}.`,isResult:!1}:f})},[]),o=d.useCallback(()=>{e(f=>({...f,display:"0"}))},[]),i=d.useCallback(()=>{e(f=>{const{display:C,isResult:p}=f;return p?{...f,display:"0",isResult:!1}:C.length>1&&C!=="0"?{...f,display:C.slice(0,-1)}:{...f,display:"0"}})},[]),c=d.useCallback(()=>{e({display:"0",previousValue:null,operation:null,waitingForOperand:!1,isResult:!1,history:""})},[]),a=d.useCallback((f,C,p)=>{switch(p){case"+":return f+C;case"-":return f-C;case"×":return f*C;case"÷":if(C===0)throw new Error("Cannot divide by zero");return f/C;default:return C}},[]),u=d.useCallback(f=>{e(C=>{const{display:p,previousValue:w,operation:k,waitingForOperand:N,history:b}=C,v=parseFloat(p);if(w===null)return{...C,previousValue:v,operation:f,waitingForOperand:!0,history:`${p} ${f}`};if(k&&N)return{...C,operation:f,history:b.slice(0,-1)+f};try{const j=a(w,v,k||"+"),S=Number(j.toPrecision(12)).toString();return{...C,display:S,previousValue:j,operation:f,waitingForOperand:!0,isResult:!1,history:`${S} ${f}`}}catch{return{...C,display:"Error",previousValue:null,operation:null,waitingForOperand:!0,isResult:!0,history:""}}})},[a]),m=d.useCallback(()=>{e(f=>{const{display:C,previousValue:p,operation:w,history:k}=f,N=parseFloat(C);if(p!==null&&w)try{const b=a(p,N,w),v=Number(b.toPrecision(12)).toString();return{...f,display:v,previousValue:null,operation:null,waitingForOperand:!0,isResult:!0,history:`${k} ${C} =`}}catch{return{...f,display:"Error",previousValue:null,operation:null,waitingForOperand:!0,isResult:!0,history:""}}return f})},[a]),l=d.useCallback(()=>{e(f=>{const{display:C}=f,w=parseFloat(C)/100,k=Number(w.toPrecision(12)).toString();return{...f,display:k,isResult:!0}})},[]),x=d.useCallback(f=>{f.preventDefault(),f.key>="0"&&f.key<="9"?t(f.key):f.key==="."?r():f.key==="+"?u("+"):f.key==="-"?u("-"):f.key==="*"?u("×"):f.key==="/"?u("÷"):f.key==="Enter"||f.key==="="?m():f.key==="%"?l():f.key==="Escape"?c():f.key==="Backspace"?i():f.key==="Delete"&&o()},[t,r,u,m,l,c,o,i]);d.useEffect(()=>(document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}),[x]);const y=f=>{if(f==="Error")return f;const C=parseFloat(f);return isNaN(C)?"0":Math.abs(C)>=1e15||Math.abs(C)<1e-10&&C!==0?C.toExponential(5):f};return s.jsxs("div",{className:"calculator-app",children:[s.jsxs("div",{className:"calculator",children:[s.jsxs("div",{className:"calculator-display",children:[s.jsx("div",{className:"history-display",title:n.history,children:n.history||" "}),s.jsx("div",{className:"display-value",title:n.display,children:y(n.display)})]}),s.jsxs("div",{className:"calculator-buttons",children:[s.jsx("button",{className:"btn btn-function",onClick:c,title:"Clear All (Escape)",children:"AC"}),s.jsx("button",{className:"btn btn-function",onClick:o,title:"Clear Entry (Delete)",children:"C"}),s.jsx("button",{className:"btn btn-function",onClick:i,title:"Backspace",children:"⌫"}),s.jsx("button",{className:"btn btn-operation",onClick:()=>u("÷"),title:"Divide (/)",children:"÷"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("7"),title:"7",children:"7"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("8"),title:"8",children:"8"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("9"),title:"9",children:"9"}),s.jsx("button",{className:"btn btn-operation",onClick:()=>u("×"),title:"Multiply (*)",children:"×"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("4"),title:"4",children:"4"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("5"),title:"5",children:"5"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("6"),title:"6",children:"6"}),s.jsx("button",{className:"btn btn-operation",onClick:()=>u("-"),title:"Subtract (-)",children:"-"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("1"),title:"1",children:"1"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("2"),title:"2",children:"2"}),s.jsx("button",{className:"btn btn-number",onClick:()=>t("3"),title:"3",children:"3"}),s.jsx("button",{className:"btn btn-operation",onClick:()=>u("+"),title:"Add (+)",children:"+"}),s.jsx("button",{className:"btn btn-number btn-zero",onClick:()=>t("0"),title:"0",children:"0"}),s.jsx("button",{className:"btn btn-number",onClick:r,title:"Decimal point (.)",children:"."}),s.jsx("button",{className:"btn btn-equals",onClick:m,title:"Equals (Enter)",children:"="})]})]}),s.jsx("style",{children:`
        .calculator-app {
          width: 100%;
          height: 100%;
          display: flex;
          flex-direction: column;
          background: #2d3748;
        }

        .calculator {
          flex: 1;
          display: flex;
          flex-direction: column;
          background: #2d3748;
          padding: 12px;
          width: 100%;
          height: 100%;
          box-sizing: border-box;
        }

        .calculator-display {
          background: #1a202c;
          border-radius: 8px;
          padding: 16px 12px;
          margin-bottom: 12px;
          border: 1px solid rgba(255, 255, 255, 0.1);
          flex-shrink: 0;
        }

        .history-display {
          font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
          font-size: 0.9rem;
          font-weight: 300;
          color: #a0aec0;
          text-align: right;
          min-height: 1.1em;
          word-wrap: break-word;
          overflow-wrap: break-word;
          line-height: 1.1;
          margin-bottom: 6px;
        }

        .display-value {
          font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
          font-size: 2.2rem;
          font-weight: 300;
          color: white;
          text-align: right;
          min-height: 1.1em;
          word-wrap: break-word;
          overflow-wrap: break-word;
          line-height: 1.1;
        }

        .calculator-buttons {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 8px;
          flex: 1;
        }

        .btn {
          height: 56px;
          border: none;
          border-radius: 8px;
          font-size: 1.2rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.15s ease;
          font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
          display: flex;
          align-items: center;
          justify-content: center;
          user-select: none;
          position: relative;
          overflow: hidden;
        }

        .btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .btn:active {
          transform: translateY(0);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .btn::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
          transition: left 0.5s;
        }

        .btn:hover::before {
          left: 100%;
        }

        .btn-number {
          background: #4a5568;
          color: white;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-number:hover {
          background: #5a6578;
        }

        .btn-operation {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          font-weight: 700;
        }

        .btn-operation:hover {
          background: linear-gradient(135deg, #7c93f0 0%, #8659b8 100%);
        }

        .btn-function {
          background: linear-gradient(135deg, #fd746c 0%, #ff9068 100%);
          color: white;
          font-weight: 700;
        }

        .btn-function:hover {
          background: linear-gradient(135deg, #fd8680 0%, #ff9e7c 100%);
        }

        .btn-equals {
          background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
          color: white;
          font-weight: 700;
        }

        .btn-equals:hover {
          background: linear-gradient(135deg, #1ba89c 0%, #4af48b 100%);
        }

        .btn-zero {
          grid-column: span 2;
        }

        @media (max-width: 480px) {
          .calculator {
            padding: 8px;
          }

          .calculator-display {
            padding: 12px 8px;
            margin-bottom: 8px;
          }

          .history-display {
            font-size: 0.8rem;
            margin-bottom: 4px;
          }

          .display-value {
            font-size: 1.8rem;
          }

          .btn {
            height: 44px;
            font-size: 1rem;
          }

          .calculator-buttons {
            gap: 6px;
          }
        }

        @media (max-width: 360px) {
          .calculator {
            padding: 6px;
          }

          .calculator-display {
            padding: 10px 6px;
            margin-bottom: 6px;
          }

          .display-value {
            font-size: 1.6rem;
          }

          .btn {
            height: 40px;
            font-size: 0.9rem;
          }

          .calculator-buttons {
            gap: 4px;
          }
        }
      `})]})},cr=Object.freeze(Object.defineProperty({__proto__:null,CalculatorApp:qs},Symbol.toStringTag,{value:"Module"})),Ne=({color:n,onChange:e,showAdvanced:t=!0,label:r})=>{const[o,i]=d.useState(!1),c=d.useCallback(p=>{const w=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(p);return w?{r:parseInt(w[1],16),g:parseInt(w[2],16),b:parseInt(w[3],16)}:{r:0,g:0,b:0}},[]),a=d.useCallback((p,w,k)=>`#${[p,w,k].map(N=>{const b=Math.round(N).toString(16);return b.length===1?`0${b}`:b}).join("")}`,[]),u=d.useCallback((p,w,k)=>{const N=p/255,b=w/255,v=k/255,j=Math.max(N,b,v),S=Math.min(N,b,v);let T=0,$=0;const h=(j+S)/2;if(j===S)T=$=0;else{const _=j-S;switch($=h>.5?_/(2-j-S):_/(j+S),j){case N:T=(b-v)/_+(b<v?6:0);break;case b:T=(v-N)/_+2;break;case v:T=(N-b)/_+4;break}T/=6}return{h:T*360,s:$*100,l:h*100}},[]),m=d.useCallback((p,w,k)=>{const N=p/360,b=w/100,v=k/100,j=(h,_,R)=>{let L=R;return L<0&&(L+=1),L>1&&(L-=1),L<1/6?h+(_-h)*6*L:L<1/2?_:L<2/3?h+(_-h)*(2/3-L)*6:h};let S,T,$;if(b===0)S=T=$=v;else{const h=v<.5?v*(1+b):v+b-v*b,_=2*v-h;S=j(_,h,N+1/3),T=j(_,h,N),$=j(_,h,N-1/3)}return{r:S*255,g:T*255,b:$*255}},[]),l=c(n),x=u(l.r,l.g,l.b),y=d.useCallback(p=>{e(p)},[e]),f=d.useCallback((p,w)=>{const k={...l,[p]:Math.max(0,Math.min(255,w))},N=a(k.r,k.g,k.b);y(N)},[l,a,y]),C=d.useCallback((p,w)=>{const k={...x};p==="h"?k.h=Math.max(0,Math.min(360,w)):k[p]=Math.max(0,Math.min(100,w));const N=m(k.h,k.s,k.l),b=a(N.r,N.g,N.b);y(b)},[x,m,a,y]);return s.jsxs("div",{className:"color-picker",children:[r&&s.jsx("label",{className:"color-picker__label",children:r}),s.jsxs("div",{className:"color-picker__main",children:[s.jsx("input",{type:"color",value:n,onChange:p=>y(p.target.value),className:"color-picker__input"}),s.jsx("div",{className:"color-picker__preview",style:{backgroundColor:n},children:s.jsx("span",{className:"color-picker__hex",children:n.toUpperCase()})}),t&&s.jsxs("button",{type:"button",onClick:()=>i(!o),className:"color-picker__toggle",children:[o?"🔽":"▶️"," Advanced"]})]}),t&&o&&s.jsxs("div",{className:"color-picker__advanced",children:[s.jsxs("div",{className:"color-picker__section",children:[s.jsx("h4",{children:"RGB"}),s.jsxs("div",{className:"color-picker__controls",children:[s.jsxs("div",{className:"color-picker__control",children:[s.jsx("label",{children:"R"}),s.jsx("input",{type:"range",min:"0",max:"255",value:l.r,onChange:p=>f("r",parseInt(p.target.value,10))}),s.jsx("input",{type:"number",min:"0",max:"255",value:Math.round(l.r),onChange:p=>f("r",parseInt(p.target.value,10)||0),className:"color-picker__number"})]}),s.jsxs("div",{className:"color-picker__control",children:[s.jsx("label",{children:"G"}),s.jsx("input",{type:"range",min:"0",max:"255",value:l.g,onChange:p=>f("g",parseInt(p.target.value,10))}),s.jsx("input",{type:"number",min:"0",max:"255",value:Math.round(l.g),onChange:p=>f("g",parseInt(p.target.value,10)||0),className:"color-picker__number"})]}),s.jsxs("div",{className:"color-picker__control",children:[s.jsx("label",{children:"B"}),s.jsx("input",{type:"range",min:"0",max:"255",value:l.b,onChange:p=>f("b",parseInt(p.target.value,10))}),s.jsx("input",{type:"number",min:"0",max:"255",value:Math.round(l.b),onChange:p=>f("b",parseInt(p.target.value,10)||0),className:"color-picker__number"})]})]})]}),s.jsxs("div",{className:"color-picker__section",children:[s.jsx("h4",{children:"HSL"}),s.jsxs("div",{className:"color-picker__controls",children:[s.jsxs("div",{className:"color-picker__control",children:[s.jsx("label",{children:"H"}),s.jsx("input",{type:"range",min:"0",max:"360",value:x.h,onChange:p=>C("h",parseInt(p.target.value,10))}),s.jsx("input",{type:"number",min:"0",max:"360",value:Math.round(x.h),onChange:p=>C("h",parseInt(p.target.value,10)||0),className:"color-picker__number"})]}),s.jsxs("div",{className:"color-picker__control",children:[s.jsx("label",{children:"S"}),s.jsx("input",{type:"range",min:"0",max:"100",value:x.s,onChange:p=>C("s",parseInt(p.target.value,10))}),s.jsx("input",{type:"number",min:"0",max:"100",value:Math.round(x.s),onChange:p=>C("s",parseInt(p.target.value,10)||0),className:"color-picker__number"})]}),s.jsxs("div",{className:"color-picker__control",children:[s.jsx("label",{children:"L"}),s.jsx("input",{type:"range",min:"0",max:"100",value:x.l,onChange:p=>C("l",parseInt(p.target.value,10))}),s.jsx("input",{type:"number",min:"0",max:"100",value:Math.round(x.l),onChange:p=>C("l",parseInt(p.target.value,10)||0),className:"color-picker__number"})]})]})]})]})]})},Ks=({gradient:n,onChange:e})=>{const{t}=ce(),r=d.useCallback(u=>{e({...n,...u})},[n,e]),o=d.useCallback((u,m)=>{const l=[...n.colors];l[u]={...l[u],...m},r({colors:l})},[n.colors,r]),i=d.useCallback(()=>{const u=n.colors.length>0?Math.min(100,n.colors[n.colors.length-1].position+20):50,m=[...n.colors,{color:"#ffffff",position:u}];r({colors:m})},[n.colors,r]),c=d.useCallback(u=>{if(n.colors.length<=2)return;const m=n.colors.filter((l,x)=>x!==u);r({colors:m})},[n.colors,r]),a=d.useCallback(()=>{const u=n.colors.sort((m,l)=>m.position-l.position).map(m=>`${m.color} ${m.position}%`).join(", ");return n.type==="linear"?`linear-gradient(${n.angle}deg, ${u})`:`radial-gradient(circle, ${u})`},[n]);return s.jsx("div",{className:"gradient-editor",children:s.jsxs("div",{className:"gradient-editor__controls",children:[s.jsx("div",{className:"gradient-editor__toggle",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:n.enabled,onChange:u=>r({enabled:u.target.checked})}),t("desktop.gradientMode")]})}),n.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"gradient-editor__type",children:[s.jsx("label",{children:t("desktop.gradientMode")}),s.jsxs("select",{value:n.type,onChange:u=>r({type:u.target.value}),children:[s.jsx("option",{value:"linear",children:t("desktop.gradientLinear")}),s.jsx("option",{value:"radial",children:t("desktop.gradientRadial")})]})]}),n.type==="linear"&&s.jsxs("div",{className:"gradient-editor__angle",children:[s.jsxs("label",{children:["Angle: ",n.angle,"°"]}),s.jsx("input",{type:"range",min:"0",max:"360",value:n.angle,onChange:u=>r({angle:parseInt(u.target.value,10)})})]}),s.jsxs("div",{className:"gradient-editor__preview",children:[s.jsx("div",{className:"gradient-editor__preview-swatch",style:{background:a()}}),s.jsx("span",{className:"gradient-editor__preview-text",children:"Preview"})]}),s.jsxs("div",{className:"gradient-editor__colors",children:[s.jsx("h4",{children:t("desktop.gradientColors")}),n.colors.map((u,m)=>s.jsxs("div",{className:"gradient-editor__color-stop",children:[s.jsx(Ne,{color:u.color,onChange:l=>o(m,{color:l}),showAdvanced:!1}),s.jsxs("div",{className:"gradient-editor__position",children:[s.jsxs("label",{children:["Position: ",u.position,"%"]}),s.jsx("input",{type:"range",min:"0",max:"100",value:u.position,onChange:l=>o(m,{position:parseInt(l.target.value,10)})})]}),n.colors.length>2&&s.jsx("button",{type:"button",onClick:()=>c(m),className:"gradient-editor__remove-btn",title:t("desktop.removeGradientColor"),children:"❌"})]},m)),s.jsxs("button",{type:"button",onClick:i,className:"gradient-editor__add-btn",children:["+ ",t("desktop.addGradientColor")]})]})]})]})})},Ze=()=>{const{t:n}=ce(),{settings:e,updateSettings:t,getBackgroundStyle:r,startRGBTimer:o,stopRGBTimer:i}=J(),[c,a]=d.useState(""),[u,m]=d.useState(!1),l=d.useCallback(b=>{t({desktop:{...e.desktop,backgroundColor:b}})},[e.desktop,t]),x=d.useCallback(b=>{t({desktop:{...e.desktop,gradient:b}})},[e.desktop,t]),y=d.useCallback(b=>{const v={...e.desktop.rgbTimer,...b};t({desktop:{...e.desktop,rgbTimer:v}}),v.enabled&&b.enabled!==!1?o():b.enabled===!1&&i()},[e.desktop,t,o,i]),f=d.useCallback((b,v)=>{const j=[...e.desktop.rgbTimer.colors];j[b]=v,y({colors:j})},[e.desktop.rgbTimer.colors,y]),C=d.useCallback(()=>{const b=[...e.desktop.rgbTimer.colors,"#ffffff"];y({colors:b})},[e.desktop.rgbTimer.colors,y]),p=d.useCallback(b=>{if(e.desktop.rgbTimer.colors.length<=2)return;const v=e.desktop.rgbTimer.colors.filter((j,S)=>S!==b);y({colors:v})},[e.desktop.rgbTimer.colors,y]),w=d.useCallback(()=>{if(!c.trim())return;const b={id:`preset-${Date.now()}`,name:c,type:e.desktop.gradient.enabled?"gradient":"solid",value:e.desktop.gradient.enabled?e.desktop.gradient:e.desktop.backgroundColor};t({desktop:{...e.desktop,presets:[...e.desktop.presets,b]}}),a(""),m(!1)},[c,e.desktop,t]),k=d.useCallback(b=>{b.type==="solid"?t({desktop:{...e.desktop,backgroundColor:b.value,gradient:{...e.desktop.gradient,enabled:!1}}}):t({desktop:{...e.desktop,gradient:b.value}})},[e.desktop,t]),N=d.useCallback(b=>{t({desktop:{...e.desktop,presets:e.desktop.presets.filter(v=>v.id!==b)}})},[e.desktop,t]);return s.jsxs("div",{className:"desktop-settings",children:[s.jsx("h2",{className:"desktop-settings__title",children:n("desktop.title")}),s.jsxs("div",{className:"desktop-settings__section",children:[s.jsx("h3",{children:n("desktop.background")}),s.jsxs("div",{className:"desktop-settings__preview",children:[s.jsx("div",{className:"desktop-settings__preview-swatch",style:{background:r()}}),s.jsx("span",{className:"desktop-settings__preview-text",children:n("common.preview")})]}),s.jsxs("div",{className:"desktop-settings__controls",children:[s.jsx(Ne,{color:e.desktop.backgroundColor,onChange:l,label:n("desktop.backgroundColor")}),s.jsx(Ks,{gradient:e.desktop.gradient,onChange:x})]})]}),s.jsxs("div",{className:"desktop-settings__section",children:[s.jsx("h3",{children:n("desktop.rgbTimer")}),s.jsxs("div",{className:"desktop-settings__rgb-controls",children:[s.jsxs("label",{className:"desktop-settings__checkbox",children:[s.jsx("input",{type:"checkbox",checked:e.desktop.rgbTimer.enabled,onChange:b=>y({enabled:b.target.checked})}),n("desktop.enableTimer")]}),e.desktop.rgbTimer.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"desktop-settings__timer-interval",children:[s.jsxs("label",{children:[n("desktop.timerInterval"),": ",e.desktop.rgbTimer.interval/1e3,"s"]}),s.jsx("input",{type:"range",min:"1000",max:"10000",step:"500",value:e.desktop.rgbTimer.interval,onChange:b=>y({interval:parseInt(b.target.value,10)})})]}),s.jsxs("div",{className:"desktop-settings__timer-colors",children:[s.jsx("h4",{children:"Timer Colors"}),e.desktop.rgbTimer.colors.map((b,v)=>s.jsxs("div",{className:"desktop-settings__timer-color",children:[s.jsx(Ne,{color:b,onChange:j=>f(v,j),showAdvanced:!1}),e.desktop.rgbTimer.colors.length>2&&s.jsx("button",{type:"button",onClick:()=>p(v),className:"desktop-settings__remove-color-btn",children:"❌"})]},v)),s.jsx("button",{type:"button",onClick:C,className:"desktop-settings__add-color-btn",children:"+ Add Color"})]})]})]})]}),s.jsxs("div",{className:"desktop-settings__section",children:[s.jsx("h3",{children:n("desktop.colorPresets")}),s.jsxs("div",{className:"desktop-settings__presets",children:[s.jsxs("button",{type:"button",onClick:()=>m(!0),className:"desktop-settings__save-preset-btn",children:["💾 ",n("desktop.savePreset")]}),u&&s.jsxs("div",{className:"desktop-settings__preset-dialog",children:[s.jsx("input",{type:"text",value:c,onChange:b=>a(b.target.value),placeholder:n("desktop.presetName"),className:"desktop-settings__preset-input"}),s.jsxs("div",{className:"desktop-settings__preset-buttons",children:[s.jsx("button",{onClick:w,className:"desktop-settings__preset-save",children:n("common.save")}),s.jsx("button",{onClick:()=>{m(!1),a("")},className:"desktop-settings__preset-cancel",children:n("common.cancel")})]})]}),s.jsx("div",{className:"desktop-settings__preset-list",children:e.desktop.presets.map(b=>s.jsxs("div",{className:"desktop-settings__preset-item",children:[s.jsx("div",{className:"desktop-settings__preset-swatch",style:{background:b.type==="solid"?b.value:(()=>{const v=b.value,j=v.colors?.map(S=>`${S.color} ${S.position}%`).join(", ")||"";return v.type==="linear"?`linear-gradient(${v.angle}deg, ${j})`:`radial-gradient(circle, ${j})`})()}}),s.jsx("span",{className:"desktop-settings__preset-name",children:b.name}),s.jsxs("div",{className:"desktop-settings__preset-actions",children:[s.jsx("button",{onClick:()=>k(b),className:"desktop-settings__preset-load",children:"Load"}),s.jsx("button",{onClick:()=>N(b.id),className:"desktop-settings__preset-delete",children:"🗑️"})]})]},b.id))})]})]})]})},Ys=[{code:"en",name:"English",nativeName:"English"},{code:"es",name:"Spanish",nativeName:"Español"},{code:"pt",name:"Portuguese",nativeName:"Português"},{code:"fr",name:"French",nativeName:"Français"}],Zs=[{value:"UTC",label:"UTC (Coordinated Universal Time)"},{value:"America/New_York",label:"Eastern Time (US & Canada)"},{value:"America/Chicago",label:"Central Time (US & Canada)"},{value:"America/Denver",label:"Mountain Time (US & Canada)"},{value:"America/Los_Angeles",label:"Pacific Time (US & Canada)"},{value:"America/Sao_Paulo",label:"São Paulo, Brazil"},{value:"Europe/London",label:"London, Dublin"},{value:"Europe/Paris",label:"Paris, Madrid, Berlin"},{value:"Europe/Moscow",label:"Moscow, St. Petersburg"},{value:"Asia/Tokyo",label:"Tokyo, Osaka"},{value:"Asia/Shanghai",label:"Beijing, Shanghai"},{value:"Asia/Kolkata",label:"Mumbai, Delhi, Kolkata"},{value:"Australia/Sydney",label:"Sydney, Melbourne"}],Js=()=>{const{t:n,changeLanguage:e,currentLanguage:t}=ce(),{settings:r,updateSettings:o}=J(),i=d.useCallback(c=>{e(c),o({language:{...r.language,language:c}})},[r.language,o,e]);return s.jsxs("div",{className:"language-settings",children:[s.jsx("h2",{className:"language-settings__title",children:n("language.title")}),s.jsxs("div",{className:"language-settings__section",children:[s.jsx("h3",{children:n("language.language")}),s.jsx("p",{className:"language-settings__description",children:n("language.description")}),s.jsx("div",{className:"language-settings__language-grid",children:Ys.map(c=>s.jsxs("button",{onClick:()=>i(c.code),className:`language-settings__language-option ${t===c.code?"language-settings__language-option--active":""}`,children:[s.jsxs("div",{className:"language-settings__language-info",children:[s.jsx("span",{className:"language-settings__language-name",children:c.nativeName}),s.jsx("span",{className:"language-settings__language-english",children:c.name})]}),t===c.code&&s.jsx("span",{className:"language-settings__language-check",children:"✓"})]},c.code))})]})]})},Xs=()=>{const{t:n,formatDateTime:e}=ce(),{settings:t,updateSettings:r}=J(),[o,i]=d.useState(new Date);d.useEffect(()=>{const p=setInterval(()=>{i(new Date)},1e3);return()=>clearInterval(p)},[]);const c=d.useCallback(p=>{r({datetime:{...t.datetime,timezone:p}})},[t.datetime,r]),a=d.useCallback(p=>{r({datetime:{...t.datetime,dateFormat:p}})},[t.datetime,r]),u=d.useCallback(p=>{r({datetime:{...t.datetime,timeFormat:p}})},[t.datetime,r]),m=d.useCallback(p=>{r({datetime:{...t.datetime,hour12Format:p}})},[t.datetime,r]),l=d.useCallback(p=>{r({datetime:{...t.datetime,showSeconds:p}})},[t.datetime,r]),x=d.useCallback(p=>{r({datetime:{...t.datetime,autoUpdate:p}})},[t.datetime,r]),y=(p,w,k)=>{try{return new Intl.DateTimeFormat(t.language.language,{dateStyle:p||t.datetime.dateFormat,timeStyle:w||t.datetime.timeFormat,hour12:k??t.datetime.hour12Format,timeZone:t.datetime.timezone}).format(o)}catch{return o.toLocaleString()}},f=[{value:"short",label:"Short",example:y("short",void 0)},{value:"medium",label:"Medium",example:y("medium",void 0)},{value:"long",label:"Long",example:y("long",void 0)},{value:"full",label:"Full",example:y("full",void 0)}],C=[{value:"short",label:"Short",example:y(void 0,"short")},{value:"medium",label:"Medium",example:y(void 0,"medium")},{value:"long",label:"Long",example:y(void 0,"long")},{value:"full",label:"Full",example:y(void 0,"full")}];return s.jsxs("div",{className:"datetime-settings",children:[s.jsx("h2",{className:"datetime-settings__title",children:n("datetime.title")}),s.jsxs("div",{className:"datetime-settings__section",children:[s.jsx("h3",{children:n("datetime.currentDateTime")}),s.jsxs("div",{className:"datetime-settings__current-time",children:[s.jsx("div",{className:"datetime-settings__time-display",children:e(o)}),s.jsxs("div",{className:"datetime-settings__timezone-info",children:[n("datetime.timezone"),": ",t.datetime.timezone]})]})]}),s.jsxs("div",{className:"datetime-settings__section",children:[s.jsx("h3",{children:n("datetime.timezone")}),s.jsx("p",{className:"datetime-settings__description",children:n("datetime.description")}),s.jsx("select",{value:t.datetime.timezone,onChange:p=>c(p.target.value),className:"datetime-settings__select",children:Zs.map(p=>s.jsx("option",{value:p.value,children:p.label},p.value))})]}),s.jsxs("div",{className:"datetime-settings__section",children:[s.jsx("h3",{children:n("datetime.dateFormat")}),s.jsx("p",{className:"datetime-settings__description",children:n("datetime.dateFormatDescription")}),s.jsx("div",{className:"datetime-settings__format-options",children:f.map(p=>s.jsxs("label",{className:`datetime-settings__format-option ${t.datetime.dateFormat===p.value?"datetime-settings__format-option--active":""}`,children:[s.jsx("input",{type:"radio",name:"dateFormat",value:p.value,checked:t.datetime.dateFormat===p.value,onChange:w=>a(w.target.value)}),s.jsxs("div",{className:"datetime-settings__format-info",children:[s.jsx("span",{className:"datetime-settings__format-label",children:p.label}),s.jsx("span",{className:"datetime-settings__format-example",children:p.example})]})]},p.value))})]}),s.jsxs("div",{className:"datetime-settings__section",children:[s.jsx("h3",{children:n("datetime.timeFormat")}),s.jsx("p",{className:"datetime-settings__description",children:n("datetime.timeFormatDescription")}),s.jsx("div",{className:"datetime-settings__format-options",children:C.map(p=>s.jsxs("label",{className:`datetime-settings__format-option ${t.datetime.timeFormat===p.value?"datetime-settings__format-option--active":""}`,children:[s.jsx("input",{type:"radio",name:"timeFormat",value:p.value,checked:t.datetime.timeFormat===p.value,onChange:w=>u(w.target.value)}),s.jsxs("div",{className:"datetime-settings__format-info",children:[s.jsx("span",{className:"datetime-settings__format-label",children:p.label}),s.jsx("span",{className:"datetime-settings__format-example",children:p.example})]})]},p.value))})]}),s.jsxs("div",{className:"datetime-settings__section",children:[s.jsx("h3",{children:n("datetime.timeDisplayOptions")}),s.jsxs("div",{className:"datetime-settings__options",children:[s.jsxs("label",{className:"datetime-settings__checkbox",children:[s.jsx("input",{type:"radio",name:"hourFormat",checked:!t.datetime.hour12Format,onChange:()=>m(!1)}),s.jsxs("div",{className:"datetime-settings__option-info",children:[s.jsx("span",{className:"datetime-settings__option-label",children:n("datetime.hour24")}),s.jsx("span",{className:"datetime-settings__option-example",children:y(void 0,"short",!1)})]})]}),s.jsxs("label",{className:"datetime-settings__checkbox",children:[s.jsx("input",{type:"radio",name:"hourFormat",checked:t.datetime.hour12Format,onChange:()=>m(!0)}),s.jsxs("div",{className:"datetime-settings__option-info",children:[s.jsx("span",{className:"datetime-settings__option-label",children:n("datetime.hour12")}),s.jsx("span",{className:"datetime-settings__option-example",children:y(void 0,"short",!0)})]})]}),s.jsxs("label",{className:"datetime-settings__checkbox",children:[s.jsx("input",{type:"checkbox",checked:t.datetime.showSeconds,onChange:p=>l(p.target.checked)}),s.jsxs("div",{className:"datetime-settings__option-info",children:[s.jsx("span",{className:"datetime-settings__option-label",children:n("datetime.showSeconds")}),s.jsx("span",{className:"datetime-settings__option-example",children:n("datetime.includeSeconds")})]})]}),s.jsxs("label",{className:"datetime-settings__checkbox",children:[s.jsx("input",{type:"checkbox",checked:t.datetime.autoUpdate,onChange:p=>x(p.target.checked)}),s.jsxs("div",{className:"datetime-settings__option-info",children:[s.jsx("span",{className:"datetime-settings__option-label",children:n("datetime.autoUpdate")}),s.jsx("span",{className:"datetime-settings__option-example",children:n("datetime.autoSync")})]})]})]})]})]})},ur=()=>{const{t:n}=ce(),[e,t]=d.useState("desktop"),r=[{id:"desktop",label:n("desktop.title"),icon:"🖥️",component:Ze},{id:"language",label:n("language.title"),icon:"🌐",component:Js},{id:"datetime",label:n("datetime.title"),icon:"🕒",component:Xs}],o=r.find(i=>i.id===e)?.component||Ze;return s.jsxs("div",{className:"settings-app",children:[s.jsx("div",{className:"settings-app__header",children:s.jsxs("h1",{className:"settings-app__title",children:["⚙️ ",n("common.settings")]})}),s.jsxs("div",{className:"settings-app__content",children:[s.jsx("nav",{className:"settings-app__nav",children:r.map(i=>s.jsxs("button",{onClick:()=>t(i.id),className:`settings-app__tab ${e===i.id?"settings-app__tab--active":""}`,children:[s.jsx("span",{className:"settings-app__tab-icon",children:i.icon}),s.jsx("span",{className:"settings-app__tab-label",children:i.label})]},i.id))}),s.jsx("main",{className:"settings-app__main",children:s.jsx(o,{})})]})]})},ae=[{id:"qualvaiser",name:"QualVaiSer",description:"Torne seu Chá de Bebê ainda mais especial! Crie um bolão divertido para seu chá de bebê! Seus convidados fazem palpites sobre sexo, data de nascimento, peso e altura do bebê. Uma forma única de tornar a espera ainda mais emocionante! 💕",longDescription:"QualVaiSer é uma plataforma interativa para criar bolões de chá de bebê, onde os convidados podem fazer seus palpites sobre o bebê que está chegando. A aplicação permite que os organizadores criem apostas divertidas sobre sexo, data de nascimento, peso e altura do bebê, criando uma experiência única e envolvente para todos os participantes.",websiteUrl:"https://qualvaiser.com/",technologies:["React","TypeScript","Node.js","PostgreSQL","AWS"],category:"web",featured:!0,status:"live",dateCreated:"2023-01-15",dateUpdated:"2024-12-15",features:["Criação de bolões personalizados para chá de bebê","Palpites sobre sexo, data, peso e altura do bebê","Interface intuitiva e divertida","Acompanhamento em tempo real dos palpites","Relatórios e ranking dos participantes"],sourceCodeUrl:void 0},{id:"portfolio-desktop",name:"Windows Desktop Portfolio",description:"Interactive Windows 11-inspired portfolio website with desktop environment simulation",longDescription:"A unique portfolio website that simulates a Windows 11 desktop environment, complete with applications, file system, terminal, and interactive features. Built with React and TypeScript.",websiteUrl:`${window.location.origin}/portfolio`,technologies:["React","TypeScript","CSS3","Vite","Playwright"],category:"web",featured:!0,status:"live",dateCreated:"2024-01-01",dateUpdated:"2024-12-20",features:["Windows 11-style interface","Interactive desktop environment","Multiple applications (Terminal, File Explorer, Text Editor)","Theme support (Light/Dark)","Responsive design","Vim editor integration"],sourceCodeUrl:"https://github.com/ThalisonCosta/windows-desktop-portfolio"}],Qs=()=>{const{theme:n}=J(),[e,t]=d.useState(""),[r,o]=d.useState("all"),[i,c]=d.useState("featured"),a=d.useMemo(()=>{const y=ae.map(f=>f.category);return Array.from(new Set(y)).sort()},[]),u=d.useMemo(()=>{const y=ae.filter(f=>{const C=e===""||f.name.toLowerCase().includes(e.toLowerCase())||f.description.toLowerCase().includes(e.toLowerCase())||f.technologies.some(w=>w.toLowerCase().includes(e.toLowerCase())),p=r==="all"||f.category===r;return C&&p});return y.sort((f,C)=>{if(f.featured&&!C.featured)return-1;if(!f.featured&&C.featured)return 1;switch(i){case"featured":return f.featured===C.featured?0:f.featured?-1:1;case"recent":return new Date(C.dateUpdated).getTime()-new Date(f.dateUpdated).getTime();case"name":return f.name.localeCompare(C.name);default:return 0}}),y},[e,r,i]),m=y=>({React:"#61DAFB",TypeScript:"#2b7489",JavaScript:"#f1e05a","Node.js":"#339933",Python:"#3572A5",CSS3:"#1572B6",HTML5:"#e34c26",PostgreSQL:"#336791",AWS:"#FF9900",Vite:"#646CFF",Playwright:"#2EAD33"})[y]||"#586069",l=y=>{window.open(y.websiteUrl,"_blank","noopener,noreferrer")},x=(y,f)=>{y.stopPropagation(),window.open(f,"_blank","noopener,noreferrer")};return s.jsxs("div",{className:`projects-app ${n}`,children:[s.jsxs("div",{className:"projects-header",children:[s.jsxs("div",{className:"projects-header-content",children:[s.jsx("h1",{className:"projects-title",children:"My Projects"}),s.jsx("p",{className:"projects-subtitle",children:"A showcase of my real-world applications and development work"})]}),s.jsxs("div",{className:"projects-stats",children:[s.jsxs("div",{className:"projects-stat-item",children:[s.jsx("span",{className:"projects-stat-number",children:ae.length}),s.jsx("span",{className:"projects-stat-label",children:"Projects"})]}),s.jsxs("div",{className:"projects-stat-item",children:[s.jsx("span",{className:"projects-stat-number",children:ae.filter(y=>y.status==="live").length}),s.jsx("span",{className:"projects-stat-label",children:"Live"})]}),s.jsxs("div",{className:"projects-stat-item",children:[s.jsx("span",{className:"projects-stat-number",children:ae.filter(y=>y.featured).length}),s.jsx("span",{className:"projects-stat-label",children:"Featured"})]})]})]}),s.jsxs("div",{className:"projects-controls",children:[s.jsx("div",{className:"projects-search-section",children:s.jsxs("div",{className:"projects-search-container",children:[s.jsx("span",{className:"projects-search-icon",children:"🔍"}),s.jsx("input",{type:"text",className:"projects-search-input",placeholder:"Search projects, technologies...",value:e,onChange:y=>t(y.target.value)})]})}),s.jsxs("div",{className:"projects-filters",children:[s.jsxs("select",{className:"projects-filter-select",value:r,onChange:y=>o(y.target.value),children:[s.jsx("option",{value:"all",children:"All Categories"}),a.map(y=>s.jsx("option",{value:y,children:y.charAt(0).toUpperCase()+y.slice(1)},y))]}),s.jsxs("select",{className:"projects-sort-select",value:i,onChange:y=>c(y.target.value),children:[s.jsx("option",{value:"featured",children:"Sort by Featured"}),s.jsx("option",{value:"recent",children:"Sort by Recent"}),s.jsx("option",{value:"name",children:"Sort by Name"})]})]})]}),s.jsx("div",{className:"projects-grid",children:u.length===0?s.jsxs("div",{className:"projects-no-results",children:[s.jsx("div",{className:"projects-no-results-icon",children:"📁"}),s.jsx("div",{className:"projects-no-results-title",children:"No projects found"}),s.jsx("div",{className:"projects-no-results-message",children:"Try adjusting your search or filter criteria"})]}):u.map(y=>s.jsxs("div",{className:`projects-project-card ${y.featured?"featured":""}`,onClick:()=>l(y),children:[y.featured&&s.jsx("div",{className:"projects-featured-badge",children:"⭐ Featured"}),s.jsx("div",{className:"projects-project-status",children:s.jsxs("span",{className:`projects-status-indicator ${y.status}`,children:[y.status==="live"&&"🟢",y.status==="development"&&"🟡",y.status==="archived"&&"🔴",y.status.charAt(0).toUpperCase()+y.status.slice(1)]})}),s.jsxs("div",{className:"projects-project-header",children:[s.jsx("h3",{className:"projects-project-name",children:y.name}),s.jsx("div",{className:"projects-project-actions",children:y.sourceCodeUrl&&s.jsx("button",{className:"projects-source-btn",onClick:f=>x(f,y.sourceCodeUrl||""),title:"View Source Code",children:"💻"})})]}),s.jsxs("div",{className:"projects-project-content",children:[s.jsx("p",{className:"projects-project-description",children:y.description}),y.longDescription&&s.jsxs("div",{className:"projects-project-features",children:[s.jsx("h4",{children:"Key Features:"}),s.jsx("ul",{children:y.features.map((f,C)=>s.jsx("li",{children:f},C))})]})]}),s.jsxs("div",{className:"projects-project-bottom",children:[s.jsxs("div",{className:"projects-project-footer",children:[s.jsx("div",{className:"projects-project-category",children:s.jsx("span",{className:"projects-category-tag",children:y.category})}),s.jsxs("div",{className:"projects-project-updated",children:["Updated ",new Date(y.dateUpdated).toLocaleDateString()]})]}),s.jsx("div",{className:"projects-project-technologies",children:y.technologies.map(f=>s.jsx("span",{className:"projects-tech-tag",style:{backgroundColor:`${m(f)}20`,color:m(f)},children:f},f))}),s.jsx("div",{className:"projects-website-preview",children:s.jsx("div",{className:"projects-preview-placeholder",children:"🌐 Click to visit website"})})]})]},y.id))})]})},dr=Object.freeze(Object.defineProperty({__proto__:null,ProjectsApp:Qs},Symbol.toStringTag,{value:"Module"})),er=()=>{const{theme:n}=J(),[e,t]=d.useState([]),[r,o]=d.useState([]),[i,c]=d.useState(null),[a,u]=d.useState(!1),[m,l]=d.useState(null),[x,y]=d.useState(!1),[f,C]=d.useState(""),[p,w]=d.useState("all"),k="ThalisonCosta",N="https://api.github.com",b="https://api.pinned.dev",v=d.useCallback(async()=>{try{const M=await fetch(`${N}/users/${k}`);if(!M.ok)throw new Error(`Failed to fetch user profile: ${M.status}`);return await M.json()}catch(M){return console.error("Error fetching user profile:",M),null}},[]),j=d.useCallback(async()=>{try{const M=await fetch(`${b}/${k}`);return M.ok?await M.json():(console.warn("Pinned repositories API unavailable, continuing without pinned data"),[])}catch(M){return console.warn("Error fetching pinned repositories:",M),[]}},[]),S=d.useCallback(async()=>{try{const M=[];let O=1;const z=100;for(;;){const V=await fetch(`${N}/users/${k}/repos?type=public&sort=updated&per_page=${z}&page=${O}`);if(!V.ok)throw new Error(`Failed to fetch repositories: ${V.status}`);const g=await V.json();if(g.length===0||(M.push(...g),g.length<z))break;O++}return M}catch(M){throw console.error("Error fetching repositories:",M),M}},[]),T=d.useCallback(M=>M&&{JavaScript:"#f1e05a",TypeScript:"#2b7489",Python:"#3572A5",Java:"#b07219","C#":"#239120","C++":"#f34b7d",C:"#555555",PHP:"#4F5D95",Ruby:"#701516",Go:"#00ADD8",Rust:"#dea584",Swift:"#ffac45",Kotlin:"#F18E33",Dart:"#00B4AB",HTML:"#e34c26",CSS:"#1572B6",Vue:"#4FC08D",React:"#61DAFB",Angular:"#DD0031",Svelte:"#ff3e00",Shell:"#89e051",PowerShell:"#012456",Dockerfile:"#384d54",YAML:"#cb171e",JSON:"#292929",Markdown:"#083fa1"}[M]||"#586069",[]),$=d.useCallback((M,O)=>M.map(z=>{const V=O.find(g=>g.repo===z.name);return{...z,isPinned:!!V,languageColor:T(z.language)}}),[T]),h=d.useCallback(async()=>{u(!0),l(null);try{const[M,O,z]=await Promise.all([v(),j(),S()]);c(M),o(O);const V=$(z,O);t(V)}catch(M){const O=M instanceof Error?M.message:"Failed to load GitHub data";l(O)}finally{u(!1)}},[v,j,S,$]),_=d.useMemo(()=>{const M=e.map(O=>O.language).filter(O=>O!==null);return Array.from(new Set(M)).sort()},[e]),R=d.useMemo(()=>{const M=e.filter(O=>{const z=f===""||O.name.toLowerCase().includes(f.toLowerCase())||O.description&&O.description.toLowerCase().includes(f.toLowerCase()),V=p==="all"||O.language===p;return z&&V&&!O.fork});return M.sort((O,z)=>O.isPinned&&!z.isPinned?-1:!O.isPinned&&z.isPinned?1:z.stargazers_count-O.stargazers_count),M.slice(0,6)},[e,f,p]),L=d.useCallback(M=>{window.open(M.html_url,"_blank","noopener,noreferrer")},[]),B=()=>{!x&&e.length===0&&h(),y(!x)},F=()=>{const M="/portfolio/",O=document.createElement("a");O.href=`${M}cv.pdf`,O.download="Thalison_Costa_CV.pdf",O.click()},E=()=>{window.open("/portfolio/cv.pdf","_blank","noopener,noreferrer")};return s.jsx("div",{className:`about-app ${n}`,children:s.jsxs("div",{className:"about-container",children:[s.jsxs("header",{className:"about-header",children:[s.jsx("div",{className:"about-avatar",children:s.jsx("div",{className:"avatar-placeholder",children:"👨‍💻"})}),s.jsxs("div",{className:"about-basic-info",children:[s.jsx("h1",{className:"about-name",children:"Thalison Costa"}),s.jsx("p",{className:"about-title",children:"Software Developer"})]})]}),s.jsxs("section",{className:"about-section",children:[s.jsx("h2",{className:"section-title",children:"Contact Information"}),s.jsxs("div",{className:"contact-links",children:[s.jsxs("a",{href:"mailto:thalisoncosta123@gmail.com",className:"contact-link","aria-label":"Send email",children:[s.jsx("span",{className:"contact-icon",children:"📧"}),s.jsx("span",{children:"thalisoncosta123@gmail.com"})]}),s.jsxs("a",{href:"https://github.com/ThalisonCosta",target:"_blank",rel:"noopener noreferrer",className:"contact-link","aria-label":"Visit GitHub profile",children:[s.jsx("span",{className:"contact-icon",children:"🐙"}),s.jsx("span",{children:"GitHub Profile"})]}),s.jsxs("a",{href:"https://www.linkedin.com/in/thalison-costa/",target:"_blank",rel:"noopener noreferrer",className:"contact-link","aria-label":"Visit LinkedIn profile",children:[s.jsx("span",{className:"contact-icon",children:"💼"}),s.jsx("span",{children:"LinkedIn Profile"})]})]})]}),s.jsxs("section",{className:"about-section",children:[s.jsx("h2",{className:"section-title",children:"Curriculum Vitae"}),s.jsxs("div",{className:"cv-actions",children:[s.jsxs("button",{onClick:E,className:"cv-button cv-preview","aria-label":"Preview CV in browser",children:[s.jsx("span",{className:"button-icon",children:"👁️"}),"View CV"]}),s.jsxs("button",{onClick:F,className:"cv-button cv-download","aria-label":"Download CV as PDF",children:[s.jsx("span",{className:"button-icon",children:"⬇️"}),"Download CV"]})]})]}),s.jsxs("section",{className:"about-section",children:[s.jsx("h2",{className:"section-title",children:"Technical Skills"}),s.jsxs("div",{className:"skills-grid",children:[s.jsxs("div",{className:"skill-category",children:[s.jsx("h3",{children:"Frontend"}),s.jsxs("div",{className:"skill-tags",children:[s.jsx("span",{className:"skill-tag",children:"React"}),s.jsx("span",{className:"skill-tag",children:"TypeScript"}),s.jsx("span",{className:"skill-tag",children:"JavaScript"}),s.jsx("span",{className:"skill-tag",children:"HTML/CSS"})]})]}),s.jsxs("div",{className:"skill-category",children:[s.jsx("h3",{children:"Backend"}),s.jsxs("div",{className:"skill-tags",children:[s.jsx("span",{className:"skill-tag",children:"Node.js"}),s.jsx("span",{className:"skill-tag",children:"Python"}),s.jsx("span",{className:"skill-tag",children:"APIs"}),s.jsx("span",{className:"skill-tag",children:"Databases"})]})]}),s.jsxs("div",{className:"skill-category",children:[s.jsx("h3",{children:"Tools & Other"}),s.jsxs("div",{className:"skill-tags",children:[s.jsx("span",{className:"skill-tag",children:"Git"}),s.jsx("span",{className:"skill-tag",children:"Docker"}),s.jsx("span",{className:"skill-tag",children:"Linux"}),s.jsx("span",{className:"skill-tag",children:"AWS"})]})]})]})]}),s.jsxs("section",{className:"about-section",children:[s.jsx("h2",{className:"section-title",children:"About Me"}),s.jsxs("div",{className:"about-description",children:[s.jsx("p",{children:"Passionate software developer with experience in full-stack development. I enjoy creating innovative solutions and learning new technologies."}),s.jsx("p",{children:"Currently working on various projects involving React, TypeScript, and modern web technologies. Always eager to collaborate on interesting projects and share knowledge with the community."})]})]}),s.jsxs("section",{className:"about-section",children:[s.jsxs("div",{className:"github-section-header",children:[s.jsx("h2",{className:"section-title",children:"GitHub Projects"}),s.jsx("button",{onClick:B,className:"github-toggle-btn","aria-label":x?"Hide GitHub projects":"Show GitHub projects",children:x?"Hide Repositories":"Show Repositories"})]}),x&&s.jsxs("div",{className:"github-content",children:[a&&s.jsxs("div",{className:"github-loading",children:[s.jsx("div",{className:"github-loading-spinner"}),s.jsx("div",{className:"github-loading-text",children:"Loading GitHub repositories..."})]}),m&&s.jsxs("div",{className:"github-error",children:[s.jsx("div",{className:"github-error-message",children:m}),s.jsx("button",{onClick:h,className:"github-retry-btn",children:"Try Again"})]}),!a&&!m&&e.length>0&&s.jsxs(s.Fragment,{children:[i&&s.jsxs("div",{className:"github-profile",children:[s.jsx("img",{src:i.avatar_url,alt:`${i.name||i.login} avatar`,className:"github-avatar"}),s.jsxs("div",{className:"github-profile-info",children:[s.jsx("h3",{className:"github-profile-name",children:i.name||i.login}),i.bio&&s.jsx("p",{className:"github-profile-bio",children:i.bio}),s.jsxs("div",{className:"github-profile-stats",children:[s.jsxs("span",{className:"github-stat",children:[s.jsx("strong",{children:i.public_repos})," repositories"]}),s.jsxs("span",{className:"github-stat",children:[s.jsx("strong",{children:i.followers})," followers"]})]})]})]}),s.jsxs("div",{className:"github-controls",children:[s.jsxs("div",{className:"github-search-container",children:[s.jsx("span",{className:"github-search-icon",children:"🔍"}),s.jsx("input",{type:"text",className:"github-search-input",placeholder:"Search repositories...",value:f,onChange:M=>C(M.target.value)})]}),s.jsxs("select",{className:"github-filter-select",value:p,onChange:M=>w(M.target.value),children:[s.jsx("option",{value:"all",children:"All Languages"}),_.map(M=>s.jsx("option",{value:M,children:M},M))]})]}),s.jsx("div",{className:"github-repos-grid",children:R.map(M=>s.jsxs("div",{className:`github-repo-card ${M.isPinned?"pinned":""}`,onClick:()=>L(M),children:[M.isPinned&&s.jsx("div",{className:"github-pinned-badge",children:"📌 Pinned"}),s.jsxs("div",{className:"github-repo-header",children:[s.jsx("h4",{className:"github-repo-name",children:M.name}),s.jsxs("div",{className:"github-repo-stats",children:[s.jsxs("span",{className:"github-repo-stat",children:["⭐ ",M.stargazers_count]}),s.jsxs("span",{className:"github-repo-stat",children:["🍴 ",M.forks_count]})]})]}),s.jsx("p",{className:"github-repo-description",children:M.description||"No description available"}),s.jsxs("div",{className:"github-repo-footer",children:[M.language&&s.jsxs("div",{className:"github-repo-language",children:[s.jsx("span",{className:"github-language-dot",style:{backgroundColor:M.languageColor}}),M.language]}),s.jsxs("div",{className:"github-repo-updated",children:["Updated ",new Date(M.updated_at).toLocaleDateString()]})]}),M.topics.length>0&&s.jsxs("div",{className:"github-repo-topics",children:[M.topics.slice(0,3).map(O=>s.jsx("span",{className:"github-topic-tag",children:O},O)),M.topics.length>3&&s.jsxs("span",{className:"github-topic-more",children:["+",M.topics.length-3," more"]})]})]},M.id))}),e.length>6&&s.jsx("div",{className:"github-view-all",children:s.jsxs("a",{href:`https://github.com/${k}?tab=repositories`,target:"_blank",rel:"noopener noreferrer",className:"github-view-all-btn",children:["View All ",e.length," Repositories on GitHub"]})})]})]})]})]})})},mr=Object.freeze(Object.defineProperty({__proto__:null,AboutApp:er},Symbol.toStringTag,{value:"Module"}));export{mr as A,tt as C,sr as F,je as I,lr as M,dr as P,Je as R,ur as S,rr as T,ce as a,d as b,Qt as c,Xt as d,or as e,ir as f,ar as g,cr as h,nr as i,s as j,jt as r,J as u};
